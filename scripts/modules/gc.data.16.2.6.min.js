/*!
 * 
 * SpreadJS Library 16.2.6
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 *
 * Licensed under the SpreadJS Commercial License.
 * us.sales@grapecity.com
 * http://www.grapecity.com/en/licensing/grapecity/
 *
 *
 */
var GC;!function(){var r,i,t;function e(t){var n,n,n=i[t];return void 0!==n||(n=i[t]={exports:{}},r[t](n,n.exports,e)),n.exports}r={"./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js":function(t,n,r){var i,e,u,o;function s(t){var n,n,n=u[t];return void 0!==n||(n=u[t]={exports:{}},e[t].call(n.exports,n,n.exports,s)),n.exports}e={"./dist/src/calculation/calcSource.js":function(t,n,r){"use strict";var i,f,e,u,o,s;function c(){this.row=[],this.field=[]}function a(t,n){var t=s.call(this,t)||this;return t.nM=n,t.MEt={},t}i=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerCalcSource=n.DataManagerReference=void 0,f=r("CalcEngine"),c.prototype.parseRowIndex=function(t,n,r){var i=n.num;return n.relative||(-1===n.num?i=t-1:i--),r*n.relative+i},c.prototype.getValueImp=function(t){var n,r,i,e,u,o,s,c,n=this.table.length();if(this.field.vEt&&this.field.vEt[this.rowString])return this.field.vEt[this.rowString];if(r=[],0===this.row.length)for(i=0;i<n;i++)r.push(this.field.getValue(i));for(e=0;e<this.row.length;e++)if(2===(u=this.row[e]).length)for(o=this.parseRowIndex(n,u[0],t),s=this.parseRowIndex(n,u[1],t),c=o;c<=s;c++)r.push(this.field.getValue(c));else if(u.type)if("key"===u.type)i=this.table.mEt(u.value),r=r.concat(this.field.getValues(i));else for(c="odd"===u.type?1:0;c<n;c+=2)r.push(this.field.getValue(c));else i=this.parseRowIndex(n,u,t),r.push(this.field.getValue(i));if(1===r.length)r=r[0];else if(0===r.length)return null;return r instanceof Array&&(r=r[0]instanceof Array?new f.CalcArray(r):new f.CalcArray([r])),this.gEt||(this.field.vEt=this.field.vEt||{},this.field.vEt[this.rowString]=r),r},c.prototype.getValuesImp=function(t,n,r){var t=this.field.getValues(t,n,r);return t[0]instanceof Array?new f.CalcArray(t):new f.CalcArray([t])},c.prototype.getValue=function(t,n,r){return this.pEt(),t instanceof Array?this.getValuesImp(t,n,r):this.getValueImp(t)},c.prototype.pEt=function(){this.field=this.table.rRt(this.Pq)},n.DataManagerReference=c,s=f.CalcSource,i(a,s),a.prototype.yEt=function(){return this._allFieldNames},a.prototype.wEt=function(t,n){2===arguments.length?this.MEt[t]=n:1===arguments.length&&delete this.MEt[t]},a.prototype.pe=function(t,n,r,i){this.DJ=t,this.ak=n,this.pwn=r,this.GOt=i},a.prototype.getField=function(t){var n=this.DJ,r=this.ak,i=this.pwn;return t.getValue(n,r,i)},a.prototype.getValue=function(){var t=this.GOt;return t&&"number"==typeof this.DJ?this.nM._getValueByField(t,this.DJ):null},n.DataManagerCalcSource=a},"./dist/src/calculation/functions/functions.entry.js":function(t,n,r){"use strict";var i,e,u,o,s,c,f,a,h;function l(){(0,i.addScopeCustomFunctions)(),(0,e.addParentCustomFunctions)(),(0,u.addChildrenCustomFunctions)(),(0,o.addOnlyChildrenCustomFunctions)(),(0,s.addLevelCustomFunctions)(),(0,c.addLevelRowNumberCustomFunctions)(),(0,f.addQueryFunction)(),(0,a.addWindowOverFunctions)(),(0,h.addWindowFunctions)()}Object.defineProperty(n,"__esModule",{value:!0}),n.addCustomFunctions=void 0,i=r("./dist/src/calculation/functions/scope.js"),e=r("./dist/src/calculation/functions/hierarchyParent.js"),u=r("./dist/src/calculation/functions/hierarchyChildren.js"),o=r("./dist/src/calculation/functions/hierarchyOnlyChildren.js"),s=r("./dist/src/calculation/functions/hierarchyLevel.js"),c=r("./dist/src/calculation/functions/hierarchyLevelRowNumber.js"),f=r("./dist/src/calculation/functions/query.js"),a=r("./dist/src/calculation/functions/windowOvers/windowOvers.entry.js"),h=r("./dist/src/calculation/functions/windowFunctions/windowFunctions.entry.js"),n.addCustomFunctions=l},"./dist/src/calculation/functions/hierarchyChildren.js":function(t,n,r){"use strict";var s,c,i,e;function u(){function t(){this.R9t=[{J6t:3,pkt:["< 1","> 999"]},{J6t:5}]}(t.prototype=new i.CalcFunction(e,2,2)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,r,i){var e,u,n,o,e=[],u=t.source.nM,n=t.source.DJ;return u.CEt()&&(o=u.SEt(n),!(0,c.isNullOrUndefined)(o))&&0<r&&!(0,c.isNullOrEmpty)(i)&&((0,c.traversalTree)(o,{invoking:function(t){var n,n,n;return 0===--r?(n=t.lp,n=u._dataSource.TEt(n),n=u._getValueByField(i,n),e.push(n),{cancelDeepRecursion:!0}):0===t.children.length?{cancelDeepRecursion:!0}:void 0},invoked:function(){r++}}),t.source.DJ=n),new s.CalcArray([e])},s.Functions.defineGlobalCustomFunction(e,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addChildrenCustomFunctions=void 0,s=r("CalcEngine"),c=r("./dist/src/dataSource/utils.js"),i=r("./dist/src/calculation/functions/utils.js"),e="CHILDREN",n.addChildrenCustomFunctions=u},"./dist/src/calculation/functions/hierarchyLevel.js":function(t,n,r){"use strict";var i,e,u,o;function s(){function t(){}(t.prototype=new u.CalcFunction(o)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){var n,t,n,n=t.source.nM,t=t.source.DJ;if(n.CEt()&&(n=n.SEt(t),!(0,e.isNullOrUndefined)(n)))return n.level},i.Functions.defineGlobalCustomFunction(o,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addLevelCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/dataSource/utils.js"),u=r("./dist/src/calculation/functions/utils.js"),o="LEVEL",n.addLevelCustomFunctions=s},"./dist/src/calculation/functions/hierarchyLevelRowNumber.js":function(t,n,r){"use strict";var i,e,u,o;function s(){function t(){}(t.prototype=new u.CalcFunction(o)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){var n,t,n,n=t.source.nM,t=t.source.DJ;if(n.CEt()&&(n=n.SEt(t),!(0,e.isNullOrUndefined)(n)))return n.getCurrentIndex()+1},i.Functions.defineGlobalCustomFunction(o,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addLevelRowNumberCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/dataSource/utils.js"),u=r("./dist/src/calculation/functions/utils.js"),o="LEVELROWNUMBER",n.addLevelRowNumberCustomFunctions=s},"./dist/src/calculation/functions/hierarchyOnlyChildren.js":function(t,n,r){"use strict";var o,s,i,e;function u(){function t(){this.R9t=[{J6t:5}]}(t.prototype=new i.CalcFunction(e,1,1)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,n){var r,i,e,u,r=[],i=t.source.nM,e=t.source.DJ;return i.CEt()&&(u=i.SEt(e),(0,s.isNullOrUndefined)(u)||(0,s.isNullOrEmpty)(n)||((0,s.traversalTree)(u,function(t){var t,t,t;0===t.children.length&&(t=t.lp,t=i._dataSource.TEt(t),t=i._getValueByField(n,t),r.push(t))}),t.source.DJ=e)),new o.CalcArray([r])},o.Functions.defineGlobalCustomFunction(e,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addOnlyChildrenCustomFunctions=void 0,o=r("CalcEngine"),s=r("./dist/src/dataSource/utils.js"),i=r("./dist/src/calculation/functions/utils.js"),e="ONLYCHILDREN",n.addOnlyChildrenCustomFunctions=u},"./dist/src/calculation/functions/hierarchyParent.js":function(t,n,r){"use strict";var i,o,e,u;function s(){function t(){this.R9t=[{J6t:3,pkt:["< 1","> 999"]},{J6t:5}]}(t.prototype=new e.CalcFunction(u,2,2)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,n,r){var i,e,u,u,n,u,n,i=t.source.nM,e=t.source.DJ;if(i.CEt()&&(u=i.SEt(e),!(0,o.isNullOrUndefined)(u))&&0<n&&!(0,o.isNullOrEmpty)(r)&&!(u=c(u,n)).isRoot)return n=u.lp,u=i._dataSource.TEt(n),n=i._getValueByField(r,u),t.source.DJ=e,n},i.Functions.defineGlobalCustomFunction(u,new t)}function c(t,n){return 0===n||t.isRoot?t:c(t.parent,n-1)}Object.defineProperty(n,"__esModule",{value:!0}),n.addParentCustomFunctions=void 0,i=r("CalcEngine"),o=r("./dist/src/dataSource/utils.js"),e=r("./dist/src/calculation/functions/utils.js"),u="PARENT",n.addParentCustomFunctions=s},"./dist/src/calculation/functions/query.js":function(t,n,r){"use strict";var c,i;function e(){var t;c.Functions.findGlobalFunction(i)||((t=new c.Functions.AsyncFunction(i,1,3)).isContextSensitive=function(){return!0},t.evaluateAsync=function(n,r,i,e){var u,t;function o(){var t,t,t,t;null!=(t=null==(t=null==(t=n.ctx)?void 0:t.Xkt)?void 0:t.node)&&t.WK?(t=u.IEt(r,i,e))&&(e?n.setAsyncResult(t[0]):n.setAsyncResult(new c.CalcArray(t))):u.IEt(r,i,e,!0)}function s(){var t=u.IEt(r,i,e,o);t&&(e?n.setAsyncResult(t[0]):n.setAsyncResult(new c.CalcArray(t)))}(t=(u=n.ctx.source.Mf.parent.dataManager()).xEt(r,i,e)).table&&t.table.NEt().then(function(){s()})},t.acceptsReference=function(t){return!0},t.acceptsArray=function(t){return!0},c.Functions.defineGlobalCustomFunction(i,t))}Object.defineProperty(n,"__esModule",{value:!0}),n.addQueryFunction=void 0,c=r("CalcEngine"),i="QUERY",n.addQueryFunction=e},"./dist/src/calculation/functions/scope.js":function(t,n,r){"use strict";var i,e,u,o,s;function c(){function t(){}function n(){}(t.prototype=new u.CalcFunction(o,2,2)).isContextSensitive=function(){return!0},t.prototype.isReverseArgs=function(){return!0},t.prototype.evaluate=function(t,n,r){return t.source.ak=n.start,t.source.DJ=n.context,r},i.Functions.defineGlobalCustomFunction(o,new t),(n.prototype=new u.CalcFunction(s,0,255)).isContextSensitive=function(){return!0},n.prototype.evaluate=function(t){for(var n,r,i,e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return i={start:t.source.ak,context:t.source.DJ},e=t.source.MEt,t.source.ak=0,t.source.DJ=f(e.groupContext,n),i},i.Functions.defineGlobalCustomFunction(s,new n)}function f(t,n){var n=a(t.groupOptions.slice(0,t.path.length),n);return h(t.path,n)?t.entireScope:l(t.path,n)}function a(t,n){var r,i;if(n&&0<n.length){for(r=-1,t.reverse(),i=0;i<t.length;i++)if(t[i].field!==n[i]){(0,e.isNullOrUndefined)(n[i])&&n.length<=i&&(r=t.length-i-1);break}return r}return-1}function h(t,n){return-1===n||t.length-1<=n}function l(t,n){var r,i=[];return d(t[n],i),i}function d(t,n){var r,i,e,u,o,s,c,f,r=n.length,i=t.recordRowNumbers;if(i)for(e=0,u=i.length;e<u;e++)n[r+e]=i[e];else for(s=0,c=o=t.children;s<c.length;s++)d(f=c[s],n)}Object.defineProperty(n,"__esModule",{value:!0}),n.addScopeCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/dataSource/utils.js"),u=r("./dist/src/calculation/functions/utils.js"),o="CALCULATE",s="REMOVEFILTERS",n.addScopeCustomFunctions=c},"./dist/src/calculation/functions/utils.js":function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CalcFunction=void 0;var r=r("./dist/src/dataManager.common.js");n.CalcFunction=r.CalcFunction},"./dist/src/calculation/functions/windowFunctions/cumeDist.js":function(t,n,r){"use strict";var i,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.CUMEDIST)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){return(0,e.expandContext)(t,function(t){for(var n,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j,m,_,y,g,O,S,n=t.indexes,r=t.begin,i=t.length,e=t.result,u=t.orders,o=t.isOrderValid,s=t.reader,c=i-r,f=o&&1===u.length,a=o&&u[0].field,h=function(t){return s(a,n[t])},l=function(t,n){return s(u[n].field,t)},d=function(t){return n[t]},v=r;v<i;v++)if(o){if(p=n[v],w=void 0,j=n[b=v+1],f)(w=s(a,p))===s(a,j)&&(b=(-1!==(m=C(h,w,b,i-1))?m:b)+1);else{for(w=[],y=!(_=void 0),g=0;g<u.length;g++){if(a=u[g].field,(_=s(a,p))!==s(a,j)){y=!1;break}w.push(_)}y&&(b=(-1!==(m=R(d,l,w,b,i-1))?m:b)+1)}for(O=(b-r)/c,S=b-v;0<S;)S--,e.push(O);v=b-1}else e.push(1)})},i.Functions.defineGlobalCustomFunction(e.CUMEDIST,new t)}function C(t,n,r,i){for(var e,u,o,s,c,e=r,u=i,o=-1;e<=u;)n===(c=t(s=Math.floor((e+u)/2)))?(e=s+1,o=s):u=s-1;return o}function R(t,n,r,i,e){for(var u,o,s,c,f,a,h,l,u=i,o=e,s=-1,c=r.length-1;u<=o;){for(a=t(f=Math.floor((u+o)/2)),h=!0,l=c;0<=l;l--)if(n(a,l)!==r[l]){h=!1;break}h?(u=f+1,s=f):o=f-1}return s}Object.defineProperty(n,"__esModule",{value:!0}),n.addCumeDistCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addCumeDistCustomFunctions=u},"./dist/src/calculation/functions/windowFunctions/denseRank.js":function(t,n,r){"use strict";var i,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.DENSERANK)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){return(0,e.expandContext)(t,function(t){for(var n,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,n=t.indexes,r=t.begin,i=t.length,e=t.result,u=t.orders,o=t.reader,s=t.isOrderValid,c=0,h=!1,l=s&&1===u.length,d=s&&u[0].field,v=r;v<i;v++){if(s)if(p=n[v],l)(a=o(d,p))===f&&v!==r||(c+=1,f=a);else{for(a=[],w=u.length-1;0<=w;w--)b=o(u[w].field,p),a.unshift(b),b!==f[w]&&(h=!0);!h&&v!==r||(h=!1,c+=1,f=a)}else c=1;e.push(c)}})},i.Functions.defineGlobalCustomFunction(e.DENSERANK,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addDenseRankCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addDenseRankCustomFunctions=u},"./dist/src/calculation/functions/windowFunctions/firstLastNthValue.js":function(t,n,r){"use strict";var i,d,e,v,r;function u(){function t(){}(t.prototype=new e.CalcFunction(e.FIRSTVALUE,1,1)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return 0===t},t.prototype.evaluate=function(t,n){return c(t,n,v.first,1)},i.Functions.defineGlobalCustomFunction(e.FIRSTVALUE,new t)}function o(){function t(){}(t.prototype=new e.CalcFunction(e.LASTVALUE,1,1)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return 0===t},t.prototype.evaluate=function(t,n){return c(t,n,v.last,1)},i.Functions.defineGlobalCustomFunction(e.LASTVALUE,new t)}function s(){function t(){}(t.prototype=new e.CalcFunction(e.NTHVALUE,1,2)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return 0===t},t.prototype.evaluate=function(t,n,r){return c(t,n,v.nth,r)},i.Functions.defineGlobalCustomFunction(e.NTHVALUE,new t)}function c(t,n,a,h){var r,l=t.source.nM.Cve(n);return(0,e.expandContext)(t,function(t){var n,r,i,e,u,o,s,c,f,n=t.indexes,r=t.begin,i=t.length,e=t.result,u=t.frame,o=t.evaluateWindowIndexes;if((0,d.isNumber)(h)&&0<h)for(h=Math.floor(h),s={startIndex:r,endIndex:r},c=r;c<i;c++)o(u,r,c,n,s),a===v.first?e.push(l(n[s.startIndex])):a===v.last?e.push(l(n[s.endIndex])):(f=s.startIndex+h-1)<=s.endIndex?e.push(l(n[f])):e.push(null)})}Object.defineProperty(n,"__esModule",{value:!0}),n.addNthValueCustomFunctions=n.addLastValueCustomFunctions=n.addFirstValueCustomFunctions=void 0,i=r("CalcEngine"),d=r("./dist/src/dataSource/utils.js"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),(r=v=v||{})[r.first=0]="first",r[r.last=1]="last",r[r.nth=2]="nth",n.addFirstValueCustomFunctions=u,n.addLastValueCustomFunctions=o,n.addNthValueCustomFunctions=s},"./dist/src/calculation/functions/windowFunctions/leadLag.js":function(t,n,r){"use strict";var i,l,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.LEAD,1,3)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return 0===t},t.prototype.evaluate=function(t,n,r,i){return s(t,n,r,i)},i.Functions.defineGlobalCustomFunction(e.LEAD,new t)}function o(){function t(){}(t.prototype=new e.CalcFunction(e.LAG,1,3)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return 0===t},t.prototype.evaluate=function(t,n,r,i){return s(t,n,r,i,!0)},i.Functions.defineGlobalCustomFunction(e.LAG,new t)}function s(t,n,c,f,a){var r,h=t.source.nM.Cve(n);return(0,e.expandContext)(t,function(t){var n,r,i,e,u,o,s,n=t.indexes,r=t.begin,i=t.length,e=t.result;if(c=(0,l.isNullOrUndefined)(c)?1:c,(0,l.isNumber)(c)&&0<=c)for(c=Math.floor(c),f=(0,l.isNullOrUndefined)(f)?null:f,u=r;u<i;u++)s=o=void 0,(s=a?r<=(o=u-c):(o=u+c)<i)?e.push(h(n[o])):e.push(f)})}Object.defineProperty(n,"__esModule",{value:!0}),n.addLagCustomFunctions=n.addLeadCustomFunctions=void 0,i=r("CalcEngine"),l=r("./dist/src/dataSource/utils.js"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addLeadCustomFunctions=u,n.addLagCustomFunctions=o},"./dist/src/calculation/functions/windowFunctions/nTile.js":function(t,n,r){"use strict";var i,a,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.NTILE,1,1)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,f){return(0,e.expandContext)(t,function(t){var n,r,i,t,e,u,o,s,c,n=t.begin,r=t.length,i=t.result;if((0,a.isNumber)(f)&&0<f&&f<r)for(t=r-n,o=(e=Math.floor(t/f))+(0<(u=t%f)?1:0),u--,s=n,c=1;s<r;s++)i.push(c),0===--o&&(o=e+(0<u?1:0),u--,c++);else for(s=n;s<r;s++)i.push(s-n+1)})},i.Functions.defineGlobalCustomFunction(e.NTILE,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addNTileCustomFunctions=void 0,i=r("CalcEngine"),a=r("./dist/src/dataSource/utils.js"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addNTileCustomFunctions=u},"./dist/src/calculation/functions/windowFunctions/percentRank.js":function(t,n,r){"use strict";var i,e,u;function o(){function t(){}(t.prototype=new u.CalcFunction(u.WPERCENTRANK)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){return(0,e.evaluateRank)(t,function(t,n){return 1===n?0:(t-1)/(n-1)})},i.Functions.defineGlobalCustomFunction(u.WPERCENTRANK,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addWPercentRankCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowFunctions/rank.js"),u=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addWPercentRankCustomFunctions=o},"./dist/src/calculation/functions/windowFunctions/rank.js":function(t,n,r){"use strict";var i,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.WRANK)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){return o(t)},i.Functions.defineGlobalCustomFunction(e.WRANK,new t)}function o(t,m){return(0,e.expandContext)(t,function(t){var n,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j,n=t.indexes,r=t.begin,i=t.length,e=t.result,u=t.orders,o=t.isOrderValid,s=t.reader,c=1,h=!1,l=i-r,d=!1;for(o&&((d=1===u.length)?v=u[0].field:f=[]),p=r;p<i;p++){if(o)if(w=n[p],d)(a=s(v,w))===f&&p!==r||(c=p-r+1,m&&(c=m(c,l)),f=a);else{for(a=[],b=u.length-1;0<=b;b--)j=s(u[b].field,w),a.unshift(j),j!==f[b]&&(h=!0);!h&&p!==r||(h=!1,c=p-r+1,m&&(c=m(c,l)),f=a)}e.push(c)}})}Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateRank=n.addWRankCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addWRankCustomFunctions=u,n.evaluateRank=o},"./dist/src/calculation/functions/windowFunctions/rowNumber.js":function(t,n,r){"use strict";var i,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.ROWNUMBER)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){return(0,e.expandContext)(t,function(t){for(var n,r,i,e,n=t.begin,r=t.length,i=t.result,e=n;e<r;e++)i.push(e-n+1)})},i.Functions.defineGlobalCustomFunction(e.ROWNUMBER,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addRowNumberCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowFunctions/util.js"),n.addRowNumberCustomFunctions=u},"./dist/src/calculation/functions/windowFunctions/util.js":function(t,n,r){"use strict";var d,r;function e(t,n){return t.getCalcService().evaluateExpression(t,n,{row:0,col:0})}function i(t,n,r){return t.map(function(t){return n(t.field,r)})}function u(t,n){if(t!==n){if((0,d.isNullOrUndefined)(t)||(0,d.isNullOrUndefined)(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1}return!0}function o(t,n,r){var i,r,i=t.DJ;return t.DJ=r,r=e(t,n),t.DJ=i,r}function s(t,n){var r,t,i,e,u,o,s,c,f,a,h,l;if(!(0,d.isNullOrUndefined)(t.source.MEt)&&!(0,d.isNullOrUndefined)(t.source.MEt.extendContext))return r=t.source.DJ,i=(t=t.source.MEt.extendContext).begin,e=t.evaluator,u=r.length,o=!1,c=e.options.windowFrame,f=e.options.orders,a=!(s=void 0,d.isNullOrUndefined)(f)&&0<f.length,h=function(t,n){return e.Qhe(t).getValue(n)},l=e.Khe.bind(e),s=(0,d.isNullOrUndefined)(t.valueCache)?t.valueCache=[]:(o=!0,t.valueCache),o||n({indexes:r,begin:i,length:u,result:s,frame:c,orders:f,isOrderValid:a,reader:h,evaluateWindowIndexes:l}),s[0]}Object.defineProperty(n,"__esModule",{value:!0}),n.expandContext=n.evaluateExpressionValue=n.isEqualValues=n.getOrderByValues=n.evaluateExpression=n.CUMEDIST=n.DENSERANK=n.NTHVALUE=n.LASTVALUE=n.FIRSTVALUE=n.LAG=n.LEAD=n.NTILE=n.WPERCENTRANK=n.WRANK=n.ROWNUMBER=n.CalcFunction=void 0,d=r("./dist/src/dataSource/utils.js"),r=r("./dist/src/calculation/functions/utils.js"),n.CalcFunction=r.CalcFunction,n.ROWNUMBER="ROWNUMBER",n.WRANK="W_RANK",n.WPERCENTRANK="W_PERCENTRANK",n.NTILE="NTILE",n.LEAD="LEAD",n.LAG="LAG",n.FIRSTVALUE="FIRSTVALUE",n.LASTVALUE="LASTVALUE",n.NTHVALUE="NTHVALUE",n.DENSERANK="DENSERANK",n.CUMEDIST="CUMEDIST",n.evaluateExpression=e,n.getOrderByValues=i,n.isEqualValues=u,n.evaluateExpressionValue=o,n.expandContext=s},"./dist/src/calculation/functions/windowFunctions/windowFunctions.entry.js":function(t,n,r){"use strict";var i,e,u,o,s,c,f,a;function h(){(0,i.addRowNumberCustomFunctions)(),(0,e.addWRankCustomFunctions)(),(0,u.addDenseRankCustomFunctions)(),(0,o.addWPercentRankCustomFunctions)(),(0,s.addCumeDistCustomFunctions)(),(0,f.addNTileCustomFunctions)(),(0,c.addLeadCustomFunctions)(),(0,c.addLagCustomFunctions)(),(0,a.addFirstValueCustomFunctions)(),(0,a.addLastValueCustomFunctions)(),(0,a.addNthValueCustomFunctions)()}Object.defineProperty(n,"__esModule",{value:!0}),n.addWindowFunctions=void 0,i=r("./dist/src/calculation/functions/windowFunctions/rowNumber.js"),e=r("./dist/src/calculation/functions/windowFunctions/rank.js"),u=r("./dist/src/calculation/functions/windowFunctions/denseRank.js"),o=r("./dist/src/calculation/functions/windowFunctions/percentRank.js"),s=r("./dist/src/calculation/functions/windowFunctions/cumeDist.js"),c=r("./dist/src/calculation/functions/windowFunctions/leadLag.js"),f=r("./dist/src/calculation/functions/windowFunctions/nTile.js"),a=r("./dist/src/calculation/functions/windowFunctions/firstLastNthValue.js"),n.addWindowFunctions=h},"./dist/src/calculation/functions/windowOvers/ascDesc.js":function(t,n,r){"use strict";var i,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.ORDERASC,1,1)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(){var t,n;return s(arguments[0].source,arguments[1],!0)},i.Functions.defineGlobalCustomFunction(e.ORDERASC,new t)}function o(){function t(){}(t.prototype=new e.CalcFunction(e.ORDERDESC,1,1)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(){var t,n;return s(arguments[0].source,arguments[1],!1)},i.Functions.defineGlobalCustomFunction(e.ORDERDESC,new t)}function s(t,n,r){return{field:(0,e.getFieldOption)(t,n),ascending:r}}Object.defineProperty(n,"__esModule",{value:!0}),n.addOrderDescCustomFunctions=n.addOrderAscCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowOvers/util.js"),n.addOrderAscCustomFunctions=u,n.addOrderDescCustomFunctions=o},"./dist/src/calculation/functions/windowOvers/orderBy.js":function(t,n,r){"use strict";var i,s;function e(){function t(){}(t.prototype=new s.CalcFunction(s.ORDERBY,1,255)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(){for(var t,n,r,i,e,u,o,t,n=arguments[0].source,r=[],i=1,e=arguments.length;i<e;i++)o=void 0,o=c(u=arguments[i])?(0,s.evaluateExpression)(n,u):{field:(0,s.getFieldOption)(n,u),ascending:!0},r.push(o);return r},i.Functions.defineGlobalCustomFunction(s.ORDERBY,new t)}function c(t){var t=(0,s.getExprFunctionName)(t);return t===s.ORDERASC||t===s.ORDERDESC}Object.defineProperty(n,"__esModule",{value:!0}),n.addOrderByCustomFunctions=void 0,i=r("CalcEngine"),s=r("./dist/src/calculation/functions/windowOvers/util.js"),n.addOrderByCustomFunctions=e},"./dist/src/calculation/functions/windowOvers/partitionBy.js":function(t,n,r){"use strict";var i,o;function e(){function t(){}(t.prototype=new o.CalcFunction(o.PARTITIONBY,1,255)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(){for(var t,n,r,i,e,u,t,n=arguments[0].source,r=[],i=1,e=arguments.length;i<e;i++)r.push({field:(0,o.getFieldOption)(n,u=arguments[i]),ascending:!0});return r},i.Functions.defineGlobalCustomFunction(o.PARTITIONBY,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addPartitionByCustomFunctions=void 0,i=r("CalcEngine"),o=r("./dist/src/calculation/functions/windowOvers/util.js"),n.addPartitionByCustomFunctions=e},"./dist/src/calculation/functions/windowOvers/rangeRows.js":function(t,n,r){"use strict";var i,o,s,c,f,r;function e(){function t(){}(t.prototype=new c.CalcFunction(c.FRAMERANGE,1,2)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(t,n,r){var t=t.source,i=t.MEt.windowFrameOrder,e;return a({type:o.WindowOverFrameType.RANGE},t,n,r,i,!1)},i.Functions.defineGlobalCustomFunction(c.FRAMERANGE,new t)}function u(){function t(){}(t.prototype=new c.CalcFunction(c.FRAMEROWS,1,2)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(t,n,r){var t=t.source,i=t.MEt.windowFrameOrder,e;return a({type:o.WindowOverFrameType.ROWS},t,n,r,i,!0)},i.Functions.defineGlobalCustomFunction(c.FRAMEROWS,new t)}function a(t,n,r,i,e,u){var r,r,r=(0,c.unparseExpression)(n,r);return t.begin=h(r,o.WindowOverFramePreceding.CurrentRow,o.WindowOverFramePreceding.UnBounded,u,e),(0,s.isNullOrUndefined)(i)||(r=(0,c.unparseExpression)(n,i),t.end=h(r,o.WindowOverFrameFollowing.CurrentRow,o.WindowOverFrameFollowing.UnBounded,u,e)),l(t,e,u),t}function h(t,n,r,i,e){var r,t,r,u;return"[@]"===t?{type:f.current,option:{type:n}}:"-1"===t?{type:f.unbounded,option:{type:r}}:(r=/^\[@([-\+])(\d+(\.\d+)?)\]$/.exec(t))&&(t=r[1],r=Number(r[2]),u=void 0,"-"===t?u=o.WindowOverFramePreceding.NPreceding:"+"===t&&(u=o.WindowOverFrameFollowing.NFollowing),i?r=Math.floor(r):e&&("-"===t?u=o.WindowOverFrameFollowing.NFollowing:"+"===t&&(u=o.WindowOverFramePreceding.NPreceding)),0!==r)?{type:f.range,value:Number(t+r),option:{type:u,offset:r}}:{type:f.current,option:{type:n}}}function l(t,n,r){var i=t.begin,e=t.end,u=!1;e?(n&&!r?(i.type===f.unbounded||i.type===f.current&&(e.type===f.unbounded||e.type===f.current||e.type===f.range&&e.value<=0)||i.type===f.range&&(e.type===f.unbounded||0<=i.value&&e.type===f.current||e.type===f.range&&i.value>=e.value))&&(u=!0):(i.type===f.unbounded||i.type===f.current&&(e.type===f.unbounded||e.type===f.current||e.type===f.range&&0<=e.value)||i.type===f.range&&(e.type===f.unbounded||i.value<=0&&e.type===f.current||e.type===f.range&&i.value<=e.value))&&(u=!0),t.begin=t.begin.option,t.end=t.end.option,u||(t.begin.offset=-1,t.end.offset=-1)):t.begin=t.begin.option}Object.defineProperty(n,"__esModule",{value:!0}),n.addFrameRowsCustomFunctions=n.addFrameRangeCustomFunctions=void 0,i=r("CalcEngine"),o=r("./dist/src/dataSource/dataSource.interface.js"),s=r("./dist/src/dataSource/utils.js"),c=r("./dist/src/calculation/functions/windowOvers/util.js"),(r=f=f||{})[r.unbounded=-1]="unbounded",r[r.current=0]="current",r[r.range=1]="range",n.addFrameRangeCustomFunctions=e,n.addFrameRowsCustomFunctions=u},"./dist/src/calculation/functions/windowOvers/util.js":function(t,n,r){"use strict";var i,r;function e(t,n){return t.getCalcService().unparse(t,n,0,0)}function u(t,n){return t.getCalcService().evaluateExpression(t,n,{row:0,col:0})}function o(t,n,r){t.wEt("windowFrameOrder",!1===(r&&0<r.length&&r[0].ascending));var r=t.getCalcService().evaluateExpression(t,n,{row:0,col:0});return t.wEt("windowFrameOrder"),r}function s(t,n){var t=e(t,n),t;return t=14===n.type?t.replace(/[\[\]]/g,""):"=".concat(t)}function c(t){return(0,i.isNullOrUndefined)(t)?null:t.functionName||t.function&&t.function.name}function f(t){return c(t)===n.PARTITIONBY}function a(t){return c(t)===n.ORDERBY}function h(t){var t=c(t);return t===n.FRAMERANGE||t===n.FRAMEROWS}Object.defineProperty(n,"__esModule",{value:!0}),n.isWindowFrame=n.isOrderBy=n.isPartitionBy=n.getExprFunctionName=n.getFieldOption=n.evaluateFrameExpression=n.evaluateExpression=n.unparseExpression=n.WINDOWOVERDECONSTRUCT=n.FRAMEROWS=n.FRAMERANGE=n.ORDERDESC=n.ORDERASC=n.ORDERBY=n.PARTITIONBY=n.WINDOWOVER=n.CalcFunction=void 0,i=r("./dist/src/dataSource/utils.js"),r=r("./dist/src/calculation/functions/utils.js"),n.CalcFunction=r.CalcFunction,n.WINDOWOVER="WINDOW",n.PARTITIONBY="PARTITIONBY",n.ORDERBY="ORDERBY",n.ORDERASC="ORDERASC",n.ORDERDESC="ORDERDESC",n.FRAMERANGE="FRAMERANGE",n.FRAMEROWS="FRAMEROWS",n.WINDOWOVERDECONSTRUCT="WINDOWOVERDECONSTRUCT",n.unparseExpression=e,n.evaluateExpression=u,n.evaluateFrameExpression=o,n.getFieldOption=s,n.getExprFunctionName=c,n.isPartitionBy=f,n.isOrderBy=a,n.isWindowFrame=h},"./dist/src/calculation/functions/windowOvers/windowOver.js":function(t,n,r){"use strict";var i,e;function u(){function t(){}(t.prototype=new e.CalcFunction(e.WINDOWOVER,1,4)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(t,n,r,i,e){var u=t.Whe.D5;return u||(t.Whe.D5=u=o(t.source,t.Whe)),t.source.nM._getValueByField(u,t.source.DJ)},i.Functions.defineGlobalCustomFunction(e.WINDOWOVER,new t)}function o(t,n){var t=(0,e.unparseExpression)(t,n);return"="===t[0]?t:"="+t}Object.defineProperty(n,"__esModule",{value:!0}),n.addWindowOverCustomFunctions=void 0,i=r("CalcEngine"),e=r("./dist/src/calculation/functions/windowOvers/util.js"),n.addWindowOverCustomFunctions=u},"./dist/src/calculation/functions/windowOvers/windowOverDeconstruct.js":function(t,n,r){"use strict";var i,f;function e(){function t(){}(t.prototype=new i.Functions.Function(f.WINDOWOVERDECONSTRUCT,1,4)).isContextSensitive=function(){return!0},t.prototype.acceptsExpressionArgument=function(t){return!0},t.prototype.evaluate=function(t,n,r,i,e){var t,u,t,o,s,c,t=t.source,u=(0,f.unparseExpression)(t,n),t=a(t,r,i,e),o,s,c;return{windowExpression:n,windowFormula:u,partitions:t.partitions,orders:t.orders,windowFrame:t.windowFrame}},i.Functions.defineGlobalCustomFunction(f.WINDOWOVERDECONSTRUCT,new t)}function a(t,n,r,i){var e,u,o;return(0,f.isPartitionBy)(n)?(e=(0,f.evaluateExpression)(t,n),(0,f.isOrderBy)(r)?(u=(0,f.evaluateExpression)(t,r),(0,f.isWindowFrame)(i)&&(o=(0,f.evaluateFrameExpression)(t,i,u))):(0,f.isWindowFrame)(r)&&(o=(0,f.evaluateFrameExpression)(t,r))):(0,f.isOrderBy)(n)?(u=(0,f.evaluateExpression)(t,n),(0,f.isWindowFrame)(r)&&(o=(0,f.evaluateFrameExpression)(t,r,u))):(0,f.isWindowFrame)(n)&&(o=(0,f.evaluateFrameExpression)(t,n)),{partitions:e,orders:u,windowFrame:o}}Object.defineProperty(n,"__esModule",{value:!0}),n.addWindowOverDeconstructCustomFunctions=void 0,i=r("CalcEngine"),f=r("./dist/src/calculation/functions/windowOvers/util.js"),n.addWindowOverDeconstructCustomFunctions=e},"./dist/src/calculation/functions/windowOvers/windowOvers.entry.js":function(t,n,r){"use strict";var i,e,u,o,s,c;function f(){(0,i.addWindowOverCustomFunctions)(),(0,c.addWindowOverDeconstructCustomFunctions)(),(0,e.addPartitionByCustomFunctions)(),(0,u.addOrderByCustomFunctions)(),(0,o.addFrameRangeCustomFunctions)(),(0,o.addFrameRowsCustomFunctions)(),(0,s.addOrderAscCustomFunctions)(),(0,s.addOrderDescCustomFunctions)()}Object.defineProperty(n,"__esModule",{value:!0}),n.addWindowOverFunctions=void 0,i=r("./dist/src/calculation/functions/windowOvers/windowOver.js"),e=r("./dist/src/calculation/functions/windowOvers/partitionBy.js"),u=r("./dist/src/calculation/functions/windowOvers/orderBy.js"),o=r("./dist/src/calculation/functions/windowOvers/rangeRows.js"),s=r("./dist/src/calculation/functions/windowOvers/ascDesc.js"),c=r("./dist/src/calculation/functions/windowOvers/windowOverDeconstruct.js"),n.addWindowOverFunctions=f},"./dist/src/calculation/queryFunctionResolver.js":function(t,n,r){"use strict";var r,a,h,i;function l(r,i,e){return function(t){var n=[];return n.push(t.kEt(t.mEt(r),i||t._dataSource.DEt,e)),n}}function d(){}Object.defineProperty(n,"__esModule",{value:!0}),n.QueryFunctionSolver=void 0,r=r("Common"),a=null,h=r.Common.zf.fJ,d.parseParam=function(e,u,o,s){for(var c,f,t,n,c=Object.keys(s.tables),f=new d,t=function(t){var t,n,t,r,i,t=c[t];e===t?(f.getValue=function(t){return t.ASt(a,a,u,o)},f.table=s.tables[t]):h(e,t)&&(f.table=s.tables[t],n=e[t.length],t=e.substr(t.length+1),"#"===n?(r=parseInt(t,10),f.getValue=function(t){var n=[];return n.push(t.kEt(r,u||t._dataSource.DEt,o)),n}):"/"===n?f.getValue=l(t,u,o):"?"===n?1===(i=t.split("=",2)).length?f.getValue=l(t,u,o):f.getValue=function(t){return t.ASt(i[1],i[0],u,o)}:delete f.table)},n=0;n<c.length;n++)t(n);return f},n.QueryFunctionSolver=d},"./dist/src/calculation/tokenResolver.js":function(t,n,r){"use strict";var i,e,c,h,f,u,o,s,a;function l(t){var n=s.call(this,14)||this;return n.value=t,n}function d(t){return a.call(this,t)||this}i=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerTokenResolver=void 0,e=r("CalcEngine"),c=r("./dist/src/calculation/calcSource.js"),h=r("./dist/src/dataSource/utils.js"),s=e.Expression,i(l,s),l.prototype.Iwt=function(t,n){var r;this.value instanceof c.DataManagerReference&&this.value.table._Et(t,this.value.Pq[0],n)},f=l,a=e.TokenResolver,i(d,a),d.prototype.resolveToken=function(t,n,r,i,e){var r,u,t,t,r,o,s,r=r[i],u=r.Awt,t=t.source,t=t&&t.nM;if(t&&0===r.uit&&"["===u[0]&&"]"===u[u.length-1]&&(r=new c.DataManagerReference,-1!==(o=this.EEt(r,u,1)))&&(r.rowString=u.substring(1,o),-1!==(o=this.jEt(r,u,o))))return r.table=t,r.Pq=r.field,r.field=t.bEt(r.field),{expr:s=new f(r),index:i+1}},d.prototype.EEt=function(t,e,n){var u,r,i,o,s;function c(t,n){for(var r=n?t+1:t;"0"<=e[r]&&e[r]<="9";)r++;for(;" "===e[r];)r++;return{value:parseInt(e.substring(t,r),10),end:r}}function f(t){for(var n=t;n<e.length&&"["!==e[n]&&"]"!==e[n]&&","!==e[n];)n++;return{type:"key",value:e.substring(t,n).trim(),end:n}}function a(t){var n,r,i,r,n=e[t],r=e[t+1];return"@"===n?(u=!0,"+"===r||"-"===r?(i=c(t+1,!0)).end<=t+1?-1:{num:i.value,end:i.end,relative:!0}:{num:0,end:t+1,relative:!0}):"#"===n?(i=c(t+1)).end>t+1?{num:i.value,end:i.end,relative:!1}:"last"===e.substr(t+1,4)?{num:-1,end:t+5,relative:!1}:"odd"===e.substr(t+1,3)?{type:"odd",end:t+4}:"even"===e.substr(t+1,4)?{type:"even",end:t+5}:-1:"$"!==n||(r=f(t+1)).end>=e.length?-1:r}for(u=!1,r=null;n<e.length&&"["!==(i=e[n])&&"]"!==i;)if(r||"@"!==i&&"#"!==i&&"$"!==i){if(","===i&&r)r=!1;else if(" "!==i)break;n++}else{if(-1===(o=a(n)))return-1;if(":"!==e[o.end]||(0,h.isNullOrUndefined)(o.num))t.row.push(o),n=o.end;else{for(n=o.end+1;" "===e[n];)n++;if(-1===(s=a(n))||(0,h.isNullOrUndefined)(s.num))return-1;t.row.push([o,s]),n=s.end}r=!0}return t.gEt=u,!1===r?-1:n},d.prototype.jEt=function(t,r,n){var i,e,u;function o(t){for(var n=t;"]"!==r[n];)n++;return{str:r.substring(t,n),end:n}}function s(t){for(var n=t;"."!==r[n]&&"]"!==r[n];)n++;return{str:r.substring(t,n),end:n}}for(i=null;n<r.length;)if("["!==(e=r[n])||i){if("]"===e)break;if(" "===e)n++;else if("."===e&&i)n++,i=!1;else{if("."===e||i)return-1;u=s(n),t.field.push(u.str),n=u.end,i=!0}}else{if((u=o(n+1)).end<=n+1)return-1;t.field.push(u.str),n=u.end+1,i=!0}return n===r.length-1?n:-1},d.prototype.unparse=function(t,n,r,i){var e,u,o,s,c,f;if(14!==r.type)return!1;if(i.push("["),0<(e=r.value.rowString).length&&i.push(e),0<(u=r.value.Pq).length)for(o="@"===e||""===e,s=0,c=u.length;s<c;s++)f=u[s],!o||-1<f.indexOf(" ")?i.push("[".concat(f,"]")):i.push(f),s<c-1&&i.push(".");return i.push("]"),!0},n.DataManagerTokenResolver=d},"./dist/src/data-manager-report/data-manager-proxy/data-manager-proxy.js":function(t,n,r){"use strict";var i,e,u,o,s;function c(t){this.QSt={},this.N3=t}Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerProxy=void 0,i=r("CalcEngine"),e=r("./dist/src/dataManager.entry.js"),u=r("./dist/src/data-manager-report/tree-data-generator/utils/utils.js"),o=r("./dist/src/data-manager-report/data-manager-proxy/report-table.js"),c.prototype.getTable=function(t){var n,r;if(!(0,e.isNullOrUndefined)(t)){if(this.QSt[t])return this.QSt[t];if((n=this.N3.tables)[t])return this.QSt[t]=new o.ReportTable({dataManagerTable:n[t]}),this.QSt[t];for(r in t=t.toUpperCase(),n)if(n.hasOwnProperty(r)&&r.toUpperCase()===t)return this.QSt[t]=new o.ReportTable({dataManagerTable:n[r]}),this.QSt[t];return(0,u.isFormulaInWhitelist)(t)?(this.QSt[t]=this.generateFormulaTableByFormula(t),this.QSt[t]):void 0}},c.prototype.getCalcService=function(){return this.N3.Lp},c.prototype.getTables=function(){return this.QSt},c.prototype.getRelationshipsBySourceTable=function(t){var n,r,n=this.N3.relationships;return t&&(r=t.table(),n=n.filter(function(t){if(t.sourceTable===r&&!t.Dle)return t.Dle=!0})),n},c.prototype.generateFormulaTableByFormula=function(t){var n,r,n,n=this.getCalcService(),r=new i.CalcSource(n),n=(0,u.getFormulaResult)(n,r,t);return new o.ReportTable({formulaTable:{name:t,formulaResult:n}})},n.DataManagerProxy=c},"./dist/src/data-manager-report/data-manager-proxy/report-table.js":function(t,n,r){"use strict";var i,e;function u(t){var r,n,t,r=this,n=t.dataManagerTable,t=t.formulaTable;n?this._le=n:this.jle=t,this.jle&&(this.Ele=this.jle.formulaResult.map(function(t){var n={};return n[r.jle.name]=t,n}))}Object.defineProperty(n,"__esModule",{value:!0}),n.ReportTable=void 0,i=r("./dist/src/dataManager.entry.js"),Object.defineProperty(u.prototype,"name",{get:function(){return(this._le||this.jle).name},enumerable:!1,configurable:!0}),u.prototype.table=function(){return this._le},u.prototype.getFields=function(){return this._le.ltt()},u.prototype.getData=function(t){var n,r,i,e;if(this.jle)if(t)for(n=[],r=0,i=t;r<i.length;r++)e=i[r],n.push(this.Ele[e]);else n=this.Ele;else n=this._le.getDataSync(t);return n},u.prototype.length=function(){return this.jle?this.Ele.length:this._le.length()},u.prototype.getValueByField=function(t,n){var r,r;return this.jle?(0,i.formatCalcError)(this.jle.formulaResult[n]):((r=this._le.columns)[t]&&"string"==typeof r[t].value&&(t=r[t].value),r=this._le._getValueByField(t,n),"="===t[0]?(0,i.formatCalcError)(r):r)},u.prototype.hasField=function(n){return this.jle?n===this.jle.name:(n=n.toUpperCase(),0<Object.keys(this._le.columns).filter(function(t){return t.toUpperCase()===n}).length)},u.prototype.getFieldByNameIgnoreCase=function(t){return this.jle?{fieldName:this.name}:this._le.Ole(t)},u.prototype.reset=function(){this.jle||(this._le.XOt={})},n.ReportTable=u},"./dist/src/data-manager-report/data-manager-report.js":function(t,n,r){"use strict";var n,i,e,u;Object.defineProperty(n,"__esModule",{value:!0}),n=r("Common"),i=r("./dist/src/dataManager.js"),e=r("./dist/src/data-manager-report/tree-data-generator/index.js"),(u=n.Common.lt.Dh)(i.DataManager.prototype,{generateTreeData:function(t){var n;new e.TreeDataGenerator(this,t).generateTreeData()}})},"./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-cross-helper.js":function(t,n,r){"use strict";var N,T,i;function e(t,n,r,i,e){this.N3=t,this.DJ=n,this.Rle=r,this.Lle=i,this.Ble=e}Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerReportCrossHelper=void 0,N=r("./dist/src/dataManager.entry.js"),T=r("./dist/src/data-manager-report/tree-data-generator/utils/utils.js"),e.prototype.processCrossCells=function(t){var o=this;try{t.forEach(function(t){var n,u,r,n=t.leftParent.data.groups,u=t.upParent.data.groups,r=o.Fle(t);r?r.data.groups.forEach(function(r){var i,e,i=[],e=[];n.forEach(function(t){for(var n=t.leftParent||t.upParent;n;){if(n===r)return void i.push(t);if(n.cellNode===r.cellNode)return;n=n.leftParent||n.upParent}}),u.forEach(function(t){for(var n=t.upParent||t.leftParent;n;){if(n===r)return void e.push(t);if(n.cellNode===r.cellNode)return;n=n.upParent||n.leftParent}}),o.Ple(t,i,e)}):o.Ple(t,n,u)})}catch(t){}},e.prototype.Fle=function(t){for(var n,r,n=t.leftParent;n;){for(r=t.upParent;r;){if(r===n)return n;r=r.upParent||r.leftParent}n=n.leftParent||n.upParent}return null},e.prototype.Ple=function(u,t,n){var o,s,c,f,a,r,i,e,h,l,d,v,p,w,l,l,o=this,s=u.indexOfLeftParentChildren,c=u.indexOfUpParentChildren,f={},a=[],r,i=this.Rle.getRelationshipsMap()[u.relationshipMapKey];for(t.forEach(function(r,i){var t,e;r.crossChildren[s]||(r.crossChildren[s]=[]),t=r.valuePath,f[t]||(f[t]={}),e=f[t],n.forEach(function(t,n){t.crossChildren[c]||(t.crossChildren[c]=[]);var n={vg:r,hg:t,vIndex:i,hIndex:n,crossChildren:[],crossRecordRowNumbers:[]};e[t.valuePath]=n,a.push(n)})}),this.Gle(u)?i&&i.forEach(function(t,i){var n,e,n=o.Lle.generateParentPaths(u.leftParent,t),e=o.Lle.generateParentPaths(u.upParent,t);n.forEach(function(r){e.forEach(function(t){var n=f[r],n=n&&n[t];n&&n.crossRecordRowNumbers.push(i)})})}):i&&i.forEach(function(t,n){var r,t,r,r,r=o.Lle.generateParentPath(u.leftParent,t),t=o.Lle.generateParentPath(u.upParent,t),r=f[r],r=r&&r[t];r&&r.crossRecordRowNumbers.push(n)}),e=0,h=a;e<h.length;e++)d=(l=h[e]).vg,v=l.hg,p=l.vIndex,w=l.hIndex,l=l.crossRecordRowNumbers,l=this.Ule(d,v,l,u),d.crossChildren[s][w]=l,v.crossChildren[c][p]=l},e.prototype.Gle=function(t){return!!t&&(!!t.templateCell.Hle||!(!t.leftParent&&!t.upParent)&&(this.Gle(t.leftParent)||this.Gle(t.upParent)))},e.prototype.Ule=function(t,n,r,i,e){var u,o,s,s,c,f,u,u=this.N3;return t&&n||(s=(s=(o=t||n)&&o.cellNode)&&s.relationshipMapKey,c=i.relationshipMapKey,void 0!==s&&c!==s&&r&&r.length&&(f=void 0,i.templateCell.dataColumn?f=i.templateCell.dataColumn.tableName:i.templateCell.formula&&"No"!==i.templateCell.expansionDirection&&(0,T.isFormulaInWhitelist)(i.templateCell.formula)&&(f=i.templateCell.formula),u=u.getTable(f))&&e&&(r=this.Lle.zle(i,r,u,e,c,s,o))),"No"===i.templateCell.expansionDirection?this.Vle(t,n,r,i):this.Yle(t,n,r,i)},e.prototype.Vle=function(t,n,r,i){var e,u,o,s,c,f,a,h,o,l,d,v,p,w,b,w;if(i.templateCell.dataColumn?(o=i.templateCell.dataColumn.tableName,s=i.templateCell.dataColumn.columnName):i.templateCell.formula&&"No"!==i.templateCell.expansionDirection&&(0,T.isFormulaInWhitelist)(i.templateCell.formula)&&(o=i.templateCell.formula,s=i.templateCell.formula),c=[],f={},(0,N.isNullOrUndefined)(o))e=i.templateCell.value;else{if(!(u=this.N3.getTable(o)))return[];this.Ble&&this.Ble.parseSortOptionsToSorts(i.templateCell,u),a=(this.Rle.getTableNameCacheFromParent(i)||o).toUpperCase(),h=this.Rle.getRelationshipsMap()[i.relationshipMapKey],r.forEach(function(t){var t=h[t]&&h[t][a];f[t]||(c.push(t),f[t]=!0)}),o=c.map(function(t){return u.getValueByField(s,t)}),e=this.Zle(o,i)}for(l={value:e,leftParent:t,upParent:n,childrenArray:[],crossChildren:[],recordRowNumbers:r,cellNode:i,state:"normal",Wle:c,Qle:f},d=0,v=i.children;d<v.length;d++)b=w=void 0,(p=v[d]).leftParent===i?w=l:p.upParent===i&&(b=l),w=this.Ule(w,b,r,p,u),l.childrenArray.push(w);return i.data.groups.push(l),[l]},e.prototype.Yle=function(a,h,l,d){var u,v,o,t,p,n,w,r,i,e,s,c,f,b,n,t,n,j,m,_,y,g,O,S,C,R,C,u=this,v=[],o=d.templateCell.dataSetting,t=o.type;if(d.templateCell.dataColumn?(n=d.templateCell.dataColumn.tableName,w=d.templateCell.dataColumn.columnName):d.templateCell.formula&&"No"!==d.templateCell.expansionDirection&&(0,T.isFormulaInWhitelist)(d.templateCell.formula)&&(n=d.templateCell.formula,w=d.templateCell.formula),(0,N.isNullOrUndefined)(n))v.push({value:d.templateCell.value,leftParent:a,upParent:h,childrenArray:[],crossChildren:[],recordRowNumbers:[],cellNode:d,state:"normal",sortValues:[d.templateCell.value],Wle:[],Qle:{}});else{if(!(p=this.N3.getTable(n)))return[];this.Ble&&this.Ble.parseSortOptionsToSorts(d.templateCell,p),r=(this.Rle.getTableNameCacheFromParent(d)||n).toUpperCase(),i=this.Rle.getRelationshipsMap()[d.relationshipMapKey],e=[],s=[],c={},f=[],l.forEach(function(t){var n=i[t]&&i[t][r];e.push(n),c[n]||(s.push(n),c[n]=!0),f[n]||(f[n]=[]),f[n].push(t)}),0===l.length?v.push({value:void 0,leftParent:a,upParent:h,childrenArray:[],crossChildren:[],recordRowNumbers:[],cellNode:d,state:"normal",sortValues:[],Wle:[],Qle:{}}):"Group"===t?(e.forEach(function(c,f){for(var t,t,n,r,i,e,t=p.getValueByField(w,c),t=[{value:t,advancedGroupSortName:t}],n=function(n){var t,r,t,i,e,u,o,s,r=n.advancedGroupSortName+"",t=v.find(function(t){return t.value===n.value});if(t)t.recordRowNumbers.push(l[f]),t.Qle[c]||(t.Wle.push(c),t.Qle[c]=!0);else{if(i=[],d.templateCell.Kle&&d.templateCell.Kle.length)for(e=0,u=d.templateCell.Kle;e<u.length;e++)o=u[e],(s=void 0,N.isNullOrUndefined)(o.column)||(s=p.getValueByField(o.column,c)),i.push(s);v.push({value:n.value,Jle:r,leftParent:a,upParent:h,childrenArray:[],crossChildren:[],recordRowNumbers:[l[f]],cellNode:d,state:"normal",sortValues:i,Wle:[c],Qle:((t={})[c]=!0,t)})}},r=0,i=t=o.bins&&o.bins.length?u.Lle.getAdvancedGroupValue(p,c,o):t;r<i.length;r++)n(e=i[r])}),o.bins&&o.bins.length&&(b={},o.bins.forEach(function(t,n){var r,i;b[t.caption]=n,r=t.caption,v.find(function(t){return t.value===r})||!0!==t.alwaysVisible||v.push(i={value:r,Jle:r,recordRowNumbers:[],childrenArray:[],leftParent:a,upParent:h,crossChildren:[],state:"new",cellNode:d,sortValues:[],Wle:[],Qle:{}})}),v.sort(function(t,n){var r,i;return b[t.Jle+""]-b[n.Jle+""]}))):"List"===t?s.forEach(function(t,n){var r,r,i,e,u,o,s,r=p.getValueByField(w,t),i=[];if(d.templateCell.Kle&&d.templateCell.Kle.length)for(e=0,u=d.templateCell.Kle;e<u.length;e++)o=u[e],(s=void 0,N.isNullOrUndefined)(o.column)||(s=p.getValueByField(o.column,t)),i.push(s);v.push({value:r,leftParent:a,upParent:h,childrenArray:[],crossChildren:[],recordRowNumbers:f[t],cellNode:d,state:"normal",sortValues:i,Wle:[t],Qle:((r={})[t]=!0,r)})}):(n=s.map(function(t){return p.getValueByField(w,t)}),t=d.templateCell.dataSetting,n=(0,T.calc)(n,t.aggregation),v.push({value:n,leftParent:a,upParent:h,childrenArray:[],crossChildren:[],recordRowNumbers:l,cellNode:d,state:"normal",sortValues:[n],Wle:s,Qle:c}))}for(j=0,m=v;j<m.length;j++)for(y=(_=m[j]).recordRowNumbers,g=0,O=d.children;g<O.length;g++)R=C=void 0,(S=O[g]).leftParent===d?C=_:S.upParent===d&&(R=_),C=this.Ule(C,R,y,S,p),_.childrenArray.push(C);return this.Ble&&this.Ble.sortGroupsBySortCondition(v,d,this.DJ&&this.DJ.cellNodeGetter),v.forEach(function(t){d.data.groups.push(t)}),v},e.prototype.Zle=function(t,n){var n,r,n=n.templateCell.dataSetting;return n&&"Group"===n.type?(r=[],t.forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),1<r.length?r:r[0]):"List"===n.type?t.map(function(t){return t}):(0,T.calc)(t,n&&n.aggregation||"Sum")},n.DataManagerReportCrossHelper=e},"./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-group-helper.js":function(t,n,r){"use strict";var v,T,P,s,i;function e(t,n,r,i){this.N3=t,this.DJ=n,this.Xle=new v.CalcSource(t.getCalcService()),this.qle={},this.$le={},this.Ble=i,this.Rle=r}Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerReportGroupHelper=void 0,v=r("CalcEngine"),T=r("./dist/src/dataManager.entry.js"),P=r("./dist/src/data-manager-report/tree-data-generator/utils/utils.js"),s=r("./dist/src/data-manager-report/tree-data-generator/utils/value-comparator-factory.js"),e.prototype.generateCellNodeTreeData=function(t,n,r,i,e,u){var o,s,c,f,a,h,h,l,d,v,p,w,b,j,m,_,y,g,_,o=this.N3,f=[],a={};if(t.templateCell.dataColumn?(s=t.templateCell.dataColumn.tableName,c=t.templateCell.dataColumn.columnName):t.templateCell.formula&&(0,P.isFormulaInWhitelist)(t.templateCell.formula)?(s=t.templateCell.formula,c=t.templateCell.formula):(h=this.the(n,r),h={value:t.templateCell.value,recordRowNumbers:[],Wle:[],Qle:{},childrenArray:[],leftParent:n,upParent:r,crossChildren:[],state:"normal",cellNode:t,sortValues:[],valuePath:h+"/"+t.templateCell.value},f.push(h),t.data.groups.push(h)),!(l=o.getTable(s))&&0===f.length)return[];for(this.Ble&&this.Ble.parseSortOptionsToSorts(t.templateCell,l),d=this.Rle&&this.Rle.generateRelationshipMapKeyByCellNode(t),p=f=(v=0)===f.length?this.Qqn(a,t,l,c,d,n,r,i,e,u):f;v<p.length;v++)for(b=(w=p[v]).recordRowNumbers,j=0,m=t.children;j<m.length;j++)(_=m[j]).leftParent&&_.upParent?w.childrenArray.push([]):(g=y=void 0,_.leftParent?y=w:_.upParent&&(g=w),_=this.generateCellNodeTreeData(_,y,g,b,l,d),w.childrenArray.push(_));return this.Ble&&this.Ble.sortGroupsBySortCondition(f,t,this.DJ&&this.DJ.cellNodeGetter),f},e.prototype.clearCache=function(t){this.qle={},t&&(this.Xle=null)},e.prototype.Qqn=function(r,i,t,n,e,u,o,s,c,f){var a,h,l,d,v,p,w,d,b,j,v,m,_,a=[],h=this.Rle&&this.Rle.getRelationshipsMap(),l=i.templateCell.dataSetting;if(e&&h&&h[e]||s)if(d=h&&h[e]&&0===h[e].length,v=!c&&s&&0===s.length,d||v?s=void 0:void 0!==f&&e!==f&&s&&s.length&&(s=this.zle(i,s,t,c,e,f,u||o)),p=(s||h[e]).length,w=this.the(u,o),l&&"Summary"===l.type)a=this.nhe(i,t,n,s,e,u,o,w);else{if(0===p)a.push(d={value:void 0,recordRowNumbers:[],Wle:[],Qle:{},childrenArray:[],leftParent:u,upParent:o,crossChildren:[],state:"new",cellNode:i,sortValues:[],valuePath:w+"/"}),i.data.groups.push(d);else{for(b=0;b<p;b++)j=s?s[b]:b,this.ehe(a,r,i,t,n,j,e,u,o,w);"No"===i.templateCell.expansionDirection&&(m=(v=a[0])&&Array.isArray(v.value))&&(v.Jle=v.Jle.toString(),v.valuePath+=v.value.toString())}l&&"Group"===l.type&&l.bins&&l.bins.length&&(_={},l.bins.forEach(function(t,n){var n,t;_[t.caption]=n,n=t.caption,r[n]||!0!==t.alwaysVisible||(a.push(t={value:n,Jle:n,recordRowNumbers:[],Wle:[],Qle:{},childrenArray:[],leftParent:u,upParent:o,crossChildren:[],state:"new",cellNode:i,sortValues:[],valuePath:w+"/"+n}),i.data.groups.push(t))}),a.sort(function(t,n){var r,i;return _[t.Jle+""]-_[n.Jle+""]}))}return a},e.prototype.ehe=function(c,f,a,t,n,h,r,l,d,v){var p,i,e,u,w,u,r,e,b,o,s,j,m,_,y,g,O,S,C,R,N,p=this,i,e=this.Rle&&this.Rle.getTableNameCacheFromParent(a)||t&&t.name,u=this.Rle&&this.Rle.getRelationshipsMap(),w=u?u[r][h][e.toUpperCase()]:h;if(void 0!==w){if(r=[{value:u=t.getValueByField(n,w),advancedGroupSortName:u}],e=a.templateCell.dataSetting,b=[],a.templateCell.Kle&&a.templateCell.Kle.length)for(o=0,s=a.templateCell.Kle;o<s.length;o++)_=(j=s[o]).column,y=j.formula,(m=void 0,T.isNullOrUndefined)(_)?(0,T.isNullOrUndefined)(y)||(m=t.getValueByField(y,w)):m=t.getValueByField(j.column,w),b.push(m);for(e&&"Group"===e.type&&(e.bins&&e.bins.length||e.formula)&&(r=this.getAdvancedGroupValue(t,w,e),(g=(g=a.templateCell.Hle)||(a.templateCell.Hle=[]))[w]||(g[w]=[]),r.forEach(function(t){g[w].push(t.value+"")})),O=e&&"List"===e.type,S=function(t){var n,r,o,i,e,u,s,n=t.value+"",r=t.advancedGroupSortName+"",o=f[n];o&&!O||(i=!0,"No"===a.templateCell.expansionDirection&&(o=c[0])&&(i=!1,e=o.value,u=o.Jle,Array.isArray(e)||(e=[o.value]),Array.isArray(u)||(u=[o.Jle]),o.Qle[w]||(e.push(t.value),u.push(t.advancedGroupSortName)),o.value=e,o.Jle=u,o.valuePath=v+"/",f[n]=o),i&&(o={value:t.value,Jle:r,recordRowNumbers:[],Wle:[],Qle:{},childrenArray:[],leftParent:l,upParent:d,crossChildren:[],state:"normal",cellNode:a,valuePath:v+"/"+t.value+(O?"/"+w:""),sortValues:b,slices:[]},c.push(o),a.data.groups.push(o),f[n]=o)),a.slices&&(s=o.value,a.slices.forEach(function(t,n){var r,i,e,r,i,u,r=t.groupsCache,i=t.groupMapCache,e=(e=(r=r||(t.groupsCache={}))[s+""])||(r[s+""]=[]),r=(r=(i=i||(t.groupMapCache={}))[s+""])||(i[s+""]={}),i=t.templateCell.dataColumn.tableName,u=t.templateCell.dataColumn.columnName;p.ehe(e,r,t,p.N3.getTable(i),u,w,void 0,void 0,void 0,""),void 0===o.slices[n]&&(o.slices[n]={childrenArray:[e]})})),o.recordRowNumbers.push(h),o.Qle[w]||(o.Wle.push(w),o.Qle[w]=!0)},C=0,R=r;C<R.length;C++)S(N=R[C])}},e.prototype.the=function(t,n){var r,i,t,r="";return t?(i=(0,T.isNullOrUndefined)(t.value)?"":t.value,r=void 0!==t.valuePath?t.valuePath:i.toString()):n&&(t=(0,T.isNullOrUndefined)(n.value)?"":n.value,r=void 0!==n.valuePath?n.valuePath:t.toString()),r},e.prototype.nhe=function(t,n,r,i,e,u,o,s){for(var c,f,a,h,l,d,v,p,w,b,j,m,m,c,c=t.templateCell.dataSetting,f=this.Rle&&this.Rle.getRelationshipsMap(),a=(i||f[e]).length,h=[],l=[],d={},v,p=(this.Rle&&this.Rle.getTableNameCacheFromParent(t)||n&&n.name).toUpperCase(),w=0;w<a;w++)b=i?i[w]:w,j=f?f[e][b][p]:b,h.push(b),d[j]||(l.push(j),d[j]=!0);return m=l.map(function(t){return n.getValueByField(r,t)}),m=(0,P.calc)(m,c&&c.aggregation||"Sum"),m=(0,T.isNullOrUndefined)(m)?0:m,t.data.groups.push(c={value:m,Jle:"",recordRowNumbers:h,Wle:l,Qle:d,childrenArray:[],leftParent:u,upParent:o,crossChildren:[],state:"normal",cellNode:t,valuePath:s+"/"+m,sortValues:[],slices:[]}),[c]},e.prototype.zle=function(t,r,n,i,e,u,o){var s,c,f,a,s,h,u,l,d,t,v,p,v,w,b,j,m,_,y,g,O,S,C,R,N,T,T,E,F,M,I,x,A,s=this.Rle.getRelationshipsMap(),c=s[e],f=s[u],a=i.name,s=t.templateCell.ihe&&t.templateCell.ihe.condition,h=[],u=o.cellNode,l=o.valuePath,d=this.$le[e];if(d=d||(this.$le[e]=[]),t=c&&c[0],v=n.name.toUpperCase(),p=a.toUpperCase(),v=t&&t.hasOwnProperty(v)&&t.hasOwnProperty(p),s){if(v){if((w=this.rhe(e,a=p,r))&&f){for(b=[],j=[],m=[],_=0,y=r;_<y.length;_++)if(!m[O=f[g=y[_]][a]]&&(S=w[O]))for(m[O]=!0,C=0,R=S;C<R.length;C++)j[N=R[C]]||(void 0!==(T=d[N])?T===l&&b.push(N):(void 0===(T=h[N])&&(T=this.ohe(c[N],o),h[N]=T),T&&(b.push(N),j[N]=!0,d[N]=l)));return b}}else if(n===i&&(E=[],c))return F=this.Rle.getTableNameCacheFromParent(u),M=(0,P.toUpperCase)(F||i.name),c.forEach(function(t,n){-1!==r.indexOf(t[M])&&E.push(n)}),E}else if(n===i){if(b=[],f){for(F=this.Rle.getTableNameCacheFromParent(u),I=(0,P.toUpperCase)(F||i.name),x=0,A=r;x<A.length;x++)g=A[x],b.push(f[g][I]);return b}}else if(n!==i)return null;return r},e.prototype.ahe=function(t,n,i){var e,r,e=this,r=function(t){var n,r,r,r;if(void 0!==t.formula)return!0;if(n=t.value.data,r=t.value.type,!(0,T.isNullOrUndefined)(n)){if(void 0===n.tableName){if("string"!=typeof n||!P.cellNameReg.test(n)||"Cell"!==r)return!0;if(!(r=(r=e.DJ.cellNodeGetter(n))&&r.templateCell))return!1;if(r.formula&&"No"!==r.expansionDirection&&(0,P.isFormulaInWhitelist)(r.formula))return t.value.data={tableName:r.formula,columnName:r.formula},!0;if(!r.dataColumn)return t.value.data=r.value,!0;t.value.data=n=r.dataColumn}if(n.tableName===i)return!0}};return n=n.concat(t.rules.filter(r)),t.conditions&&t.conditions.forEach(function(t){n=n.concat(t.rules.filter(r))}),n},e.prototype.uhe=function(t,n,r){for(var i,e,u,o,i="",e=0,u=t;e<u.length;e++)"object"==typeof(o=u[e]).value.data?i+=(0,P.toUpperCase)("".concat(r.name,"__").concat(o.value.data.columnName,"__").concat(o.operator,"__").concat(n.name,"__").concat(o.column)):i+=(0,P.toUpperCase)("".concat(n.name,"__").concat(o.column,"__").concat(o.operator,"__").concat(o.value.data));return i},e.prototype.rhe=function(t,n,r){var i,e,u,o,s,c,f,a,i,e=this.Rle.getRelationshipsMap()[t];if(e){for(u=[],c=s=o=void 0,n=n.toUpperCase(),f=0,a=e.length;f<a;f++)(c=u[s=(o=e[f])[n]])||(u[s]=c=[]),c.push(f);return u}},e.prototype.getAdvancedGroupValue=function(t,n,r){var i,e,u,r,u,o,s,c,f,a,h,a,l,l,a,d,a,h,i=this.N3,e=[],u=r.formula,r=r.bins;if(u)(u=u.trim()).startsWith("=")||(u="="+u),u=t.getValueByField(u,n),e.push({value:u,advancedGroupSortName:u});else if(r)for(o=0,s=r;o<s.length;o++)if(f=(c=s[o]).caption,a=c.groupBy){if(h=void 0,"string"==typeof a){if((a=i.getCalcService().parse(this.Xle,a,0,0)).type===v.ExpressionType.name){if(l=(0,P.fieldExpressionToField)(a.value),e.push({value:t.getValueByField(l,n),advancedGroupSortName:f}),!1!==c.stopIfTrue)break;continue}h=(0,P.exprToConditionTree)(a)}if((d=(d=(l=this.qle)[a=this.she(h,t.name)])||(l[a]=this.che(h,t)))&&d.ruleFunction&&(a=d.ruleFunction(n),h=d.not,a&&!h||!a&&h)&&(e.push({value:f,advancedGroupSortName:f}),!1!==c.stopIfTrue))break}else if(0===e.length&&(e.push({value:c.caption,advancedGroupSortName:c.caption}),!1!==c.stopIfTrue))break;return e},e.prototype.che=function(t,n){for(var r,i,e,t,u,o,s,c,f,a,h,l,d,v,p,p,w,b,r=t.rules,i=t.relation,e=t.conditions,t=t.gbi,u=this.qle,o=[],s=0,c=r;s<c.length;s++)f=c[s],h=(h=u[a=this.fhe(f,n.name)])||(u[a]=this.lhe(f,n)),o.push(h);if(l=[],e&&e.length)for(d=0,v=e;d<v.length;d++)p=v[d],p=this.che(p,n),l.push(p);return w=o.concat(l),{not:t,ruleFunction:b="And"===i||void 0===i?function(t){for(var n,r,i,e,u,e,r=0,i=w.length;r<i&&(u=(e=w[r]).ruleFunction,e=e.not,n=u(t),n=e?!n:n);)r++;return n}:function(t){for(var n,r,i,e,u,e,r=0,i=w.length;!n&&r<i&&(u=(e=w[r]).ruleFunction,e=e.not,n=u(t),!(n=e?!n:n));)r++;return n}}},e.prototype.lhe=function(t,n){var r,i,e,t,u,o,e,r=t.column,i=t.operator,e=t.value,t=t.gbi,u=e.type,o=e.data;if("DataColumn"===u)return{not:t,ruleFunction:function(){return!1}};if("Cell"===u&&"string"==typeof o&&P.cellNameReg.test(o)){if((e=this.DJ.cellNodeGetter&&this.DJ.cellNodeGetter(o))&&e.templateCell.dataColumn&&void 0!==e.templateCell.dataColumn.tableName)return{not:t,ruleFunction:function(){return!1}};o=e&&e.templateCell.value}return{not:t,ruleFunction:function(t){var t=n.getValueByField(r,t);return s.ValueComparatorFactory.createComparator(i)(t,o)}}},e.prototype.she=function(t,n){for(var r,i,t,e,u,o,s,c,f,a,r=t.rules,i=t.relation,t=t.conditions,e=[n],u=0,o=r;u<o.length;u++)s=o[u],e.push(this.fhe(s,n)),e.push(i);if(t)for(c=0,f=t;c<f.length;c++)a=f[c],e.push(this.she(a,n)),e.push(i);return e.join("__")},e.prototype.fhe=function(t,n){return(0,T.combineName)(n,t.column,t.gbi?"NOT":"",t.operator,t.value.type,JSON.stringify(t.value.data))},e.prototype.ohe=function(t,n){var r,i,i,r,e,i,r=n.cellNode,i=r.templateCell.dataColumn,i=this.Rle.getTableNameCacheFromParent(r)||i&&i.tableName;return void 0!==(r=t[i=(i=null==i?r.templateCell.formula||r.templateCell.value+"":i).toUpperCase()])&&!!(e=n.Qle)[r]&&(!(i=n.leftParent||n.upParent)||this.ohe(t,i))},e.prototype.generateParentPaths=function(t,n){var r,i,e,u,i,o,e,s,c,f,a,i,h,l,d,r=[],i=t.templateCell,e=i.dataColumn,u=i.dataSetting,i=i.expansionDirection,o=this.Rle.getTableNameCacheFromParent(t)||e&&e.tableName,e=e&&e.columnName;return null==o&&(e=o=t.templateCell.formula||t.templateCell.value+""),o=o&&o.toUpperCase(),s=n[o],(0,T.isNullOrUndefined)(s)?r=["/"+t.templateCell.value]:(c=void 0,(c=t.templateCell.Hle?t.templateCell.Hle[s]||[]:(f=void 0,[f="No"===i?(i=(a=t.data.groups).filter(function(t){return t.Qle[s]})[0])&&i.value.toString():this.N3.getTable(o).getValueByField(e,s)])).forEach(function(t){r.push("/"+t)}),u&&"List"===u.type&&r.forEach(function(t,n){r[n]+="/".concat(s)})),t.leftParent?(h=this.generateParentPaths(t.leftParent,n),l=[],h.forEach(function(n){r.forEach(function(t){l.push("".concat(n).concat(t))})}),l):t.upParent?(h=this.generateParentPaths(t.upParent,n),d=[],h.forEach(function(n){r.forEach(function(t){d.push("".concat(n).concat(t))})}),d):r},e.prototype.generateParentPath=function(t,n){var r,i,e,u,i,o,e,s,c,f,r="",i=t.templateCell,e=i.dataColumn,u=i.dataSetting,i=i.expansionDirection,o=this.Rle.getTableNameCacheFromParent(t)||e&&e.tableName,e=e&&e.columnName;return null==o&&(e=o=t.templateCell.formula||t.templateCell.value+""),o=o&&o.toUpperCase(),s=n[o],(0,T.isNullOrUndefined)(s)?r="/"+t.templateCell.value:"No"===i?r="/"+(f=(c=t.data.groups).filter(function(t){return t.Qle[s]})[0]).value.toString():(r="/"+this.N3.getTable(o).getValueByField(e,s),u&&"List"===u.type&&(r+="/".concat(s))),t.leftParent?"".concat(this.generateParentPath(t.leftParent,n)).concat(r):t.upParent?"".concat(this.generateParentPath(t.upParent,n)).concat(r):r},n.DataManagerReportGroupHelper=e},"./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-join-helper.js":function(t,n,r){"use strict";var H,T,E,i,u,e;function o(t,n){this.hhe={},this.dhe={},this.N3=t,this.DJ=n,this.Xle=new i.CalcSource(t.getCalcService()),this.vhe={},this.mhe=[],this.ghe={},n&&n.parameter&&(this.ghe=n.parameter)}Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerReportJoinHelper=void 0,H=r("./dist/src/dataManager.entry.js"),T=r("./dist/src/data-manager-report/tree-data-generator/utils/value-comparator-factory.js"),E=r("./dist/src/data-manager-report/tree-data-generator/utils/utils.js"),i=r("CalcEngine"),u=/\[@([^\]]+\.[^\]]+)\]/i,o.prototype.generateJoinRelationIndexMap=function(t){var t,t,t,t=this.phe(t),t=this.bhe(t),t=this.yhe(t);this.whe(t)},o.prototype.clearCache=function(t){this.vhe={},t&&(this.Xle=null,this.hhe={},this.dhe={})},o.prototype.setNodeTableCache=function(t,n,r){void 0===this.mhe[t]&&(this.mhe[t]=[]),this.mhe[t][n]=r},o.prototype.Mhe=function(t,n){return this.mhe[t]&&this.mhe[t][n]},o.prototype.getTableNameCacheFromParent=function(t){var n,r,i,e,n=t.relationshipMapKey,r=this.Mhe(t.templateCell.row,t.templateCell.col);if(r)return r;for(i=t.leftParent&&t.upParent,e=t.leftParent||t.upParent;!i&&e&&e.relationshipMapKey===n;){if(r=this.Mhe(e.templateCell.row,e.templateCell.col))return r;i=t.leftParent&&t.upParent,e=e.leftParent||e.upParent}},o.prototype.getRelationshipsMap=function(){return this.hhe},o.prototype.generateRelationshipMapKeyByCellNode=function(t){var n,r,i,e,u,o,n,s,c,f,a,r,h,l,h;return t.relationshipMapKey||(i="",e=t.leftParent||t.upParent,(u=t.leftParent&&t.upParent)?(o=t.templateCell.dataColumn?(0,E.toUpperCase)(t.templateCell.dataColumn.tableName):(0,E.toUpperCase)(t.templateCell.formula||t.templateCell.value+""),s=void 0,(n=(null==(n=t.templateCell.filter)?void 0:n.condition)||t.templateCell.ihe)&&(this.Che(t),c=t.templateCell.ihe.condition,s=this.She(c),o=this.The(s,o,t)),f=this.Ahe(t.leftParent),a=this.Ahe(t.upParent),f||a?f&&a?(r=this.generateRelationshipMapKeyByCellNode(t.leftParent),h=this.generateRelationshipMapKeyByCellNode(t.upParent),i="".concat(r,"__CROSS__").concat(o,"__CROSS__").concat(h)):f?(l=this.generateRelationshipMapKeyByCellNode(t.leftParent),i=n?this.The(s,l,t):l):a&&(l=this.generateRelationshipMapKeyByCellNode(t.upParent),i=n?this.The(s,l,t):l):i=o,this.dhe[i]=!0):((null!=(r=t.templateCell.filter)&&r.condition||t.templateCell.ihe)&&(this.Che(t),e&&!(i=e.relationshipMapKey)&&(e.relationshipMapKey=i=this.generateRelationshipMapKeyByCellNode(e)),c=t.templateCell.ihe.condition,h=this.She(c),i=i||t.templateCell.dataColumn.tableName,i=this.The(h,i,t)),i||(this.Ahe(e)?(i=e.relationshipMapKey)||(e.relationshipMapKey=i=this.generateRelationshipMapKeyByCellNode(e)):i=t.templateCell.dataColumn?(0,E.toUpperCase)(t.templateCell.dataColumn.tableName):(0,E.toUpperCase)(t.templateCell.formula||t.templateCell.value+""))),t.relationshipMapKey=i)},o.prototype.The=function(t,n,r){var i,e,u,t,i=this,e=t.rules,u=t.relation,t=t.conditions;return e.forEach(function(t){n=(0,H.isNullOrUndefined)(t.formula)?"Cell"===t.value.type||"DataColumn"===t.value.type?"object"==typeof t.value.data&&t.value.data.tableName?(0,E.toUpperCase)(n+"__"+u+"__"+(0,H.combineName)(r.templateCell.dataColumn.tableName,t.column,t.operator,t.value.data.tableName,t.value.data.columnName)):"object"==typeof t.value.data&&t.value.data.formulaResult?(0,E.toUpperCase)(n+"__"+u+"__"+(0,H.combineName)(r.templateCell.dataColumn.tableName,t.column,t.operator,t.value.data.formulaResult)):(0,E.toUpperCase)(n+"__"+u+"__"+(0,H.combineName)(r.templateCell.dataColumn.tableName,t.column,t.operator,t.value.data)):(0,E.toUpperCase)(n+"__"+u+"__"+(0,H.combineName)(r.templateCell.dataColumn.tableName,t.column,t.operator,t.value.data)):(0,E.toUpperCase)(n+"__"+u+"__"+t.formula)}),t&&t.forEach(function(t){n=i.The(t,n,r)}),n},o.prototype.phe=function(t){var n=[];return(0,E.traverse)(t,n),n},o.prototype.bhe=function(t){var e,n,e=this,n=[];return t.forEach(function(t){var i=[];t.forEach(function(t){var n,r,n=t.templateCell;e.Che(t),n.ihe&&n.ihe.condition&&(r=e.She(n.ihe.condition)),i.push({reportDataTableRelation:r,currentNode:t})}),n.push(i)}),n},o.prototype.parseFilterOptionToFilterConditionTree=function(t){var n,r,i,e,u,n="And",r=[],i=[];if((0,E.hasOrCondition)(t))if(n="Or",e=t.or,(0,E.hasAndCondition)(t))(0,E.hasAndCondition)(e)||(0,E.hasOrCondition)(e)?i.push(this.parseFilterOptionToFilterConditionTree(e)):r.push(this.Ihe(e)),t.or=void 0,i.push(this.parseFilterOptionToFilterConditionTree(t));else if(r.push(this.Ihe(t)),(0,E.hasAndCondition)(e))i.push(this.parseFilterOptionToFilterConditionTree(e));else if((0,E.hasOrCondition)(e)){for(;e&&!(0,E.hasAndCondition)(e);)r.push(this.Ihe(e)),e=e.or;e&&(0,E.hasAndCondition)(e)&&i.push(this.parseFilterOptionToFilterConditionTree(e))}else r.push(this.Ihe(e));else if((0,E.hasAndCondition)(t))if(u=t.and,r.push(this.Ihe(t)),(0,E.hasOrCondition)(u))i.push(this.parseFilterOptionToFilterConditionTree(u));else if((0,E.hasAndCondition)(u)){for(;u&&!(0,E.hasOrCondition)(u);)r.push(this.Ihe(u)),u=u.and;u&&(0,E.hasOrCondition)(u)&&i.push(this.parseFilterOptionToFilterConditionTree(u))}else r.push(this.Ihe(u));else r.push(this.Ihe(t));return{rules:r,conditions:i,relation:n}},o.prototype.Ihe=function(t){var n,r,r;return t.operator||void 0===t.formula?((0,H.isNullOrUndefined)(t.value)||(r=t.value,n={type:(0,E.getValueType)(r),data:r}),(0,H.isNullOrUndefined)(t.cell)||(n={type:"Cell",data:r=t.cell}),(0,H.isNullOrUndefined)(t.dataColumn)||(n={type:"DataColumn",data:r=t.dataColumn}),(0,H.isNullOrUndefined)(t.parameter)||(n={type:"Parameter",data:r=t.parameter}),{column:t.column,operator:t.operator,value:n}):{formula:r=void 0===(r=t.formula)||(r=r.trim()).startsWith("=")?r:"="+r}},o.prototype.She=function(t){var n,r,i,e,u,n=this.xhe(t.rules),r=[];if(t.conditions)for(i=0,e=t.conditions;i<e.length;i++)u=e[i],r.push(this.She(u));return{rules:n,conditions:r,relation:t.relation}},o.prototype.xhe=function(t){var e,u,o,e=this,u=[],o=this.N3;return t.forEach(function(t){var n,r,n,n,i,i;if((0,H.isNullOrUndefined)(t.formula)){if("Cell"===(r={column:t.column,operator:t.operator,value:{type:t.value.type,data:t.value.data}}).value.type&&"string"==typeof r.value.data&&E.cellNameReg.test(r.value.data)&&e.DJ.cellNodeGetter){if(!(n=(n=e.DJ.cellNodeGetter(r.value.data))&&n.templateCell))return!1;n.formula&&"No"!==n.expansionDirection&&(0,E.isFormulaInWhitelist)(n.formula)?(i=(0,E.getFormulaResult)(o.getCalcService(),e.Xle,n.formula),r.value.data={formulaResult:i,formulaString:n.formula}):n.dataColumn?r.value.data=n.dataColumn:r.value.data=n.value}"Parameter"===r.value.type&&"string"==typeof r.value.data&&e.DJ.parameter&&(i=e.ghe[r.value.data],r.value.type=(0,E.getValueType)(i),r.value.data=i),u.push(r)}else(n=t.formula.trim()).startsWith("=")||(n="="+n),u.push({formula:n})}),u},o.prototype.yhe=function(t){var e,n,e=this,n=[];return t.forEach(function(t){var i=[];t.forEach(function(t){var n,r,n,n=t.reportDataTableRelation;n&&(r=e.Nhe(n,t.currentNode)),n={currentNode:t.currentNode,relations:r},i.push(n)}),n.push(i)}),n},o.prototype.Nhe=function(t,n){var r,i,e,u,o,r=n.templateCell.dataColumn,i=[];if(t.conditions)for(e=0,u=t.conditions;e<u.length;e++)o=u[e],i.push(this.Nhe(o,n));return{rules:this.khe(t.rules,r),relation:t.relation,conditions:i}},o.prototype.khe=function(t,i){var e=[];return t.forEach(function(t){var n,t,t,r,t,n=t.formula;t.column&&-1!==t.column.indexOf("[@")&&!t.column.startsWith("=")&&(t.column="="+t.column),(0,H.isNullOrUndefined)(n)?"Cell"!==t.value.type&&"DataColumn"!==t.value.type||"object"!=typeof t.value.data||(0,H.isNullOrUndefined)(t.value.data)?e.push({type:"Static",field:t.column,operator:t.operator,value:t.value.data}):t.value.data.tableName?e.push({type:"Join",relationHostTable:i.tableName,relationHostColumn:t.column,relationTargetTable:t.value.data.tableName,relationTargetColumn:t.value.data.columnName,relationCondition:t.operator}):t.value.data.formulaString&&e.push({type:"Join",relationHostTable:i.tableName,relationHostColumn:t.column,relationTargetTable:t.value.data.formulaString,relationTargetColumn:t.value.data.formulaString,relationCondition:t.operator}):(t=(n=n.startsWith("=")?n:"="+n).match(u))?(r=(t=t[1].split("."))[0],t=t[1],e.push({type:"Join",formula:n,relationHostTable:i.tableName,relationTargetTable:r,relationTargetColumn:t})):e.push({type:"Static",formula:n})}),e},o.prototype.whe=function(t){var e,u,e=this,u=this.N3;t.forEach(function(t){t.forEach(function(t){var n,r,i,i,n=t.currentNode;t.relations&&(t.relations.rules.length||t.relations.conditions.length)?(r=e.generateRelationshipMapKeyByCellNode(n),i=e.dhe[r],e.hhe[r]&&0!==e.hhe[r].length&&!i||(e.hhe[r]=e.Dhe(t.relations,n))):(i=(0,E.getTableByCellNode)(u,n))&&e._he(i,n)})})},o.prototype.Dhe=function(t,n){var r,i,t,e,u,o,s,c,f,a,h,l,d,v,p,a,l,h,w,b,b,w,j,m,_,y,g,O,r=t.rules,i=t.relation,t=t.conditions;if(n.leftParent&&n.upParent&&"H"===this.currentTreeDirection)return[];for(e=this.N3,u=[],o=[],s=0,c=r;s<c.length;s++)"Join"===(f=c[s]).type?(a=f.relationHostTable,h=f.relationHostColumn,l=f.relationTargetTable,d=f.relationTargetColumn,v=f.relationCondition,p=f.formula,a=e.getTable(a),l=e.getTable(l),a&&l&&(h=this.jhe(a,h,p||v,l,d),u.push({sourceTable:a,targetTable:l,sourceFieldIndexMap:h.sourceFieldIndexMap,targetFieldIndexMap:h.targetFieldIndexMap}))):o.push(f);if(w=(0,E.getTableByCellNode)(e,n),b="H"===this.currentTreeDirection?n.upParent:n.leftParent,b=this.hhe[b&&b.relationshipMapKey]||this._he(w,n,!0),w=u.length?("And"!==i&&void 0!==i||(u=this.Ehe(u)),this.Ohe(u,n,i,r.filter(function(t){return"Join"===t.type}))):b,m=[w=o.length?this.Rhe(w,o,n,i,!!u.length,b):w],t&&t.length)for(_=void 0,y=0,g=t;y<g.length;y++)O=g[y],_=this.Dhe(O,n),m.push(_);return"And"===i||void 0===i?j=this.Lhe(m,n):"Or"===i&&(j=this.Bhe(m,n)),j},o.prototype.Rhe=function(r,t,n,l,d,v){var i,e,p,w,b,j,u,o,s,c,f,a,h,m,_,y,g,O,i=n.templateCell.dataColumn.tableName.toUpperCase(),e=this.N3;if(r=[].concat(r),p=e.getTable(i),w=this.getTableNameCacheFromParent(n)||i,b=[],j=[],t.forEach(function(t){var i,n,e,t,u,o,s,c,f,n,a,h,i=t.field,n=t.operator,e=t.value,t=t.formula,o=!1,f=!1;(0,H.isNullOrUndefined)(t)?"object"!=typeof e?u=T.ValueComparatorFactory.createComparator(n):e instanceof Date&&(u=T.ValueComparatorFactory.createDateComparator(n),e=new Date(e),s=e.setHours(0,0,0,0),c=e.setHours(23,59,59,59),e=e.getTime(),o=!0):(i=t,f=!0),void 0!==i&&!p.hasField(i)&&-1<i.indexOf("@")&&!i.startsWith("=")&&(i="="+i),(u||f)&&(n=void 0,"And"===l||void 0===l?n=b[b.length-1]||r:"Or"===l&&(n=(n=j[j.length-1])||(d?v:r)),a=[],h=[],n.forEach(function(t){var n,r,r,n=!1,r=t&&t[w];null!=r&&(r=p.getValueByField(i,r),n=f?r:o?(r=new Date(r).getTime(),u(r,e,s,c)):u(r,e)),(n?a:h).push(t)}),b.push(a),j.push(h))}),"And"===l||void 0===l)return b[b.length-1];if("Or"===l){for(u=[],o=0,s=b;o<s.length;o++)c=s[o],u=u.concat(c);if(d){for(f={},a=0,h=r;a<h.length;a++)_=(m=h[a])[i],(0,H.isNullOrUndefined)(_)||(f[_]=!0);for(y=0,g=u;y<g.length;y++)_=(O=g[y])[i],(0,H.isNullOrUndefined)(_)||f[_]||r.push(O);return r}return u}},o.prototype.Ehe=function(t){for(var n,r,i,e,u,o,s,n=[],r=[],i=[];t.length;){for(u=[e=t[0]],i=[0],o=1,s=t.length;o<s;o++)e.targetTable===t[o].targetTable&&(u.push(t[o]),i.push(o));for(n.push(e),1<u.length&&r.push(u),o=i.length-1;-1<o;o--)t.splice(i[o],1)}return this.Fhe(r),n},o.prototype.Fhe=function(t){for(var n,r,i,e,u,o,s,c,f,n=0,r=t;n<r.length;n++){for(u=(e=(i=r[n])[0]).sourceFieldIndexMap,o=e.targetFieldIndexMap,s=1,c=i.length;s<c;s++){for(f in u)u.hasOwnProperty(f)&&(u[f]=(0,E.getArraySameItems)(u[f],i[s].sourceFieldIndexMap[f]));for(f in o)o.hasOwnProperty(f)&&(o[f]=(0,E.getArraySameItems)(o[f],i[s].targetFieldIndexMap[f]))}e.sourceFieldIndexMap=u,e.targetFieldIndexMap=o}},o.prototype.jhe=function(r,t,i,e,u){var n,o,n,s,c,f,a,h,l,d,o,o,v,p,w,b,j,m,_,y,g,O,S,C,R,o,n=(0,H.isNullOrUndefined)(t)?t:r.getFieldByNameIgnoreCase(t),o=(0,H.isNullOrUndefined)(u)?u:e.getFieldByNameIgnoreCase(u);if(n&&(t=n.fieldName),o&&(u=o.fieldName),n=(0,E.toUpperCase)("".concat(r.name,"__").concat(t,"__").concat(i,"__").concat(e.name,"__").concat(u)),this.vhe[n])return this.vhe[n];function N(t,n,r){t[n]?t[n].push(r):t[n]=[r]}if(s=[],c=[],f=[],a=r.getData(),h=e.getData(),l=a.length,d=h.length,i.startsWith("=")){for(o="".concat(e.name,".").concat(u),o="\\[@".concat(o,"\\]"),v=new RegExp(o,"i"),p=function(t,n){var t=i.replace(v,'"'.concat(t,'"'));return r.getValueByField(t,n)},w=e.hasField(u),b=0;b<d;b++)j=w?h[b][u]:e.getValueByField(u,b),(0,H.isNullOrUndefined)(j)||N(f,j,b);for(m=Object.keys(f),_=function(n){var r=[];m.forEach(function(t){p(t,n)&&f[t].forEach(function(t){return r.push(t)})}),(s[n]=r).forEach(function(t){N(c,t,n)})},y=0;y<l;y++)_(y)}else{for(g=T.ValueComparatorFactory.createComparator(i),O=r.hasField(t),S=e.hasField(u),O||t.startsWith("=")||(t="="+t),S||u.startsWith("=")||(u="="+u),y=0;y<l;y++)j=O?a[y][t]:r.getValueByField(t,y),(0,H.isNullOrUndefined)(j)||N(f,j,y);for(C=Object.keys(f),_=void 0,_="Equal"===i?function(n){var t,r,t,t=S?h[n][u]:e.getValueByField(u,n);(0,H.isNullOrUndefined)(t)||(r=[],(t=f[t])&&t.forEach(function(t){return r.push(t)}),(c[n]=r).forEach(function(t){N(s,t,n)}))}:function(n){var r,i,r=S?h[n][u]:e.getValueByField(u,n);(0,H.isNullOrUndefined)(r)||(i=[],C.forEach(function(t){g(t,r)&&f[t].forEach(function(t){return i.push(t)})}),(c[n]=i).forEach(function(t){N(s,t,n)}))},R=0;R<d;R++)_(R)}return o={sourceTable:r,targetTable:e,sourceFieldIndexMap:s,targetFieldIndexMap:c},this.vhe[n]=o},o.prototype.Ohe=function(t,P,D,n){var L,k,V,r,G,i,e,u,u,o,s,c,f,i,q,B,a,h,l,d,v,p,w,f,u,b,j,m,L=this,k=[],V=P.upParent&&P.leftParent,r=P.upParent||P.leftParent,G="";for(r&&(G=this.generateRelationshipMapKeyByCellNode(r),V)&&(e=P.upParent,u=P.leftParent,u=this.generateRelationshipMapKeyByCellNode(u),o=this.generateRelationshipMapKeyByCellNode(e),s=this.hhe[u],c=this.hhe[o],s&&c&&s[0]&&c[0]?(f=Object.keys(s[0]).length,i=Object.keys(c[0]).length,i=(G=i<f?o:u)===o?s:c):c&&e[0]||(r=P.leftParent,G=this.generateRelationshipMapKeyByCellNode(r))),q=[],B=[],a=function(t,n){var r,i,e,u,o,s,c,i,u,f,a,h,l,d,v,p,w,b,j,m,_,y,g,O,S,C,R,N,T,E,F,M,I,x,A,i=t.sourceTable,e=t.sourceFieldIndexMap,u=t.targetTable,o=t.targetFieldIndexMap,s=i.name.toUpperCase(),c=u.name.toUpperCase();if(k=B[B.length-1]||k,e&&o){if(i=L.hhe[G],G&&i||B.length){if(f=c,a=o,h=s,(k=(u=k).length&&"And"===D?k:i)[0]&&void 0===k[0][f]&&(a=e,h=c,void 0===k[0][f=s]))return k=u,n||q.push(t),!1;for(d=[],v=0,p=(l=[].concat(k)).length;v<p;v++)d[w=l[v][f]]||(d[w]=[]),d[w].push(v);for(b=[],j=P.templateCell.row,m=P.templateCell.col,h=h.toUpperCase(),_=(0,H.combineName)(h,j,m),y=a.length,g=0;g<y;g++)if(void 0!==(O=a[g])&&void 0!==(S=d[g]))for(N=R=C=0,T=O.length;N<T;N++)for(C=O[N],E=0,F=S.length;E<F;E++)R=S[E],void 0===(M=Object.assign({},l[R]))[h]?M[h]=C:(M[_]=C,L.setNodeTableCache(j,m,_)),b.push(M);k=b}else{if(G&&!i&&V)return!0;for(g in k=[],o)if(o.hasOwnProperty(g))for(I=0,x=o[g];I<x.length;I++)A=x[I],k.push(((r={})[c]=+g,r[s]=A,r))}B.push(k)}},h=0,l=t;h<l.length&&!a(d=l[h]);h++);for(v=0,p=q;v<p.length&&!a(w=p[v],!0);v++);return"And"===D||void 0===D?k=this.Phe(B[B.length-1],n,P,"And"):"Or"===D&&(k=this.Phe(this.Bhe(B,P),n,P,"Or")),V&&i&&i.length&&k[0]&&i[0]&&(f=Object.keys(k[0]),u=Object.keys(i[0]),b=(0,E.getArraySameItems)(f,u),j=[],k.forEach(function(n,t){for(var r,i,e,u,o,r=b.map(function(t){return n[t]}),i=j,e=0,u=r;e<u.length;e++)i[o=u[e]]||(i[o]=[]),i=i[o];i.push(t),b.forEach(function(t){delete n[t]})}),m=[],i.forEach(function(e){for(var t,n,r,i,u,t=b.map(function(t){return e[t]}),n=j,r=0,i=t;r<i.length;r++)u=i[r],n=n&&n[u];n&&n.forEach(function(t){var n,r,i,n=k[t],r=Object.assign({},e);for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);m.push(r)})}),k=m,"And"===D||void 0===D?k=this.Phe(m,n,P,"And"):"Or"===D&&(k=this.Phe(m,n,P,"Or"))),k},o.prototype.Phe=function(t,n,r,i){var a,e,h,u,a=this;return t&&(h=this.getTableNameCacheFromParent(r)||(null==(e=r.templateCell.dataColumn)?void 0:e.tableName)||r.templateCell.formula,u=n.map(function(t){var n,r,i,e,u,t,o,s,c,f,n=t.relationHostColumn,r=t.relationTargetColumn,i=t.relationCondition,e=t.relationHostTable,u=t.relationTargetTable,t=t.formula;return(0,H.isNullOrUndefined)(t)?(o=T.ValueComparatorFactory.createComparator(i),e=e.toUpperCase(),u=u.toUpperCase(),s=a.N3.getTable(e),c=a.N3.getTable(u),f=(h||e).toUpperCase(),function(t){return o(s.getValueByField(n,t[f]),c.getValueByField(r,t[u]))}):null}),"And"===i?t=t.filter(function(t){for(var n,r,i,n=0,r=u;n<r.length;n++)if((i=r[n])&&!i(t))return!1;return!0}):"Or"===i&&(t=t.filter(function(t){for(var n,r,i,n=0,r=u;n<r.length;n++)if(!(i=r[n])||i(t))return!0;return!1}))),t},o.prototype.Lhe=function(t,n){var r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j;if(t.some(function(t){return t&&0===t.length}))return[];if(t.length<=1)return t[0]||[];for(t.sort(function(t,n){return Object.keys(n[0]).length-Object.keys(t[0]).length}),r=t[0],i=n.templateCell.dataColumn.tableName.toUpperCase(),e={},t[0].forEach(function(t){(0,H.isNullOrUndefined)(t[i])||(e[t[i]]=!0)}),u=1,o=t.length;u<o;u++)for(c in s=t[u],e)if(e.hasOwnProperty(c)&&e[c]){for(f=!0,a=+c,h=0,l=s;h<l.length;h++)if((d=l[h])[i]===a){f=!1;break}f&&(e[c]=!1)}for(v=[],p=new RegExp("^".concat(i,"(__\\d+__\\d+)?$")),w=function(n){var t=Object.keys(n),r=!0;t.forEach(function(t){var t;p.test(t)&&(t=n[t],r=r&&!(0,H.isNullOrUndefined)(t)&&e[t])}),r&&v.push(n)},b=0,j=r;b<j.length;b++)w(d=j[b]);return v},o.prototype.Bhe=function(t,n){var r,i,e,u,o,s,c,f,a,h;if((t=t.filter(function(t){return t.length})).length<=1)return t[0]||[];for(r=n.templateCell.dataColumn.tableName.toUpperCase(),t.sort(function(t,n){return Object.keys(n[0]).length-Object.keys(t[0]).length}),i=t[0],e={},u=0,o=i;u<o.length;u++)c=(s=o[u])[r],(0,H.isNullOrUndefined)(c)||(e[c]=!0);for(f=1,a=t.length;f<a;f++)(h=t[f]).forEach(function(t){var n=t[r];(0,H.isNullOrUndefined)(n)||e[n]||(e[n]=!0,i.push(t))});return i},o.prototype._he=function(t,n,r){var i,e,u,o,s,c,i=this.generateRelationshipMapKeyByCellNode(n);if(n.leftParent&&n.upParent&&"H"===this.currentTreeDirection)return[];if(!this.hhe[i]||r){for(e=[],u=t.name.toUpperCase(),o=0,s=t.length();o<s;o++)(c={})[u]=o,e.push(c);this.hhe[i]=e}return this.hhe[i]},o.prototype.Ahe=function(t){if(t){if(this.Che(t),t.templateCell.ihe)return!0;if(t.leftParent)return this.Ahe(t.leftParent);if(t.upParent)return this.Ahe(t.upParent)}return!1},o.prototype.Che=function(t){var n,r,t,n,r,n,r,i,r,i,n=this.N3,r=(0,E.getTableByCellNode)(n,t),t=t.templateCell,n=n.getRelationshipsBySourceTable(r),r=this.Ghe(n),n=r.conditionRootNode,r=r.conditionLeafNode,i=t.filter&&t.filter.condition;t.ihe||!i&&!n||(n?i&&(r.and=i):n=i,r=(0,E.deepCloneFilterCondition)(n),i=this.parseFilterOptionToFilterConditionTree(r),t.ihe={condition:i})},o.prototype.Ghe=function(t){var n,r;return t.forEach(function(t){var t={column:t.sourceFieldName,operator:"Equal",dataColumn:{tableName:t.targetTable.name,columnName:t.targetFieldName}};r=n?r.and=t:n=t}),{conditionRootNode:n,conditionLeafNode:r}},n.DataManagerReportJoinHelper=o},"./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-sort-helper.js":function(t,n,r){"use strict";var i,l,d,c,e;function u(t){this.N3=t,this.Xle=new i.CalcSource(t.getCalcService())}Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerReportSortHelper=void 0,i=r("CalcEngine"),l=r("./dist/src/dataManager.entry.js"),d=r("./dist/src/data-manager-report/tree-data-generator/utils/utils.js"),c=void 0,u.prototype.sortGroupsBySortCondition=function(f,a,h){var n,s,r,t,i,n=a.templateCell.Kle,s=[];if(n){for(n.forEach(function(t,n){var r,i,e,u,o,s,c;if(!(0,l.isNullOrUndefined)(t.cell)&&d.cellNameReg.test(t.cell)&&(i=h(t.cell)))if(-1!==(e=a.children.indexOf(i))||i===a)for(u=0,o=f;u<o.length;u++)(c=(c=(s=o[u]).sortValues)||(s.sortValues=[]))[n]=-1!==e?null==(r=s.childrenArray[e][0])?void 0:r.value:s.value;else t.order=void 0}),t=function(u){var i,t,o,i=n[u];i&&i.order&&(i.list&&i.list.length?(t=i.list,o={},t.forEach(function(t,n){return o[t]=n}),r=function(t,n){var e,r,t,e=!1,r,t=function(t,n){var r,i,t,n,r=t.sortValues[u],i=n.sortValues[u];return s[u+1]&&r===i?(e=!0,s[u+1](t,n)):(t=o[r+""],n=o[i+""],t!==c&&n!==c?t-n:t===c&&(n!==c||i<r)?1:-1)}(t,n);return!e&&"desc"===i.order?-t:t},s[u]=r):(0,l.isNullOrUndefined)(i.cell)&&(0,l.isNullOrUndefined)(i.column)&&(0,l.isNullOrUndefined)(i.formula)||(r=function(t,n){var e,r,t,e=!1,r,t=function(t,n){var r=t.sortValues[u],i=n.sortValues[u];return s[u+1]&&r===i?(e=!0,s[u+1](t,n)):null==r||null!=i&&r<i?-1:1}(t,n);return!e&&"desc"===i.order?-t:t},s[u]=r))},i=n.length-1;-1<i;i--)t(i);r&&f.sort(r)}},u.prototype.parseSortOptionsToSorts=function(t,n){t.sorts&&t.sorts.length&&!t.Kle&&(t.Kle=t.sorts.map(function(t){var n,r,n,t,n=(0,l.isNullOrUndefined)(t.desc),r=n?t.asc:t.desc,n={order:n?"asc":"desc",list:t.list};return(r=(r=(0,l.isNullOrUndefined)(r)?"":r).trim()).startsWith("=")?(t=r.substring(1),d.cellNameReg.test(t)?n.cell=t:n.formula=r):n.column=r,n}))},n.DataManagerReportSortHelper=u},"./dist/src/data-manager-report/tree-data-generator/index.js":function(t,n,r){"use strict";var i,e,u,o,s,c;function f(t,n){var r=this;this.generateTreeDataInternal=function(t){var t,n,t=t.root;try{r.Rle.generateJoinRelationIndexMap(t),n=r.Lle.generateCellNodeTreeData(t)}catch(t){n=[]}finally{t.data.groups=n}},this.Uhe=new s.DataManagerProxy(t),this.DJ=n,this.Rle=new e.DataManagerReportJoinHelper(this.Uhe,n),this.Ble=new u.DataManagerReportSortHelper(this.Uhe),this.Lle=new o.DataManagerReportGroupHelper(this.Uhe,n,this.Rle,this.Ble),this.Hhe=new i.DataManagerReportCrossHelper(this.Uhe,n,this.Rle,this.Lle,this.Ble)}Object.defineProperty(n,"__esModule",{value:!0}),n.TreeDataGenerator=void 0,i=r("./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-cross-helper.js"),e=r("./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-join-helper.js"),u=r("./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-sort-helper.js"),o=r("./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-group-helper.js"),s=r("./dist/src/data-manager-report/data-manager-proxy/data-manager-proxy.js"),f.prototype.generateTreeData=function(){var t,n,r,t,t,t=this.DJ,n=t.crossCells,r=t.verticalExpansionTrees,t=t.horizontalExpansionTrees;this.zhe(),this.Rle.currentTreeDirection="H",t.forEach(this.generateTreeDataInternal),this.Rle.currentTreeDirection="V",r.forEach(this.generateTreeDataInternal),(t=n.filter(function(t){return!n.includes(t.leftParent)&&!n.includes(t.upParent)}))&&t.length&&this.Hhe&&this.Hhe.processCrossCells(t),this.Uhe.N3.hhe=this.Rle.hhe,this.Rle.clearCache(!0),this.Lle.clearCache(!0)},f.prototype.zhe=function(){var t,n;this.Uhe.getRelationshipsBySourceTable().forEach(function(t){delete t.Dle}),this.Rle.clearCache(),this.Lle.clearCache()},n.TreeDataGenerator=f},"./dist/src/data-manager-report/tree-data-generator/interfaces/data-manager-report.interface.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},"./dist/src/data-manager-report/tree-data-generator/utils/utils.js":function(t,n,r){"use strict";var e,o,i,s,c,u;function f(t,n,r){var i=e(e([],r=void 0===r?[]:r,!0),[t],!1);0<t.children.length?t.children.forEach(function(t){f(t,n,i)}):n.push(i)}function a(t,n){switch(n){case"Avg":return t.reduce(function(t,n){return+t+ +n},0)/t.length;case"Count":return t.length;case"Max":return Math.max.apply(Math,t);case"Min":return Math.min.apply(Math,t);case"None":return 0;case"Sum":return t.reduce(function(t,n){return+t+ +n},0);default:return 0}}function h(t,n){return t&&t.length&&n&&n.length?t.filter(function(t){return-1<n.indexOf(t)}):[]}function l(t,n){var r;return t&&0!==t.length?n&&0!==n.length?(r=[].concat(t),n.forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),r):t:n||[]}function d(t){return t.toUpperCase()}function v(t){return!(!(t=t.slice(t.indexOf("=")+1,t.length).trim()).startsWith("{")||!t.endsWith("}"))}function p(t,n,r){var n,t,i,r,e,u,o,s,c,f,t=t.parse(n,r,0,0),i=[],r=null==(n=null==t?void 0:t.value)?void 0:n.array;if(r)for(e=0,u=r;e<u.length;e++)for(s=0,c=o=u[e];s<c.length;s++)f=c[s],i.push(f);return i}function w(t,n){var r=n.nM;return r||(n.templateCell.dataColumn?r=t.getTable(n.templateCell.dataColumn.tableName):n.templateCell.formula&&v(n.templateCell.formula)&&(r=t.getTable(n.templateCell.formula)),n.nM=r),r}function b(t,n){var r,i,e,u,r={rules:[],relation:"And",conditions:[],gbi:n};if(t.type===o.ExpressionType.function){if(s.includes(t.functionName))for(r.relation=m(t.functionName),i=0,e=t.arguments;i<e.length;i++)u=e[i],s.includes(u.functionName)?r.conditions.push(b(u)):"NOT"===u.functionName?r.rules.push(j(u.arguments[0],!0)):r.rules.push(j(u));if(c.includes(t.functionName)&&r.rules.push(j(t)),"NOT"===t.functionName)return b(t.arguments[0],!0)}return t.type===o.ExpressionType.parentheses&&r.rules.push(j(t.value)),r}function j(t,n){var r,i,e,u;return t.type===o.ExpressionType.operator?(r=t.value,i=t.value2,u=(e=r.type===o.ExpressionType.name?r:i)===r?i:r,{column:O(e.value),operator:_(t.operatorType),value:{type:y(u.type),data:g(u)},gbi:n}):t.type===o.ExpressionType.function&&c.includes(t.functionName)&&t.arguments?(r=t.arguments[0],i=t.arguments[1],u=(e=r.type===o.ExpressionType.name?r:i)===r?i:r,{column:O(e.value),operator:m(t.functionName),value:{type:y(u.type),data:g(u)},gbi:n}):void 0}function m(t){switch(t){case"STARTWITH":return"StartWith";case"ENDWITH":return"EndWith";case"AND":return"And";case"OR":return"Or";case"SEARCH":case"FIND":return"Contains"}}function _(t){switch(t){case 9:return"Equal";case 10:return"NotEqual";case 11:return"LessThan";case 12:return"LessThanOrEqual";case 13:return"GreaterThan";case 14:return"GreaterThanOrEqual"}}function y(t){switch(t){case o.ExpressionType.reference:return"Cell";case o.ExpressionType.number:return"Number";case o.ExpressionType.string:return"String";case o.ExpressionType.boolean:return"Boolean";case o.ExpressionType.name:return"DataColumn"}}function g(t){switch(t.type){case o.ExpressionType.reference:var n,r;return N(t.row,t.column);case o.ExpressionType.number:case o.ExpressionType.string:case o.ExpressionType.boolean:return t.value}}function O(t){var t=t.match(u);return t&&t[1]}function S(t){return t&&!(0,i.isNullOrUndefined)(t.and)}function C(t){return t&&!(0,i.isNullOrUndefined)(t.or)}function R(t){var n;switch(typeof t){case"string":return"String";case"boolean":return"Boolean";case"number":return"Number"}if(isNaN(t)&&!isNaN(Date.parse(t)))return"Date"}function N(t,n){for(var r,i,e,r="",i="A".charCodeAt(0),e=n+1;0<e;e=parseInt((e-1)/26+"",10))r=String.fromCharCode(i+(e-1)%26)+r;return r+(t+1)}function T(t){var n,r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]="and"===r||"or"===r?T(t[r]):t[r]);return n}e=this&&this.__spreadArray||function(t,n,r){if(r||2===arguments.length)for(var i=0,e=n.length,u;i<e;i++)!u&&i in n||((u=u||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(n,"__esModule",{value:!0}),n.deepCloneFilterCondition=n.rowColToCellName=n.getValueType=n.hasOrCondition=n.hasAndCondition=n.fieldExpressionToField=n.valueExpressionToData=n.expressionTypeToDataType=n.operatorTypeToOperator=n.functionNameToOperatorName=n.exprToGroupConditionRule=n.exprToConditionTree=n.getTableByCellNode=n.getFormulaResult=n.isFormulaInWhitelist=n.toUpperCase=n.getArrayUnionItems=n.getArraySameItems=n.calc=n.traverse=n.cellNameReg=n.formulaWhitelist=void 0,o=r("CalcEngine"),i=r("./dist/src/dataManager.entry.js"),n.formulaWhitelist=[],n.cellNameReg=/^([A-Z]+)(\d+)$/,n.traverse=f,n.calc=a,n.getArraySameItems=h,n.getArrayUnionItems=l,n.toUpperCase=d,n.isFormulaInWhitelist=v,n.getFormulaResult=p,n.getTableByCellNode=w,s=["AND","OR"],c=["STARTWITH","ENDWITH","SEARCH","FIND"],n.exprToConditionTree=b,n.exprToGroupConditionRule=j,n.functionNameToOperatorName=m,n.operatorTypeToOperator=_,n.expressionTypeToDataType=y,n.valueExpressionToData=g,u=/\[@(.*?)\]/,n.fieldExpressionToField=O,n.hasAndCondition=S,n.hasOrCondition=C,n.getValueType=R,n.rowColToCellName=N,n.deepCloneFilterCondition=T},"./dist/src/data-manager-report/tree-data-generator/utils/value-comparator-factory.js":function(t,n){"use strict";var r;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),n.ValueComparatorFactory=void 0,i.createComparator=function(t){switch(t){case"Equal":return function(t,n){return t+""==n+""};case"NotEqual":return function(t,n){return t+""!=n+""};case"GreaterThanOrEqual":return function(t,n){var t=i.parseValue(t,n);return t.recordValue>=t.ruleValue};case"GreaterThan":return function(t,n){var t=i.parseValue(t,n);return t.recordValue>t.ruleValue};case"LessThanOrEqual":return function(t,n){var t=i.parseValue(t,n);return t.recordValue<=t.ruleValue};case"LessThan":return function(t,n){var t=i.parseValue(t,n);return t.recordValue<t.ruleValue};case"StartWith":return function(t,n){return(t+"").startsWith(n+"")};case"NotStartWith":return function(t,n){return!(t+"").startsWith(n+"")};case"EndWith":return function(t,n){return(t+"").endsWith(n+"")};case"NotEndWith":return function(t,n){return!(t+"").endsWith(n+"")};case"Contains":return function(t,n){return-1<(t+"").indexOf(n+"")};case"NotContains":return function(t,n){return-1===(t+"").indexOf(n+"")};case"In":return function(t,n){return-1<(n+"").indexOf(t+"")};case"NotIn":return function(t,n){return-1===(n+"").indexOf(t+"")};default:return function(){return!0}}},i.parseValue=function(t,n){return"number"==typeof t?isNaN(n)?{recordValue:t+"",ruleValue:n+""}:{recordValue:t,ruleValue:+n}:isNaN(t)?{recordValue:t+"",ruleValue:n+""}:"number"==typeof n?{recordValue:+t,ruleValue:n}:{recordValue:t,ruleValue:n}},i.createDateComparator=function(t){switch(t){case"Equal":case"Contains":case"In":return function(t,n,r,i){return r<=t&&t<=i};case"NotEqual":case"NotContains":case"NotIn":return function(t,n,r,i){return i<t||t<r};case"GreaterThanOrEqual":case"StartWith":case"NotEndWith":return function(t,n,r,i){return r<=t};case"GreaterThan":return function(t,n,r,i){return i<t};case"LessThanOrEqual":case"NotStartWith":case"EndWith":return function(t,n,r,i){return t<=i};case"LessThan":return function(t,n,r,i){return t<r};default:return function(){return!0}}},n.ValueComparatorFactory=i},"./dist/src/dataManager.common.js":function(t,r,n){"use strict";var i,e,u,n,n,o,s,c;function f(){return null!==c&&c.apply(this,arguments)||this}i=this&&this.__extends||(s=function(t,n){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(r,"__esModule",{value:!0}),r.CalcFunction=r.sR=r.SR=void 0,e=n("CalcEngine"),u=n("Common"),n=n("./dist/src/res.en.js"),r.SR={en:n.resource},n=new u.Common.ResourceManager(r.SR,"DataManager"),r.sR=n.getResource.bind(n),c=e.Functions.Function,i(f,c),f.prototype.description=function(){var t=this,n=(0,r.sR)().zve;return t.IDt||(n?n[t.name]:c.prototype.description.call(this))},r.CalcFunction=f},"./dist/src/dataManager.entry.js":function(t,n,r){"use strict";var i,e,i=this&&this.__createBinding||(Object.create?function(t,n,r,i){void 0===i&&(i=r);var e=Object.getOwnPropertyDescriptor(n,r);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(t,i,e)}:function(t,n,r,i){t[i=void 0===i?r:i]=n[r]}),e=this&&this.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||i(n,t,r)};Object.defineProperty(n,"__esModule",{value:!0}),e(r("./dist/src/dataSource/dataSource.entry.js"),n),e(r("./dist/src/table/table.entry.js"),n),e(r("./dist/src/viewField/viewField.entry.js"),n),e(r("./dist/src/view/view.entry.js"),n),e(r("./dist/src/interfaces/interface.js"),n),e(r("./dist/src/interfaces/styleOptions.js"),n),e(r("./dist/src/interfaces/validatorOptions.js"),n),e(r("./dist/src/interfaces/conditionalFormatOptions.js"),n),e(r("./dist/src/dataManager.js"),n),e(r("./dist/src/dataManager.common.js"),n),e(r("./dist/src/data-manager-report/tree-data-generator/interfaces/data-manager-report.interface.js"),n),e(r("./dist/src/data-manager-report/data-manager-report.js"),n),e(r("./dist/src/data-manager-report/tree-data-generator/index.js"),n),e(r("./dist/src/query.js"),n)},"./dist/src/dataManager.js":function(t,n,r){"use strict";var i,e,u,o,s,c,f,a,h,l,d,v;function p(t){this.rV={},this.tables={},this.relationships=[],this.OEt={},t=t||new i.CalcService,this.updateCalcService(t),(0,c.addCustomFunctions)()}function w(t){return t instanceof u.View}Object.defineProperty(n,"__esModule",{value:!0}),n.isView=n.DataManager=void 0,i=r("CalcEngine"),e=r("./dist/src/table/table.js"),u=r("./dist/src/view/view.js"),o=r("./dist/src/dataSource/utils.js"),s=r("./dist/src/dataSource/dataSource.js"),c=r("./dist/src/calculation/functions/functions.entry.js"),f=r("./dist/src/calculation/tokenResolver.js"),a=r("./dist/src/calculation/queryFunctionResolver.js"),h=r("./dist/src/relationship.js"),l=null,d=i.Convert.LE,p.prototype.addTable=function(t,n){var n=new e.Table(t,n);return(this.tables[t]=n).REt(this),n},p.prototype.removeTable=function(t){for(var n,r,i,n=this.tables[t],r=this.relationships,i=r.length-1;0<=i;i--)r[i].sourceTable!==n&&r[i].targetTable!==n||(r[i].VP(),r.splice(i,1));n.REt(l),delete this.tables[t]},p.prototype.addRelationship=function(t,n,r,i,e,u){var t=new h.Relationship(t,n,r,i,e,u);return this.relationships.push(t),t},p.prototype.removeRelationship=function(t){for(var n,r,n=this.relationships,r=0;r<n.length;r++)if(n[r].sourceRelationshipName===t){n[r].VP(),n.splice(r,1);break}},p.prototype.updateCalcService=function(t){for(var n,r,i,e,u,n,r=!0,i=0,e=t.getResolvers();i<e.length;i++)if((u=e[i])instanceof f.DataManagerTokenResolver){r=!1;break}r&&t.addResolver(new f.DataManagerTokenResolver(8e3)),this.Lp=t},p.prototype.xEt=function(t,n,r){var i,e;return d(t)?t=t.getValueByIndex(0):(0,o.isString)(t)||(t=""+t),(0,o.isString)(n)?n=[n]:d(n)?n=n.toArray(0,!0):n&&n.array&&(n=n.array[0]),i=t+"-"+(n&&n.join(",")),e=(e=this.OEt[i])||(this.OEt[i]=a.QueryFunctionSolver.parseParam(t,n,r,this))},p.prototype.IEt=function(t,n,r,i){var t,n;function e(){i()}return t=this.xEt(t,n,r),!0===i&&t.table._dataSource.unbind(s.ONCHANGE,e),i&&t.table&&t.table._dataSource.bind(s.ONCHANGE,e),n=0===(n=t.getValue?t.getValue(t.table):[[]]).length?[[]]:n},p.prototype.toJSON=function(){var t,n,r,i,t=this.tables,n=[];for(r in t)t.hasOwnProperty(r)&&n.push(t[r].toJSON());return{tables:n,relationships:i=this.relationships.map(function(t){return{sourceTableName:t.sourceTable.name,sourceFieldName:t.sourceFieldName,sourceRelationshipName:t.sourceRelationshipName,targetTableName:t.targetTable.name,targetFieldName:t.targetFieldName,targetRelationshipName:t.targetRelationshipName}})}},p.prototype.fromJSON=function(t){for(var n,r,i,e,u,o,s,c,f,o,a,h,l,d,v,p,n=this.tables={},r,i=0,e=t.tables;i<e.length;i++){if(s=(o=(u=e[i]).dataSourceOption.schema)&&o.columns)for(c in s)s.hasOwnProperty(c)&&(f=s[c])&&"date"===f.dataType&&Array.isArray(f.lookup)&&(f.lookup=f.lookup.map(function(t){return new Date(t)}));(o=this.addTable(u.name,u.dataSourceOption)).BEt=!0,o.fromJSON(u)}for(this.relationships=[],h=0,l=a=t.relationships;h<l.length;h++)v=n[(d=l[h]).sourceTableName],p=n[d.targetTableName],this.addRelationship(v,d.sourceFieldName,d.sourceRelationshipName,p,d.targetFieldName,d.targetRelationshipName)},n.DataManager=p,n.isView=w},"./dist/src/dataSource/dataReader/BasicReader.js":function(t,n,r){"use strict";var e,u,i;function o(t){var n,r,i,t,n=this;n.LEt=t,(0,e.isNullOrUndefined)(t)||(n.Pq=t.Pq,r=t.dataPath,i=t.countPath,t=t.parse,(0,e.isFunction)(r)?n.FEt=r:n.FEt=function(t){return(0,e.isString)(r)&&r?(0,e.q$)(t,r):t},(0,e.isFunction)(i)?n.PEt=i:n.PEt=function(t){return(0,e.isString)(i)&&i?parseInt((0,e.q$)(t,i),10):u},(0,e.isFunction)(t)&&(n.parse=t))}Object.defineProperty(n,"__esModule",{value:!0}),n.BasicReader=void 0,e=r("./dist/src/dataSource/utils.js"),u=void 0,o.prototype.parse=function(t){return this.GEt=t,Promise.resolve(t)},o.prototype.read=function(t){return Promise.resolve(this.FEt(t))},o.prototype.readSync=function(t){return this.FEt(t)},o.prototype.total=function(t){return this.PEt(t)},n.BasicReader=o},"./dist/src/dataSource/dataReader/ColumnJsonReader.js":function(t,n,r){"use strict";var i,e,h,u,o,s;function c(t){var n,f,a,n=s.call(this,t)||this,f=n,a=t.dataPath;return(0,h.isFunction)(a)?f.FEt=a:f.FEt=function(t){var n,r,i,e,u,o,s,c;for(t=(0,h.isString)(a)?(0,h.q$)(t,a):t,n=f.Pq=f.Pq||(0,h.keys)(t),r=f.GEt=[],i=t[n[0]].length,e=0;e<i;e++){for(u={},o=0,s=n;o<s.length;o++)u[c=s[o]]=t[c][e];r.push(u)}return r},n}i=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnJsonReader=void 0,e=r("./dist/src/dataSource/dataReader/BasicReader.js"),h=r("./dist/src/dataSource/utils.js"),s=e.BasicReader,i(c,s),c.prototype.parse=function(e){var u=this;return new Promise(function(t,n){var r,i;(0,h.isNullOrUndefined)(e)&&n("value cannot be null or empty"),r=u.Pq=u.Pq||(0,h.keys)(e),(i=(0,h.reduce)(r,function(t,n){return t&&(0,h.isArray)(e[n])},!0))||n("The value of each property in column JSON should be an array"),t(e)})},n.ColumnJsonReader=c},"./dist/src/dataSource/dataReader/CsvReader.js":function(t,n,r){"use strict";var i,e,l,u,o,s;function c(t){var n=s.call(this,t)||this;return n.UEt=t.delimiter||['"'],n.HEt=t.separator||",",n}i=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.CsvReader=void 0,e=r("./dist/src/dataSource/dataReader/BasicReader.js"),l=r("./dist/src/dataSource/utils.js"),s=e.BasicReader,i(c,s),c.prototype.parse=function(t){for(var n,r,i,e,u,o,s,c,f,a,h,n=this,r=n.UEt,i=n.HEt,e=t.split(""),u=0,o=e.length,s=[];u<o;){for(a=[];u<o&&"\r"!==e[u]&&"\n"!==e[u];){if(c=f=u,-1<(0,l.indexOf)(r,e[u])){for(c=f=++u;u<o;){if(-1<(0,l.indexOf)(r,e[u])){if(-1===(0,l.indexOf)(r,e[u+1]))break;e[++u]=""}f=++u}for(-1<(0,l.indexOf)(r,e[u])&&++u;u<o&&"\r"!==e[u]&&"\n"!==e[u]&&i!==e[u];)++u}else for(;u<o&&"\r"!==e[u]&&"\n"!==e[u]&&i!==e[u];)f=++u;a.push(e.slice(c,f).join("")),i===e[u]&&++u}"\r"!==e[u]&&"\n"!==e[u]||++u,0<a.length&&s.push(a)}return h=s.shift(),n.GEt=(0,l.isNullOrUndefined)(n.Pq)?(0,l.map)(s,function(t){return(0,l.zipObject)(h,t)}):(0,l.map)(s,function(t){return(0,l.pick)((0,l.zipObject)(h,t),n.Pq)}),n.Pq=n.Pq||h,Promise.resolve(n.GEt)},n.CsvReader=c},"./dist/src/dataSource/dataReader/JsonReader.js":function(t,n,r){"use strict";var i,r,e,u,o;function s(t){return o.call(this,t)||this}i=this&&this.__extends||(u=function(t,n){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.JsonReader=void 0,r=r("./dist/src/dataSource/dataReader/BasicReader.js"),o=r.BasicReader,i(s,o),n.JsonReader=s},"./dist/src/dataSource/dataReader/XmlReader.js":function(t,n,r){"use strict";var i,e,u,o,s,c;function f(t){var r,i,e,r=c.call(this,t)||this,i=r,e=t.dataPath;return(0,u.isFunction)(e)?i.FEt=e:i.FEt=function(t){var n;return t=(0,u.isString)(e)?(0,u.q$)(t,e):t,(0,u.isNullOrUndefined)(t)||((n=i.Pq)?t=t.map(function(t){return(0,u.pick)(t,n)}):r.Pq=(0,u.keys)(t[0])),t},r}i=this&&this.__extends||(s=function(t,n){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.XmlReader=void 0,e=r("./dist/src/dataSource/dataReader/BasicReader.js"),u=r("./dist/src/dataSource/utils.js"),c=e.BasicReader,i(f,c),f.prototype.parse=function(t){var n,t,t,n,t=(new DOMParser).parseFromString(t.trim(),"text/xml"),t=this.documentToJSObject(t);return Promise.resolve(t)},f.prototype.documentToJSObject=function(t){for(var n,r,i,e,n={},r=t.children,i=0,e=r.length;i<e;i++)this.elementToJSObject(r[i],n);return n},f.prototype.elementToJSObject=function(t,n){var r,i,e,u,o,s,c,f,r=t.children,i=r.length,e=t.nodeName;if(0===i)n[e]=t.textContent;else{for(u={},void 0!==(o=n[e])?Array.isArray(o)?n[e].push(u):n[e]=[o,u]:n[e]=u,s=t.attributes,c=0;c<s.length;c++)u[(f=s[c]).nodeName]=f.nodeValue;for(c=0;c<i;c++)this.elementToJSObject(r[c],u)}},n.XmlReader=f},"./dist/src/dataSource/dataSource.entry.js":function(t,n,r){"use strict";var i,e,i=this&&this.__createBinding||(Object.create?function(t,n,r,i){void 0===i&&(i=r);var e=Object.getOwnPropertyDescriptor(n,r);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(t,i,e)}:function(t,n,r,i){t[i=void 0===i?r:i]=n[r]}),e=this&&this.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||i(n,t,r)};Object.defineProperty(n,"__esModule",{value:!0}),e(r("./dist/src/dataSource/dataSource.js"),n),e(r("./dist/src/dataSource/dataSource.interface.js"),n),e(r("./dist/src/dataSource/utils.js"),n)},"./dist/src/dataSource/dataSource.interface.js":function(t,n){"use strict";var r,i,e,u,u,u;Object.defineProperty(n,"__esModule",{value:!0}),n.WindowOverFrameType=n.WindowOverFrameFollowing=n.WindowOverFramePreceding=void 0,(u=r=n.WindowOverFramePreceding||(n.WindowOverFramePreceding={}))[u.UnBounded=-2]="UnBounded",u[u.NPreceding=-1]="NPreceding",u[u.CurrentRow=0]="CurrentRow",(u=i=n.WindowOverFrameFollowing||(n.WindowOverFrameFollowing={}))[u.UnBounded=2]="UnBounded",u[u.NFollowing=1]="NFollowing",u[u.CurrentRow=0]="CurrentRow",(u=e=n.WindowOverFrameType||(n.WindowOverFrameType={}))[u.ROWS=0]="ROWS",u[u.RANGE=1]="RANGE"},"./dist/src/dataSource/dataSource.js":function(D,d,t){"use strict";var n,v,r,i,f,e,u,o,s,j,c,p,m,l,w,b,_,y,a,h,L,g,k,O,S;function C(t){return"".concat(h).concat(t)}function R(t){return"string"==typeof t&&-1<t.indexOf(h)}function N(t){return R(t)?m:t}function T(t,n){var r=n;return"odata"!==t&&"odata4"!==t||!n.value?"graphql"!==t&&"rest"!==t||!n.data||(r=n.data):r=n.value,r}function E(t,n){var r,i,e,r={};for(i in t)t.hasOwnProperty(i)&&(e=n[i],r[i]=(0,j.isNullOrUndefined)(e)?t[i]:e);return r}function F(t,n,r,i,e){var u,o,s,c,f,a,h;for("string"==typeof r?u=o=r:(u=r.childrenField1||"children",o=r.childrenField2||"children"),s=t[u]||[],c=n[o]||[],f=0;f<s.length;f++)a=s[f],h=c[f],i&&i(a,h,t,n),F(a,h,r,i,e),e&&e(a,h,t,n)}function M(t,n){var r,i,e,u,o;if((0,j.isNullOrUndefined)(t)||(0,j.isNullOrUndefined)(n))return t===n;if(r=(0,j.keys)(t),i=(0,j.keys)(n),r.length===i.length){for(e=0,u=r;e<u.length;e++)if(t[o=u[e]]!==n[o])return;return 1}}function I(t,n){for(var r,i,e,u,r=[],i=0;i<n;i++){for(u in e={},t)t.hasOwnProperty(u)&&(e[u]=t[u].data[i]);r[i]=e}return r}function x(t){return"xml"===t?"xml":"csv"===t?"text":"json"}function V(t){var n,n,t,r,r,r,r,r,n=null==(n=t.schema)?void 0:n.type,t=t.remote;n&&t&&((r=t.read)&&"object"==typeof r&&(r.dataType=x(n)),(r=t.update)&&"object"==typeof r&&(r.dataType=x(n)),(r=t.delete)&&"object"==typeof r&&(r.dataType=x(n)),(r=t.create)&&"object"==typeof r&&(r.dataType=x(n)),r=t.batch)&&"object"==typeof r&&(r.dataType=x(n))}function G(){}function A(t){var n,r,n=S.call(this)||this;return n.R1t=[],(r=n)._data=t.data,r.zEt=t.isRoot,r.VEt=t.getData,r.YEt=t.getFieldData,r.ZEt=t.idField,r.WEt=!(0,j.isNullOrUndefined)(t.idField),r.QEt=t.sequenceField,r.KEt=!(0,j.isNullOrUndefined)(t.sequenceField),Object.defineProperty(r,"data",{get:function(){return r.VEt(r.lp)}}),Object.defineProperty(r,"isRoot",{get:function(){return r.zEt}}),Object.defineProperty(r,"id",{get:function(){var t;return r.WEt?(t=r.YEt(r.ZEt,r.lp),(0,j.isNullOrUndefined)(t)?t=r._id:r._id!==t&&(r._id=t),t):r._id},set:function(t){r._id=t,(0,j.isNullOrUndefined)(r.JEt)&&(r.JEt=t)}}),Object.defineProperty(r,"parentId",{get:function(){return(0,j.isNullOrUndefined)(r.parent)?m:r.parent.id}}),Object.defineProperty(r,"parent",{get:function(){return r.sft},set:function(t){r.setParent(t),(0,j.isNullOrUndefined)(r.XEt)&&!(0,j.isNullOrUndefined)(t)&&(r.XEt=t.id)}}),Object.defineProperty(r,"level",{get:function(){return r.YAt},set:function(t){r.YAt=t}}),Object.defineProperty(r,"children",{get:function(){return r.R1t},set:function(t){r.R1t=t}}),Object.defineProperty(r,"sequence",{get:function(){return r.KEt?r.YEt(r.QEt,r.lp):r.qEt},set:function(t){r.qEt=t,(0,j.isNullOrUndefined)(r.$Et)&&(r.$Et=t)}}),n}function P(t){this.tjt={},this.njt=[],this.ejt=!0,this.Mue=!1;var s=this;Object.defineProperty(this,"options",{get:function(){return s.LEt},set:function(t){var n,r,i,e,n,u,n,o;V(t),n=s.LEt,s.LEt=t,e=(r=n&&n.remote&&n.remote.read&&n.remote.read.url)!==(i=t&&t.remote&&t.remote.read&&t.remote.read.url),s.ijt(t.remote,t.data),n=n&&n.schema,u=t&&t.schema,(n=n&&u&&(n.type!==u.type||n.dataPath!==u.dataPath||n.countPath!==u.countPath))&&s.rjt(t.schema),(o=s.ojt)&&(e||n)&&(s.ajt(),s.load())}}),s._events={},s.options=v({data:p,batch:!1},t),this.ijt(t.remote,t.data),s.bind([l,b,_,d.ONCHANGE,w],t),this.rjt(t.schema),s.ajt()}n=this&&this.__extends||(O=function(t,n){return(O=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}O(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),v=this&&this.__assign||function(){return(v=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(d,"__esModule",{value:!0}),d.DataSource=d.HierarchyNode=d.ONCHANGE=d.DELETE=d.UPDATE=d.INSERT=d.CREATE=void 0,r=t("./dist/src/dataSource/dataTransport/localDataTransport.js"),i=t("./dist/src/dataSource/dataTransport/remoteDataTransport.js"),f=t("./dist/src/dataSource/event.js"),e=t("./dist/src/dataSource/dataReader/JsonReader.js"),u=t("./dist/src/dataSource/dataReader/ColumnJsonReader.js"),o=t("./dist/src/dataSource/dataReader/CsvReader.js"),s=t("./dist/src/dataSource/dataReader/XmlReader.js"),j=t("./dist/src/dataSource/utils.js"),c=t("Common"),p=null,m=void 0,d.CREATE="create",d.INSERT="insert",d.UPDATE="update",d.DELETE="delete",l="onBeforeSend",w="onFailed",b="onBeforeEnd",_="onReady",y="user cancel the request at step ",d.ONCHANGE="onChange",a=Number.NaN,h="__HIERARCHY__",n(A,S=G),A.prototype.sjt=function(){return this.qEt},A.prototype.setParent=function(t,n){var r=!(0,j.isNullOrUndefined)(this.parent);r&&this.parent.cjt(this),this.sft=t,(0,j.isNullOrUndefined)(t)?r&&(this.level=a):(this.level=t.level+1,(0,j.isNullOrUndefined)(n)?t.fjt(this):t.ljt(this,n))},A.prototype.updateChildrenLevel=function(){var n=this.level;this.children.forEach(function(t){t.level=n+1,t.updateChildrenLevel()})},A.prototype.promote=function(t){this.setParent(t,this.parent.getCurrentIndex()+1),this.updateChildrenLevel()},A.prototype.demote=function(n,t){this.parent=n,(t=!1!==t)?this.updateChildrenLevel():this.children.forEach(function(t){t.parent=n})},A.prototype.getCurrentIndex=function(){return this.parent&&this.parent.children.indexOf(this)},A.prototype.getPrevSibling=function(){return this.parent&&this.parent.children[this.getCurrentIndex()-1]},A.prototype.getNextSibling=function(){return this.parent&&this.parent.children[this.getCurrentIndex()+1]},A.prototype.ljt=function(t,n){this.children.splice(n,0,t)},A.prototype.fjt=function(t){this.children.push(t)},A.prototype.cjt=function(t){var t=this.children.indexOf(t);this.children.splice(t,1)},A.prototype.getChildrenIndexes=function(t){var n=[];return(0,j.traversalTree)(this,{invoked:function(t){n.push(t.lp)}},t?function(t){return-t.sequence}:m),n},A.prototype.getFieldValue=function(t){return this.YEt(t,this.lp)},g=A,d.HierarchyNode=g,P.prototype.ijt=function(t,n){this.hjt=t?new i.RemoteDataTransport(t):new r.LocalDataTransport({data:n||[]})},P.prototype.rjt=function(t){var n,r;"json"===(r=(t=t||{}).type||"json")?n=new e.JsonReader(t):"columnJson"===r?n=new u.ColumnJsonReader(t):"csv"===r?n=new o.CsvReader(t):"xml"===r&&(n=new s.XmlReader(t)),this.djt=n},P.prototype.ajt=function(){this._data={},this.vjt=0,this.DEt=[]},P.prototype.mjt=function(t,n,r){var i,e,u,o,s,i=this,e={};for(u in i._data)i._data.hasOwnProperty(u)&&(o=i._data[u],0!==n?(s=o.data.splice(t,n),e[u]={data:s}):t>=o.data.length?o.data[t]=r[u]:o.data.splice(t,0,r[u]));return i.vjt=i.vjt-n,r&&i.vjt++,I(e,n)},P.prototype.gjt=function(t,n){var r,i,e,u,r=this,i={};for(e in r._data)r._data.hasOwnProperty(e)&&(u=r._data[e],i[e]={data:u.data.slice(t,n)});return I(i,n-t)},P.prototype.pjt=function(t,n,r){var i,e;if(!(0,j.isNullOrUndefined)(n))if(i=this,r)for(e in n)Object.prototype.hasOwnProperty.call(i._data,e)&&(i._data[e].data[t]=n[e]);else for(e in i._data)i._data.hasOwnProperty(e)&&(i._data[e].data[t]=n[e])},P.prototype.bjt=function(t){var n,r,i,n=this,r={};for(i in n._data)n._data.hasOwnProperty(i)&&(r[i]=n._data[i].data[t]);return r},P.prototype.yjt=function(t){var t,n,r;return!(!t||!t.reload)||(n=(t=this).wjt,0===(r=t.vjt))||((0,j.isNullOrUndefined)(n),!1)},P.prototype.Mjt=function(t,n){var r,i,r=this.tjt;return r[t]||(i=void 0,n?i=c.Common.ct.yU(t,n):(i=c.Common.ct.dJ(t),(0,j.isNullOrUndefined)(i)&&(i=new Date(t)),isNaN(i)&&(i=new Date(t.replace(" ","T")))),r[t]=i),r[t]},P.prototype.Cjt=function(t,n){return n?0===n.split("|").indexOf(t):!!t},P.prototype.Sjt=function(t,n){return+(t=(t=n?t.replace(n,"."):t).replace(/,/g,""))||0},P.prototype.Tjt=function(t,n,r,i){if("rowOrder"===n)return t;if(i){if(!n||"number"===n)return t;t+=""}return"date"===n?"NULL"===t||""===t?null:this.Mjt(t,r):"boolean"===n?this.Cjt(t,r):"number"===n?this.Sjt(t,r):t},P.prototype.Ajt=function(t,n){var r="number"==typeof t;return(0,j.isNullOrUndefined)(n)||(0,j.isNullOrUndefined)(t)||"string"!=typeof t&&!j.isNumber?t:this.Tjt(t,n.dataType,n.dataPattern,r)},P.prototype.Ijt=function(t,n){var r,i,e,u;for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&(u="number"==typeof(e=n[r]),(0,j.isNullOrUndefined)(e)||"string"!=typeof e&&!u||(n[r]=this.Tjt(e,i.dataType,i.dataPattern,u)))},P.prototype.xjt=function(t,n,r){for(var i,e,u,o,i=this._data[t].data,e=0;e<i.length;e++)o="number"==typeof(u=i[e]),(0,j.isNullOrUndefined)(u)||"string"!=typeof u&&!o||(i[e]=this.Tjt(u,n,r,o));this.isHierarchy()&&"rowOrder"===n&&(this.ejt=!0)},P.prototype.Njt=function(t,n){var r,i;t===n||(0,j.isNullOrEmpty)(n)||((r=this)._data[n]=r._data[t],delete r._data[t],i=r.kjt(t),r.Djt(t,(0,j.isNullOrEmpty)(i)?t:i,n))},P.prototype.kjt=function(t){var n,r=this.LEt.schema,i,r,e;if(!((0,j.isNullOrUndefined)(r)||(0,j.isNullOrUndefined)(r.columns)||(r=(i=r.columns)[t],(0,j.isNullOrUndefined)(r))||(e=r.dataName,(0,j.isNullOrEmpty)(e))))return e},P.prototype.Djt=function(t,n,r){var i=this,e=i.LEt.schema,i,e;(0,j.isNullOrUndefined)(e)&&(i.LEt.schema=e={}),i=e.columns,(0,j.isNullOrUndefined)(i)&&(e.columns=i={}),e=i[t],(0,j.isNullOrUndefined)(e)&&(i[t]=e={}),(0,j.isNullOrEmpty)(e.dataName)&&(e.dataName=n),(0,j.isNullOrEmpty)(r)||(i[r]=i[t],delete i[t])},P.prototype._jt=function(t){var n;return t=this.Ejt(t,{isServerToClient:!0})},P.prototype.jjt=function(t){var n=this;return t=(0,j.clone)(t,!0),n.Ojt(t),t=n.Ejt(t)},P.prototype.Ejt=function(t,n){var r,i,e,n,u,o,s,i=(r=this).LEt.schema,e=(n=n||{}).isServerToClient,n=n.isClone;if(!(0,j.isNullOrUndefined)(t)&&!(0,j.isNullOrUndefined)(i)&&!(0,j.isNullOrUndefined)(i.columns)){for(s in u=i.columns,o=[],u)(0,j.isNullOrUndefined)(u[s].dataName)||u[s].dataName===s||o.push(e?[u[s].dataName,s]:[s,u[s].dataName]);0<o.length&&(t=n?(0,j.clone)(t,!0):t,(0,j.isArray)(t)?t.forEach(function(t){r.Rjt(o,t)}):(0,j.isObject)(t)&&r.Rjt(o,t))}return t},P.prototype.Rjt=function(t,r){t.forEach(function(t){var n=t[0],t=t[1];r[t]=r[n],delete r[n]})},P.prototype.Bjt=function(){var t,n,r,i,e,u,t,n=this.LEt.schema;if((0,j.isNullOrUndefined)(n)||(0,j.isNullOrUndefined)(n.columns))return[{},{}];for(u in i={},e={},r=n.columns)r.hasOwnProperty(u)&&((0,j.isNullOrUndefined)(r[u].dataName)||(i[r[u].dataName]=u),r[u].dataType||r[u].dataPattern)&&(e[u]={dataType:r[u].dataType,dataPattern:r[u].dataPattern});return[i,e]},P.prototype.Ljt=function(){var t,n,r,i,e,u,t,n=this.LEt.schema,r=[];if(!(0,j.isNullOrUndefined)(n)&&!(0,j.isNullOrUndefined)(n.columns))for(e in i=n.columns)i.hasOwnProperty(e)&&(u=i[e]).isPrimaryKey&&r.push(e);return r},P.prototype.Ojt=function(t){var n,r,n,i,n=this;!(0,j.isNullOrUndefined)(t)&&n.isHierarchy()&&"Level"===n.Fjt()&&(r=n.Pjt(),(0,j.isNumber)(r))&&(i=t[n=n.Gjt()],t[n]=i-r)},P.prototype.Ujt=function(r){var t,n;return this.njt.map(function(t,n){t.lp=n,r||(t.sequence=n+1);var n=t._data;return t._data=m,n})},P.prototype.Hjt=function(t){var n=this,r=n.zjt,i=n.njt=[];return(0,j.traversalTree)(r,function(t){t.level=t.parent.level+1,i.push(t)},t?{isOrderChildren:!0,getValue:function(t){return t.qEt}}:m),n.Ujt(t)},P.prototype.Vjt=function(t,n,r,i,e){var u,o,s,c,f,a,h,l,d,v,p,w,u=this,o=!(0,j.isNullOrEmpty)(i),s=n,c=i;for(n=u.Yjt(n),r=u.Yjt(r),i=u.Yjt(i),f={},a=0;a<t.length;a++)h=t[a],l=new g(u.Zjt({data:h,idField:s,sequenceField:c})),d=h[n],f[l.id=d]=l,o&&(l.sequence=h[i]);for((v=new g({isRoot:!0})).level=e-1,a=0;a<t.length;a++)d=t[a][n],p=t[a][r],l=f[d],(0,j.isNullOrUndefined)(w=f[p])?(v.id=p,l.parent=v):l.parent=w;return u.zjt=v,u.Hjt(o)},P.prototype.Wjt=function(t,n,r,i,e){var u,o,s,c,f,a,h,l,d,v,p,w,b,u=this,o=!(0,j.isNullOrEmpty)(i),s=n,c=i;for(n=u.Yjt(n),r=u.Yjt(r),i=u.Yjt(i),f=m,a=0;a<t.length;a++)((h=t[a][r])<f||f===m)&&(f=h);for(f===m&&(f=0),(l=u.zjt=new g({isRoot:!0})).level=f+e-1,d=[l],a=0;a<t.length;a++){for(v=t[a],p=new g(u.Zjt({data:v,idField:s,sequenceField:c})),w=(0,j.isNullOrEmpty)(n)?C(a):v[n],h=v[r]+e,p.id=w,o&&(p.sequence=v[i]),b=d[d.length-1];b.level>=h;)b=d.pop().parent;p.parent=b,d.push(p)}return u.Hjt(o)},P.prototype.Qjt=function(t,r,n,i,e){var e,u,o,s,c,f,a,h,u=this,o=u.njt=[],s=!(0,j.isNullOrEmpty)(i),c=r,f=i;return r=u.Yjt(r),n=u.Yjt(n),i=u.Yjt(i),(a=u.zjt=new g({isRoot:!0})).level=e-1,h=[a],(0,j.traversalTree)(((e={})[n]=t,e),{invoking:function(t){var n=new g(u.Zjt({data:t,idField:c,sequenceField:f}));n.id=(0,j.isNullOrEmpty)(r)?C(o.length):t[r],s&&(n.sequence=t[i]),n.parent=h[h.length-1],o.push(n),h.push(n)},invoked:function(){h.pop()}},s?i:m,n),u.Ujt(s)},P.prototype.Kjt=function(t,n,r,i,e,u){var o,s,c,f,a,h,l,d,v,p,w,b,b,o=this,s=!(0,j.isNullOrEmpty)(e),c=n,f=e;for(n=o.Yjt(n),r=o.Yjt(r),e=o.Yjt(e),a={},h=0;h<t.length;h++)l=t[h],d=new g(o.Zjt({data:l,idField:c,sequenceField:f})),v=l[r],d.id=(0,j.isNullOrEmpty)(n)?C(h):l[n],a[v]=d,s&&(d.sequence=l[e]);for(p=o.Bjt(),(w=new g({isRoot:!0})).level=u-1,h=0;h<t.length;h++)d=a[v=t[h][r]],b=i(o.Jjt(t[h],p,h)),(0,j.isNullOrUndefined)(b=a[b])?d.parent=w:d.parent=b;return o.zjt=w,o.Hjt(s)},P.prototype.Jjt=function(o,r,t){var s=this,t={index:t};return Object.defineProperty(t,"data",{get:function(){var i,e,u,t,n,i=r[0],e=r[1],u={},t=function(t){var n,r;o.hasOwnProperty(t)&&(n=o[t],r=i[t]||t,Object.defineProperty(u,r,{get:function(){return s.Ajt(n,e[r])}}))};for(n in o)t(n);return u}}),t},P.prototype.Zjt=function(t){var n=this;return{data:t.data,idField:t.idField,sequenceField:t.sequenceField,getData:n.bjt.bind(n),getFieldData:n.Xjt.bind(n)}},P.prototype.qjt=function(t){var n,r,i,e,n,u,o,s,c,f,a,h,l,e,r=this,i=r.LEt.schema;return r.isHierarchy()&&(e=i.hierarchy.type.trim(),n=null==(n=i.hierarchy.column)?void 0:n.trim(),u=i.hierarchy.levelOffset||0,o=r.Ljt(),s=r.$jt(t),"Parent"===e?(c=o[0],t=r.Vjt(t,c,n,s,u)):"Level"===e?(c=o[0],t=r.Wjt(t,c,n,s,u)):"ChildrenPath"===e?(c=o[0],t=r.Qjt(t,c,n,s,u)):"Custom"===e&&(c=o[0],e=i.hierarchy.parse,t=r.Kjt(t,c,n,e,s,u)),r.t7t(),r.ejt=!1),t},P.prototype.t7t=function(){var t,n,r,i,e,t=this,n=t.$jt(),r=t.njt.slice();for((0,j.isNullOrEmpty)(n)||r.sort(function(t,n){return t.sjt()-n.sjt()}),i=0;i<r.length;i++)(e=r[i]).prev=r[i-1],e.next=r[i+1]},P.prototype.$jt=function(t){var n,r,i,e,u,n=this,r=n.LEt.schema;if(!(0,j.isNullOrUndefined)(r)&&!(0,j.isNullOrUndefined)(r.columns))for(e in i=r.columns)if(Object.prototype.hasOwnProperty.call(i,e)&&"rowOrder"===(u=i[e]).dataType&&(u.n7t||n.e7t(e,t)))return u.n7t=!0,e},P.prototype.e7t=function(t,n){var r,i,e;if(!(0,j.isNullOrUndefined)(t)&&(0,j.isArray)(n)){if(0===n.length)return!0;for(t=(r=this).Yjt(t),i=0;i<n.length;i++)if(e=n[i][t],!(0,j.isNullOrUndefined)(e))return(0,j.isNumber)(e)}},P.prototype.qX=function(){var t=this;return!(!t.isHierarchy()||"Parent"===t.Fjt()&&(0,j.isNullOrUndefined)(t.$jt()))},P.prototype.i7t=function(){return this.options.schema.hierarchy.summaryFields},P.prototype.Pjt=function(){return this.options.schema.hierarchy.levelOffset},P.prototype.r7t=function(){return this.options.schema.hierarchy.unparse},P.prototype.Gjt=function(){return this.options.schema.hierarchy.column},P.prototype.Fjt=function(){return this.options.schema.hierarchy.type},P.prototype.o7t=function(){var t,n;return this.Ljt()[0]},P.prototype.isHierarchy=function(){var t,t,n,n=this.options.schema;return!(0,j.isNullOrUndefined)(n)&&!(0,j.isNullOrUndefined)(n.hierarchy)&&!(0,j.isNullOrUndefined)(null==(t=n.hierarchy.type)?void 0:t.trim())&&!(0,j.isNullOrUndefined)(null==(t=n.hierarchy.column)?void 0:t.trim())&&("Custom"!==n.hierarchy.type||(0,j.isFunction)(n.hierarchy.parse)&&(0,j.isFunction)(n.hierarchy.unparse))},P.prototype.a7t=function(){return this.ejt},P.prototype.u7t=function(){this.ejt=!0},P.prototype.SEt=function(t){var n=this;return t=n.s7t(t),n.c7t(t)},P.prototype.c7t=function(t){var n,r;return this.njt[t]},P.prototype.f7t=function(){return this.zjt},P.prototype.l7t=function(t){var n,r=this.i7t();if(!(0,j.isNullOrUndefined)(r))return r[t]},P.prototype.h7t=function(t,n){var r,t,r,r=this,t=r.l7t(t);if(!(0,j.isNullOrEmpty)(t)&&(r=r.SEt(n),!(0,j.isNullOrUndefined)(r))&&0<r.children.length)return t},P.prototype.Yjt=function(t){var n,r,i,e,n,r=this.LEt.schema;if(!(0,j.isNullOrUndefined)(r)&&!(0,j.isNullOrUndefined)(r.columns))for(e in i=r.columns)if(e===t)return i[e].dataName||t;return t},P.prototype.d7t=function(t,n,r){var i=this;return i.v7t(r,(0,j.isNumber)(t)?i.s7t(t):t,i.s7t(n))},P.prototype.v7t=function(t,n,r){var i=this,e=i.njt,u=i.$jt(),o,s=function(t){return i.isHierarchy()?i.njt[t].sequence:i._data[u].data[t]};return t?(n=e[r].next&&e[r].next.lp,(0,j.isNullOrUndefined)(n)?(o=s(r),Math.floor(o)===o?o+=.5:o=(o+Math.ceil(o))/2):o=(s(r)+s(n))/2):(n=e[r].prev&&e[r].prev.lp,o=(0,j.isNullOrUndefined)(n)?(o=s(r))<=1?o/2:o-.5:(s(n)+s(r))/2),o},P.prototype.Cue=function(){return this.Mue},P.prototype.Sue=function(t){this.Mue=t},P.prototype.m7t=function(t,n,r,i){var e,u,o,s,c,f,n,a,h,f,l,d,f,e,u,d,l,o=this,s=o.$jt(),c=o.isHierarchy();if((0,j.isNullOrUndefined)(s)&&!c||n===r||(0,j.isNullOrUndefined)(n)||(0,j.isNullOrUndefined)(r))return!1;if(r=o.s7t(r),i=(0,j.isNumber)(i)?o.s7t(i):i,n=o.s7t(n),h=(a=o.njt)[n],f=a[r],c){if(f.parent!==h.parent)return!1;e=0,(t=(d=(l=h.parent.children).indexOf(h))<(f=l.indexOf(f)))?(e=null==(u=h.getNextSibling())?void 0:u.lp,l.splice(f+1,0,h),l.splice(d,1)):(e=n,l.splice(d,1),l.splice(f,0,h)),"Custom"===o.Fjt()&&o.g7t(e),!(0,j.isNullOrUndefined)(i)&&(u=a[i],d=h.parent===u,l=h.parent.parent===u.parent,d||l)&&(i=m)}return f=o.v7t(t,i,r),c&&(0,j.isNullOrUndefined)(s)&&(h.sequence=f),o.p7t(t,r,n),o.b7t(n,((e={})[s]=f,e)),!0},P.prototype.p7t=function(t,n,r){var i,e,r,i,i=this,e;i.isHierarchy()&&(r=i.c7t((0,j.isNumber)(r)?r:i.njt.length-1),i=i.c7t(n),(0,j.isNullOrUndefined)(r.prev)||(r.prev.next=r.next),(0,j.isNullOrUndefined)(r.next)||(r.next.prev=r.prev),t?(r.prev=i,r.next=i.next,(0,j.isNullOrUndefined)(i.next)||(i.next.prev=r),i.next=r):(r.next=i,r.prev=i.prev,(0,j.isNullOrUndefined)(i.prev)||(i.prev.next=r),i.prev=r))},P.prototype.y7t=function(t,n){var r,i,e,r=this,i;if(r.isHierarchy())for(n=n||1,e=0;e<n;e++)r.w7t(e+t)},P.prototype.w7t=function(t){var n,t=this.c7t(t);(0,j.isNullOrUndefined)(t.prev)||(t.prev.next=t.next),(0,j.isNullOrUndefined)(t.next)||(t.next.prev=t.prev)},P.prototype.M7t=function(t){var n,r,r,i,e,u,o,s,e,n,c,f,a,h;if(this.isHierarchy()&&(e=(i=this).njt,u=i.Gjt(),!(o=e[t=i.s7t(t)]).parent.isRoot)){for(s=i.Fjt(),e=o.parent.children.slice(o.getCurrentIndex()+1),n=o.parent.parent,o.promote(n),"Parent"===s?i.b7t(t,((n={})[u]=N(o.parentId),n)):"Level"===s&&i.C7t(t),c=0,f=e;c<f.length;c++)(a=f[c]).parent=o,h=a.lp,"Parent"===s?i.b7t(h,((r={})[u]=o.id,r)):"Level"===s&&i.b7t(h,((r={})[u]=a.level,r));"Custom"===s&&i.g7t(t)}},P.prototype.S7t=function(t,n){this.T7t(t,n)},P.prototype.T7t=function(t,n,r){var n,n,n,i,e,u,o,r,s,r;this.isHierarchy()&&(n=!1!==n,e=(i=this).njt,u=i.Gjt(),t=r?t:i.s7t(t),r=(o=e[t]).getPrevSibling(),(0,j.isNullOrUndefined)(r)||(s=o.children.slice(),o.demote(r,n),r=i.Fjt(),n?"Parent"===r?i.b7t(t,((n={})[u]=N(o.parentId),n)):"Level"===r?i.C7t(t):"Custom"===r&&i.g7t(t):"Parent"===r?(i.b7t(t,((n={})[u]=N(o.parentId),n)),s.forEach(function(t){var t;i.b7t(t.lp,((t={})[u]=N(o.parentId),t))})):"Level"===r?i.b7t(t,((n={})[u]=e[t].level,n)):"Custom"===r&&i.g7t(t)))},P.prototype.b7t=function(t,n,r,i){this.A7t(t,n,r,i)},P.prototype.A7t=function(t,n,r,i){var e;this.I7t({action:d.UPDATE,index:t,item:n,x7t:!0,N7t:!0}),r&&r({type:d.UPDATE,success:!0})},P.prototype.C7t=function(t,n,r){for(var i,e,u,o,s,c,f,e=this,u=e.njt,o=e.Gjt(),s=u[t].getChildrenIndexes().concat(t),c=0;c<s.length;c++)f=s[c],e.b7t(f,((i={})[o]=u[f].level,i),n,r)},P.prototype.g7t=function(i,e,u){var o=this,s=!1,c=o.Gjt();(0,j.traversalTree)(o.zjt,function(t){var n,r,n,t;(s=i===t.lp?!0:s)&&(n=t.lp,t=o.k7t(t),(0,j.isNullOrUndefined)(t)||o.b7t(n,((n={})[c]=t,n),e,u))})},P.prototype.k7t=function(t){var n,r,i,e,r,i,n=this,r=n.Gjt(),i=n.r7t(),e,r=t.data[r],i=i(n.D7t(t));if(r!==i)return i},P.prototype.D7t=function(t){var n={};return Object.defineProperty(n,"data",{get:function(){return t.data}}),Object.defineProperty(n,"index",{get:function(){return t.getCurrentIndex()}}),Object.defineProperty(n,"parentData",{get:function(){return t.parent.isRoot?p:t.parent.data}}),n},P.prototype._7t=function(t,n,r){var i=this,t=i.c7t(t);return i.E7t(t.parent,n?t.getCurrentIndex():t.getCurrentIndex()+1,r)},P.prototype.j7t=function(t){var n=this,t=n.c7t(t),r=t.getPrevSibling(),n,n=(0,j.isNullOrUndefined)(r)?n.v7t(!1,m,t.lp):n.v7t(!1,r.lp,t.lp);return{sequence:n,offset:0}},P.prototype.O7t=function(t,n){var r,i,n,r=this;return t=r.s7t(t),i=r.j7t(t).sequence,(n=r._7t(t,!0,n)).sequence=i,r.p7t(!1,t),n},P.prototype.R7t=function(t){var n=this,t=n.c7t(t),r=t.getNextSibling(),r,r=(0,j.isNullOrUndefined)(r)?n.v7t(!0,m,t.lp):n.v7t(!0,r.lp,t.lp);return{sequence:r,offset:n.B7t(t)}},P.prototype.L7t=function(t,n){var r,i,n,r=this;return t=r.s7t(t),i=r.R7t(t).sequence,(n=r._7t(t,!1,n)).sequence=i,r.p7t(!0,t),n},P.prototype.F7t=function(t,n){var r,i,n,r=this;return t=r.s7t(t),i=r.j7t(t).sequence,(n=r._7t(t,!0,n)).sequence=i,r.T7t(t,!0,!0),r.p7t(!1,t),n},P.prototype.P7t=function(t){var n,t,r,i,r,r,n=this,t=n.c7t(t),r=t.children,r=0<r.length?(r=r[r.length-1],i=n.v7t(!0,m,r.lp),n.B7t(t)):(i=n.v7t(!0,m,t.lp),1);return{sequence:i,offset:r}},P.prototype.G7t=function(t,n){var r,i,n,r=this;return t=r.s7t(t),i=r.P7t(t).sequence,(n=r._7t(t,!1,n)).sequence=i,r.U7t(r.njt.length-1),r.p7t(!0,t),n},P.prototype.U7t=function(t){var n,t,r,n,t=this.c7t(t),r=t.getPrevSibling();(0,j.isNullOrUndefined)(r)||t.demote(r)},P.prototype.E7t=function(t,n,r){var i,e,u,o,o,i,i=this,e=i.njt,u=i.o7t(),o=i.$jt(),o=new g(i.Zjt({idField:u,sequenceField:o})),i=i.vjt+1;return(0,j.isNullOrUndefined)(r)||(0,j.isNullOrUndefined)(r[u])?o.id=C(i):o.id=r[u],o.lp=i-1,o.setParent(t,n),e.push(o),o},P.prototype.Xme=function(t){var n,r,n,n=this,r=this.f7t(),n=n.E7t(r,void 0,t);return n.sequence=1,n},P.prototype.H7t=function(t){var n,r,i,e,u,o,i,n,r,e=this,u=e.$jt(),o=e.Gjt(),i=e.Fjt();return"Parent"===i?((n={})[o]=N(t.parentId),n=n):"Level"===i?((r={})[o]=t.level,n=r):"Custom"===i&&(r=e.k7t(t),(0,j.isNullOrUndefined)(r)||((i={})[o]=r,n=i)),(0,j.isNullOrEmpty)(u)||((n=n||{})[u]=t.sjt()),n},P.prototype.z7t=function(t,n,r){var i,t,e,n,i=this,t=i.SEt(t);return n?(n=t.getNextSibling(),(0,j.isNullOrUndefined)(n)||(e=!1===r?n:t)):e=!1===r?t:t.getPrevSibling(),i.B7t(e)},P.prototype.B7t=function(t){var n,r,i,n=1,r=function(t){return t.children.reduce(function(t,n){return t+r(n)},t.children.length)};return(0,j.isNullOrUndefined)(t)?0:(i=r(t))+1},P.prototype.V7t=function(t){var n=this,t=n.SEt(t);return n.B7t(t)},P.prototype.Y7t=function(t){var n,r,r,n=this;n.isHierarchy()&&(r=n.o7t(),!(0,j.isNullOrUndefined)(r)&&R(t[r])&&(t[r]=m),"Parent"===n.Fjt())&&R(t[r=n.Gjt()])&&(t[r]=m)},P.prototype.Z7t=function(t,n){var r,i,r,e,u,o,s,i=this;i.isHierarchy()&&"Parent"===i.Fjt()&&(r=i.o7t(),(0,j.isNullOrUndefined)(r)||(u=(e=i.c7t(t)).children,o=e.id=e.JEt=i.Xjt(r,t),s=i.Gjt(),u.forEach(function(t){var t;t.XEt=o,i.b7t(t.lp,((t={})[s]=o,t))}),n&&(0,j.isNullOrEmpty)(n[s])&&!e.parent.isRoot&&!R(e.parentId)&&i.b7t(t,((r={})[s]=e.parentId,r))))},P.prototype.Tue=function(t){for(var n,r,i,e,u,n=[],r,i=0,e=(0,j.keys)(t);i<e.length;i++)t[u=e[i]].spread&&n.push(u);return n},P.prototype.Aue=function(t,n,r){var i,e,u,o,s,c,f,a,h,l,d,i=(0,j.keys)(t);if(0===i.length)return t;for(e={},u=0,o=i;u<o.length;u++)if(c=t[s=o[u]],0<=n.indexOf(s))for(f={},r&&(r[s]=f),l=a=(h=0,j.keys)(c);h<l.length;h++)d=l[h],0<=i.indexOf(d)?(e[s+"_"+d]=c[d],r&&(f[s+"_"+d]=d)):(e[d]=c[d],r&&(f[d]=d));else e[s]=c,r&&(r[s]=s);return e},P.prototype.Iue=function(t,r){var i,n,n,e,i=this,n=i.LEt,n=n&&n.schema&&n.schema.columns;return t=n&&0<(e=i.Tue(n)).length?t.map(function(t,n){return i.Aue(t,e,0===n?r:m)}):t},P.prototype.xue=function(t){var n,r,r,r,n=this,r=n.LEt,r=r&&r.schema&&r.schema.columns;return t=r&&0<(r=n.Tue(r)).length?n.Aue(t,r):t},P.prototype.Nue=function(t,n){var r,i,e,u,o,s,c,f,a,h,l,r=(0,j.keys)(n);if(0===r.length)return t;for(i={},e=0,u=r;e<u.length;e++)if("object"==typeof(s=n[o=u[e]]))for(i[o]=c={},h=f=(a=0,j.keys)(s);a<h.length;a++)c[s[l=h[a]]]=t[l];else"string"==typeof s&&(i[o]=t[s]);return i},P.prototype.kue=function(t){var n,r,n=this,r=n.Due;return t=r?t&&n.Nue(t,r):t},P.prototype.load=function(f){var a,n,h,a=this,n=a.options.remote,h=a.W7t(f);return a.yjt(h)?(a.ojt=!0,a.Q7t(h).then(function(t){var t={type:"read",data:n&&n.read&&!(0,j.isFunction)(n.read)?T(n.read.adapter,t):t};return a.ki(b,t)?Promise.reject({cancel:!0,type:"read",step:l}):a.djt.parse(t.data)}).then(function(t){return a.wjt=a.djt.total(t),a.djt.read(t)}).then(function(t){var n,r,i,e,u,o,s,c;if(a._data=(!f||!f.reload)&&a._data||{},a.vjt=a.vjt||0,a.DEt=(!f||!f.reload)&&a.DEt||[],t){for(t=(0,j.isArray)(t)?t:[t],t=a.qjt(t),a.Due={},t=a.Iue(t,a.Due),n=0,i=(r=a.Bjt())[0],e=r[1],u=0,o=t.length;u<o;u++)for(s in t[u])c=t[u][s],s=i[s]||s,a._data[s]||(a._data[s]={data:[]},a.DEt.push(s)),a._data[s].data[0+u]=a.Ajt(c,e[s]);a.vjt=0+t.length,t=a.K7t(h).data,a.ki(d.ONCHANGE,{action:d.INSERT,index:0,items:t})}return a.wjt=a.vjt,a.ki(_,{type:"read",success:!0,items:t}),t}).catch(function(t){var t=t&&!0===t.cancel?y+t.step:a.J7t(t);return a.ki(_,{type:"read",success:!1,reason:t}),Promise.reject(t)})):Promise.resolve(a.K7t(h).data)},P.prototype.$ue=function(t,n){for(var r,i,e,u,o,s,c,f,a,r=[],i=0,e=n.fields;i<e.length;i++)for(s=0,c=o=t[u=e[i]].data;s<c.length;s++)f=c[s],(a={})[n.as]=u,a[n.valueAs]=f,r.push(a);return r},P.prototype.AP=function(t){for(var n,r,i,e,u,o,s,n=[],r,i=0,e=Object.keys(t);i<e.length;i++)for(o=t[u=e[i]].data,s=0;s<o.length;s++)n[s]||(n[s]={}),n[s][u]=o[s];return n},P.prototype.loadSync=function(t,n){var r,i,n,e,n,u,o,s,c,f,a,r=this;if(r.ojt=!0,i=(0,j.isNullOrUndefined)(t)?n?r.AP(r._data):(n=r.hjt.getDataSync(),r.wjt=r.djt.total(n),r.djt.readSync(n)):r.$ue(r._data,t),r._data={},r.vjt=0,r.DEt=[],i){for(i=(0,j.isArray)(i)?i:[i],e=0,u=(n=r.Bjt())[0],o=n[1],s=0,c=i.length;s<c;s++)for(f in i[s])a=i[s][f],f=u[f]||f,r._data[f]||(r._data[f]={data:[]},r.DEt.push(f)),r._data[f].data[0+s]=r.Ajt(a,o[f]);return r.vjt=0+i.length,i=r.K7t().data,r.wjt=r.vjt,i}return[]},P.prototype.length=function(){return"number"==typeof this.wjt?this.wjt:this.vjt},P.prototype.setLength=function(t){var n=this,r=n._data,i;n.wjt?this.wjt=t:r&&(this.vjt=t)},P.prototype.K7t=function(t){var n,r,i,e,u,o,s,n=this,r=n.X7t(),i=0,e=n.vjt,u=r?n.s7t(0):0,o=n.q7t||[];for(r||(o=[]),s=[];0<e&&u<n.vjt;)o[u]||(s.push(n.bjt(u)),e--),u++;return{data:s}},P.prototype.$7t=function(t,n){var r,i,e,u,o,s,c,f,a,h,l,r=this,i=r.X7t(),e=0,u=r.vjt,o=i?r.s7t(0):0,s=r.q7t||[];if(0===(s=i?s:[]).length){for(c=[],f=0;f<t.length;f++)c[a=t[f]]=r.bjt(a);return{data:c}}for(h=[],l=0;0<u&&o<r.vjt;)s[o]||(-1<t.indexOf(l)&&(h[l]=r.bjt(o)),l++,u--),o++;return{data:h}},P.prototype.tOt=function(t){return(t?this.$7t(t):this.K7t()).data},P.prototype.nOt=function(t,n){var r,i,r,i,r,e,u,o,s,c,i=this,r=i.Fjt(),e=[];if(!(0,j.isNullOrUndefined)(n)&&t.length===n.length)if("Level"===r)for(u=0;u<t.length;u++)o=t[u],e.push(E(o,n[u]));else"ChildrenPath"===r&&(s=i.Yjt(i.Gjt()),c=[((r={})[s]=e,r)],F(((i={})[s]=t,i),((r={})[s]=n,r),s,function(t,n){var t,n,t=E(t,n);delete t[s],n=c[c.length-1],(0,j.isArray)(n[s])||(n[s]=[]),n[s].push(t),c.push(t)},function(){c.pop()}));return e},P.prototype.eOt=function(t){var n,r,i,e,i,u,o,n,s,c,f,a,h,r,l,d,r,e=this,i=e.Fjt();if(!(0,j.isNullOrUndefined)(t)){if(u=e.f7t(),s=e.Gjt(),"Level"===i){for(o="children",f=e.Yjt(s),(n={})[o]=[],n.data={},a=[n=n],h=0;h<t.length;h++){for(l=(r=t[h])[f],d=a[a.length-1];d.data.level>=l;)a.pop(),d=a[a.length-1];(r={data:r})[o]=[],r=r,d[o].push(r),a.push(r)}c=function(t){return t.data}}else"ChildrenPath"===i&&((i={})[o=s]=t,n=i,c=function(t){return t});F(u,n,{childrenField2:o},function(t,n){e._jt(c(n)),e.pjt(t.lp,c(n))})}},P.prototype.iOt=function(r,i,e,n){var u=this;return u.rOt({body:r},i).then(function(t){var n,t,t,n="batch"===i,t={type:i,batch:n,data:u.nOt(r,t)};return u.ki(b,t)?Promise.reject({cancel:!0,type:i,batch:n,step:b}):(r=t.data,u.eOt(r),t={type:i,success:!0,batch:n,items:(0,j.isArray)(r)?r:[r]},delete u.oOt,delete u.q7t,delete u.aOt,delete u.uOt,e&&e(t),u.ki(_,t),n?Promise.resolve(u.K7t()):m)}).catch(function(t){var t,t,t=t&&!0===t.cancel?y+t.step:u.J7t(t),t={type:i,success:!1,reason:t};u.ki(w,{type:t}),n&&n(t)})},P.prototype.sOt=function(){var t,t,t=this;if(t.isHierarchy())return"Level"===(t=t.Fjt())||"ChildrenPath"===t},P.prototype.cOt=function(r,i,t,n){var e,u,e,o,s,c,f,a,h,u=this,e=u.Fjt();return i=i||u.q7t||[],"Level"===e?(o=u.f7t(),s=[],(0,j.traversalTree)(o,function(t){var t,n,t=t.lp;i[t]||(n=u.bjt(t),("create"===r||"batch"===r&&u.isInserted(t,!0))&&u.Y7t(n),n=u.jjt(n),s.push(n))}),u.iOt(s,r,t,n)):"ChildrenPath"===e?(o=u.f7t(),c=u.Gjt(),f=u.Yjt(c),h=[((e={})[f]=a=[],e)],(0,j.traversalTree)(o,{invoking:function(t){var t,n,t,t=t.lp;i[t]||(n=u.bjt(t),("create"===r||"batch"===r&&u.isInserted(t,!0))&&u.Y7t(n),delete n[c],n=u.jjt(n),0<h.length&&(t=h[h.length-1],(0,j.isArray)(t[f])||(t[f]=[]),t[f].push(n)),h.push(n))},invoked:function(t){i[t.lp]||h.pop()}}),u.iOt(a,r,t,n)):Promise.resolve(void 0)},P.prototype.fOt=function(){var t,n,r,i,e,u,o,t,s,c,f,a,i,n=this;if(n.isHierarchy()){for(r=n.njt,i=n.f7t(),e=r.reduce(function(t,n){return(t[n.JEt]=n).id=n.JEt,n.sequence=n.$Et,n.parent=p,t},((t={})[i.JEt]=i,t)),u=0;u<r.length;u++)n.isInserted(u,!0)||((o=r[u]).parent=e[o.XEt]);if(t=n.options.schema.hierarchy.levelOffset||0,i.level=t-1,"Level"===n.Fjt()){for(s=n.Gjt(),c=m,u=0;u<r.length&&!n.isInserted(u,!0);u++)a=void 0,((a=(f=n.lOt(u))?f[s]:n.Xjt(s,u))<c||c===m)&&(c=a);i.level=c+t-1}n.njt=[],i=!(0,j.isNullOrEmpty)(n.$jt()),n.Hjt(i)}},P.prototype.cancelChanges=function(){var r,t,i,e,u,o,r=this,t=r.getHeldActions();t&&0!==t.length&&(r.fOt(),r.t7t(),i=r.aOt,e=r.q7t||[],u=r.oOt||[],o=[],(0,j.forEach)(t,function(t){var n=t.sourceIndex,t=t.type;t===d.UPDATE?(r.pjt(n,i[n]),u[n]=[!!u[n]&&u[n][0],!1]):t===d.DELETE?(e[n]=m,u[n]&&u[n][0]?o.push(n):u[n]&&u[n][1]&&(r.pjt(n,i[n]),u[n]=[!1,!1]),(0,j.isNullOrUndefined)(r.wjt)||(r.wjt+=1)):t===d.INSERT&&o.push(n)}),(0,j.forEachRight)(o,function(t){r.mjt(t,1),u.splice(t,1),(0,j.isNullOrUndefined)(r.wjt)||--r.wjt}),r.clearBatchCache_())},P.prototype.getChanges=function(){return this.hOt(!1)},P.prototype.isDataLengthChanged=function(){return this.getChanges().some(function(t){return"delete"===t.type||"insert"===t.type})},P.prototype.submitChanges=function(e){var u,n,o,s,c,f,a,h,u=this;return u.hasCachedActions()?u.sOt()?(n=(u.q7t||[]).slice(),u.cOt("batch",m,function(){for(var t=u.vjt-1;0<=t;t--)!0===n[t]&&(u.mjt(t,1),u.njt[t].parent=p,u.njt.splice(t,1));u.njt.forEach(function(t,n){t.lp=n})})):(o=u.aOt,s=u.q7t||[],c=u.oOt||[],f=u.getHeldActions(),a=[],h=d.UPDATE,(0,j.isNullOrUndefined)(f)||f.forEach(function(t){t.dataItem=u.kue(u.jjt(t.dataItem)),t.oldDataItem=u.kue(u.jjt(t.oldDataItem))}),u.rOt({body:f},"batch").then(function(t){var t,r,i,t,t={type:h,batch:!0,data:t};return u.ki(b,t)?Promise.reject({cancel:!0,type:h,batch:!0,step:b}):(((r=t.data)||[]).forEach(function(t){t.succeed&&t.data&&(u._jt(t.data),t.data=u.xue(t.data))}),r.length,f.length,i=[],(0,j.forEach)(f,function(t,n){var n=r[n];n.succeed?t.type===d.UPDATE?(o&&(o[t.sourceIndex]=m),c[t.sourceIndex][1]=m):t.type===d.INSERT?(n.data&&(u.pjt(t.sourceIndex,n.data),u.Z7t(t.sourceIndex,n.data)),c[t.sourceIndex]=[],o[t.sourceIndex]=m):t.type===d.DELETE&&a.push(t.sourceIndex):i.push({localAction:t,response:n})}),(0,j.forEachRight)(a,function(t){s.splice(t,1),u.mjt(t,1),o&&o.splice(t,1),c.splice(t,1),u.isHierarchy()&&(u.njt[t].parent=p,u.njt.splice(t,1))}),u.isHierarchy()&&u.njt.forEach(function(t,n){t.lp=n}),0<i.length?(t={type:h,errorData:i},u.ki(w,{type:t})||(u.uOt=[],(0,j.forEach)(i,function(t,n){var r=t.response,t=t.localAction,i=t.sourceIndex;t.type===d.DELETE&&(s[i]=m),u.dOt(i,{type:t.type,success:!1,reason:r.reason}),e(i,r.reason,t.type)}))):delete u.uOt,Promise.resolve(u.K7t()))}).catch(function(t){var t,n,t=t&&!0===t.cancel?y+t.step:u.J7t(t),n;u.ki(w,{type:{type:h,reason:t}})})):Promise.resolve(void 0)},P.prototype.getHeldActions=function(){var t=this;return t.hasCachedActions()?t.hOt(!0):p},P.prototype.hOt=function(t){for(var n,r,i,e,u,o,s,c,f,a,h,l,o,o,n=this,r=[],i=n.oOt||[],e=n.q7t||[],u=n.aOt,c=n.isHierarchy(),f=0;f<n.vjt;f++){if(o=i[f],!(s=null)===e[f])s={type:d.DELETE,dataItem:n.bjt(f)};else if(o&&o[0])s={type:d.INSERT,dataItem:n.bjt(f)},t&&c&&n.Y7t(s.dataItem);else if(o&&o[1]){if(a=u[f],h=n.bjt(f),!t)for(l in a=v({},a))a.hasOwnProperty(l)&&a[l]===h[l]&&(delete a[l],delete h[l]);s={type:d.UPDATE,dataItem:h,oldDataItem:a}}s&&(c&&s.type===d.INSERT&&R((o=n.c7t(f).parent).id)&&(o=o.isRoot?m:o.lp,t?s.sourceParentIndex=o:s.parentIndex=(0,j.isNumber)(o)?n.TEt(o):m),t?s.sourceIndex=f:s.index=this.TEt(f),r.push(s))}return r},P.prototype.clearBatchCache_=function(){var t=this;delete t.q7t,delete t.aOt,delete t.uOt},P.prototype.hasCachedActions=function(){var t,n,t,r,i,e,u,o,s,t=this;if(t.X7t()&&(n=t.oOt,t=t.q7t,n||t)){if(t)for(r=0,i=t;r<i.length;r++)if(e=i[r])return!0;if(n)for(u=0,o=n;u<o.length;u++)if((s=o[u])&&(!0===s[0]||!0===s[1]))return!0}return!1},P.prototype.bind=function(t,n){var r,i,e,u,o,s,c,r=this;if(n)for(u=i=(e=0,j.isArray)(t)?t:[t];e<u.length;e++)o=u[e],(s=(0,j.isFunction)(n)?n:n[o])&&(c=r._events[o]=r._events[o]||new f.Event).addHandler(s,r)},P.prototype.unbind=function(t,n){var r,t,r=this;(0,j.isNullOrUndefined)(t)?((0,j.forEach)(r._events,function(t){t.removeAllHandlers()}),r._events={}):(t=r._events[t])&&(n?t.removeHandler(n,r):t.removeAllHandlers())},P.prototype.ki=function(t,n){var r,i,r=this,i=r._events[t];return!!i&&((n=n||{}).cancel=!1,n.eventName=t,i.raise(r,n),n.cancel)},P.prototype.vOt=function(t){var n=this;return n._events.hasOwnProperty(t)&&n._events[t].hasHandlers},P.prototype.W7t=function(t){return t=v({},t)},P.prototype.mOt=function(t){return t},P.prototype.getDirtyIndexes=function(){var t,n=this.oOt||[];return(0,j.keys)(n).map(function(t){return parseInt(t,10)})},P.prototype.gOt=function(t,n){var r=this,i;return(r.oOt||[])[t=n?t:r.s7t(t)]||[]},P.prototype.isInserted=function(t,n){return this.gOt(t,n)[0]},P.prototype.isUpdated=function(t){return this.gOt(t)[1]},P.prototype.getErrorInfo=function(t){var n=this,r=n.uOt;if(!(0,j.isNullOrUndefined)(r))return r[t=n.s7t(t)]},P.prototype.dOt=function(t,n){var r=this,i;(r.uOt=r.uOt||[])[t]=n},P.prototype.pOt=function(){this.oOt=m,this.q7t=m,this.aOt=m,this.uOt=m},P.prototype.lOt=function(t){var n=this,r;return(n.aOt=n.aOt||[])[t]},P.prototype.insertItem=function(t,n,r,i){var e=this;t=e.s7t(t),e.I7t({action:d.INSERT,index:t,item:n,N7t:!0}),e.isHierarchy()&&"Custom"===e.Fjt()&&e.g7t(t),r&&r({type:d.CREATE,success:!0})},P.prototype.updateItem=function(t,n,r,i){var e;this.I7t({action:d.UPDATE,index:t,item:n}),r&&r({type:d.UPDATE,success:!0})},P.prototype.updateItemValues=function(t,n,r,i){var e;this.I7t({action:d.UPDATE,index:t,item:n,x7t:!0}),r&&r({type:d.UPDATE,success:!0})},P.prototype.resetItem=function(t,n,r){var i,e,u,i=this,e,u=(i.aOt=i.aOt||[])[t=i.s7t(t)];i.isHierarchy()&&(u=i.bOt(t,u)),i.pjt(t,u),i.clearChangedStatus(t),i.dOt(t),n&&n({type:d.UPDATE,success:!0})},P.prototype.bOt=function(t,n){var r,i,t,e,u,r,o,r=this,i;return r.isHierarchy()?(t=r.bjt(t),e=r.Fjt(),u=r.Gjt(),r=r.$jt(),o=v({},n),"Parent"!==e&&"Level"!==e&&"Custom"!==e||(o[u]=t[u]),(0,j.isNullOrEmpty)(r)||(o[r]=t[r]),o):n},P.prototype.saveItem=function(t,n,r){var i,e,u,o,s,c,u,f,i=this;t=i.s7t(t),o=(u=(e=i.oOt||[])[t]||[])[0],s=u[1],0<u.length&&(o||s)&&(i.isHierarchy()&&(f=!(u=(c=i.njt)[t].parent).isRoot&&e[u.lp]&&e[u.lp][0])?r&&r({type:d.CREATE,success:!1}):i.yOt(t,i.bjt(t),o?d.INSERT:d.UPDATE,n,r))},P.prototype.yOt=function(n,r,t,i,e){var u=this,t=t===d.INSERT,o=t?d.CREATE:d.UPDATE,s=u.X7t(),c=u.wOt(o),f=u.MOt();s||!c||f?f&&(u.oOt[n]=[],u.aOt[n]=m,i)&&i({type:o,success:!0}):u.sOt()?u.cOt(t?d.CREATE:d.UPDATE,m,i,e):(t&&u.Y7t(r),r=u.jjt(r),r=u.kue(r),u.rOt({body:r},t?d.CREATE:d.UPDATE).then(function(t){var t,t,t={type:o,data:E(r,t)};return u.ki(b,t)?Promise.reject({cancel:!0,type:o,step:b}):(u._jt(t.data),t.data=u.xue(t.data),u.pjt(n,t.data),u.oOt[n]=[],u.aOt[n]=m,u.dOt(n),t={type:o,success:!0,items:[t.data]},o===d.CREATE&&u.Z7t(n),i&&i(t),u.ki(_,t),m)}).catch(function(t){var t,t,t=t&&!0===t.cancel?y+t.step:u.J7t(t),t={type:o,success:!1,reason:t};u.dOt(n,t),u.ki(w,{type:t}),e(t)}))},P.prototype.I7t=function(t){var n,r,i,e,u,o,s,c,f,a,h,h,n=this,r=n.X7t(),i=n.aOt=n.aOt||[];r&&(e=n.q7t=n.q7t||[]),u=t.action,o=t.index,s=t.item,c=t.x7t,o=(f=t.N7t)?o:n.s7t(o),n.oOt=n.oOt||[],a=n.oOt,u===d.INSERT?(0===n.vjt&&0===n.DEt.length&&n.COt(),n.vjt<o&&(n.vjt=o),(0,j.isNullOrUndefined)(h=o)&&(h=n.vjt),n.mjt(h,0,s),i.length>=o?i.splice(o,0,v({},s)):i[o]=v({},s),r&&(e.length>=o?e.splice(o,0,m):e[o]=m),a.length>=o?a.splice(o,0,[!0]):a[o]=[!0],(0,j.isNullOrUndefined)(n.wjt)||(n.wjt+=1),n.ki(d.ONCHANGE,{action:u,index:o,items:[t.item]})):u===d.UPDATE&&(h=n.bjt(o),i[o]||(i[o]=v({},h)),n.pjt(o,s,c),n.oOt[o]?n.oOt[o]=[n.oOt[o][0],!0]:n.oOt[o]=[!1,!0],M(s,i[o])&&n.clearChangedStatus(o),n.ki(d.ONCHANGE,{action:u,index:o,items:[t.item],oldItems:[h]}))},P.prototype.clearChangedStatus=function(t){var n=this;!(n.oOt[t][1]=!1)!==n.oOt[t][0]&&(n.aOt[t]=m)},P.prototype.get=function(t){var n,r,i,e,u,o,n=this,r=n._data;if(t=n.s7t(t),r&&t<n.vjt){for(i={},e=0,u=n.DEt;e<u.length;e++)i[o=u[e]]=r[o].data[t];return i}return m},P.prototype.Xjt=function(t,n){var r=this,i=r._data;return i&&i[t]&&n<r.vjt?i[t].data[n]:m},P.prototype.getFieldValue=function(t,n){var r=this,i=r._data;return n=r.s7t(n),i&&i[t]&&n<r.vjt?i[t].data[n]:m},P.prototype.getFieldOriginalValue=function(t,n){var r,i,r,r=this,i=r._data;return n=r.s7t(n),i&&i[t]&&n<r.vjt?(r=r.lOt(n),(0,j.isNullOrUndefined)(r)?i[t].data[n]:r[t]):m},P.prototype.SOt=function(n,r,i){var e,t,u,o,s,c,f,s,e=this,t;e.X7t()||!e.wOt(d.DELETE)||e.MOt()||e.isInserted(n)||!e.sOt()?e.isHierarchy()&&(n=e.s7t(n),u=e.c7t(n),s=(f=u.getChildrenIndexes(!0).concat(n)).map(function(r){return function(t,n){e.TOt(r,1,t,n)}}),(0,j.promiseSerialExecute)(s).then(function(t){e.X7t()||(f.sort(function(t,n){return n-t}),f.forEach(function(t){e.tX(t,1,!1)}),e.njt.forEach(function(t,n){t.lp=n})),"Custom"===e.Fjt()&&e.g7t(n+(e.X7t()?f.length:0));var t=t[t.length-1];t.removedCount=f.length,r&&r(t)}).catch(function(t){i&&i(t)})):(n=e.s7t(n),u=e.c7t(n),s=(o=u.getChildrenIndexes(!0).concat(n)).reduce(function(t,n){return t[n]=!0,t},[]),e.bind(b,c=function(){o.forEach(function(t){e.tX(t,1,!1)}),e.njt.forEach(function(t,n){t.lp=n})}),e.cOt(d.DELETE,s,function(t){e.unbind(b,c),t.removedCount=o.length,r&&r(t)},function(t){e.unbind(b,c),i&&i(t)}))},P.prototype.remove=function(t,n,r,i){var e=this;e.isHierarchy()?e.SOt(t,r,i):e.TOt(t,n,r,i)},P.prototype.TOt=function(r,i,e,n){var u,t,o,s,c,u=this,t=u.X7t();r<0||r>=(t?u.vjt:u.length())||(o=d.DELETE,t||!u.wOt(d.DELETE)||u.MOt()||u.isInserted(r)?(!t&&u.isHierarchy()||u.tX(r,i),e&&e(s={type:o,success:!0})):(c=u.gjt(r,r+i),u.Ejt(c),c=c.map(function(t){return u.kue(t)}),u.rOt({body:c},d.DELETE).then(function(t){var n;return u.ki(b,{type:o,data:c})?Promise.reject({cancel:!0,type:o,step:b}):(u.isHierarchy()||u.tX(r,i),u.Ejt(c,{isServerToClient:!0}),c=c.map(function(t){return u.xue(t)}),u.dOt(r),n={type:o,success:!0,items:[c]},e&&e(n),u.ki(_,n),m)}).catch(function(t){var t,t,t=t&&!0===t.cancel?y+t.step:u.J7t(t),t={type:o,success:!1,reason:t};u.dOt(r,t),u.ki(w,{type:t}),n(t)})))},P.prototype.tX=function(t,n,r){var i,e,u,o,s,e,c,f,a,h,l,e,i=this,e=i.X7t(),o=i.oOt||[],s=i.aOt||[];if(e){for(e=void 0,c=i.q7t=i.q7t||[],f=n,a=[],u=[],i.isHierarchy()?((h=i.njt)[e=t].parent=p,i.y7t(t,n)):e=i.s7t(t),l=e;l<i.vjt&&(!0!==c[l]&&u.length<n&&(u.push(i.bjt(l)),a.push(l),c[l]=!0,--f),0!==f);l++);(0,j.forEachRight)(a,function(t){o[t]&&o[t][0]&&(c.splice(t,1),o.splice(t,1),s.splice(t,1),i.mjt(t,1))})}else u=i.mjt(t,n),o.splice(t,n),s.splice(t,n),i.isHierarchy()&&((h=i.njt)[t].parent=p,i.y7t(t,n),h.splice(t,n),!1!==r)&&h.forEach(function(t,n){t.lp=n});e=u.length,(0,j.isNullOrUndefined)(i.wjt)||(i.wjt-=e,i.wjt=Math.max(i.wjt,0)),i.ki(d.ONCHANGE,{action:d.DELETE,items:u})},P.prototype.COt=function(){var t,n,r,i,n=this,r=null==(t=n.options.schema)?void 0:t.columns;if(r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n._data[i]={data:[]},n.DEt.push(i))},P.prototype.MOt=function(){return(0,j.isNullOrUndefined)(this.options.remote)},P.prototype.X7t=function(){var t;return!!this.options.batch&&!this.MOt()},P.prototype.wOt=function(t){var n,r,n,n=this,r=n.options,n=n.hjt;return!!r.autoSync&&!(0,j.isNullOrUndefined)(n.LEt[t])},P.prototype.rOt=function(t,n){var r,i,r=this,i=n||d.UPDATE;return!(t=r.hjt.setupRequestOptions(t,n||d.UPDATE))||r.ki(l,{type:i,requestParams:t})?Promise.reject({cancel:!0,type:i,step:l}):r.hjt.postData(t)},P.prototype.Q7t=function(t){var n=this;return t=n.mOt(t),!(t=n.hjt.setupRequestOptions(t,"read"))||n.ki(l,{type:"read",requestParams:t})?Promise.reject({cancel:!0,type:"read",step:l}):n.hjt.getData(t)},P.prototype.J7t=function(t){return(0,j.isString)(t)?t:t instanceof Error?t.message:"some error happened"},P.prototype.s7t=function(t){var n,r,i,e,u,n=this.q7t;if((0,j.isNullOrUndefined)(n)||0===n.length)return t;for(e=i=r=0,u=n.length;e<=u;e++)if(n[e])i+=1;else{if(r===t)break;r+=1}return t+i},P.prototype.TEt=function(t){var n,r,i,n=this.q7t;if(!(0,j.isNullOrUndefined)(n)&&0!==n.length)for(r=0,i=Math.min(n.length,t);r<=i;r++)n[r]&&--t;return t},d.DataSource=P},"./dist/src/dataSource/dataTransport/localDataTransport.js":function(t,n){"use strict";var r,i;function e(t){t&&(this._data=t.data,this.LEt=r({},t))}r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(n,"__esModule",{value:!0}),n.LocalDataTransport=void 0,e.prototype.getData=function(t){var n;return Promise.resolve(this._data)},e.prototype.getDataSync=function(){return this._data},e.prototype.postData=function(t){var n;return Promise.resolve(this._data)},e.prototype.setupRequestOptions=function(t,n){return{}},n.LocalDataTransport=e},"./dist/src/dataSource/dataTransport/remoteDataTransport.js":function(t,n,r){"use strict";var c,o,s,i,f,a,h,l,d,v,p,e;function u(t){var n;this.LEt=c({},t)}c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteDataTransport=void 0,r("./node_modules/whatwg-fetch/fetch.js"),o=r("./node_modules/fetch-jsonp/build/fetch-jsonp.js"),s=r("./dist/src/dataSource/utils.js"),i=null,f=void 0,a="jsonp",h="read",l="create",d="update",v="delete",p="Content-Type",u.prototype.getData=function(t){var n,r,i,e,u,n=this,r,i=this.LEt[t.requestType],e=t.dataType,u=e===a?o:fetch;return t.requestData=f,(t.requestType=f,s.isFunction)(i)?i(t):u(t.url,t).then(function(t){if(t.ok)return n.AOt(e)?t.json():t.text();throw t})},u.prototype.postData=function(t){var n,r,i,e,u,n=this,r,i=this.LEt[t.requestType],e=t.dataType,u=t.requestData;return t.requestData=f,(t.requestType=f,s.isFunction)(i)?i(u,t):fetch(t.url,t).then(function(t){if(t.ok)return n.AOt(e)?t.json():t.text();throw t})},u.prototype.AOt=function(t){return void 0===t||"json"===t||t===a},u.prototype.setupRequestOptions=function(t,n){var r,i,e,u,o,s,r;if(t=t||{},i=(r=this).LEt[n])return e=i.body,(u=t.body)?(t.headers=t.headers||{},r.LEt.dataConverter?(t.body=u=r.LEt.dataConverter(u,n||h),t.headers[p]="application/plain;"):(t.body="string"==typeof u?u:JSON.stringify(u),t.headers[p]="application/json; charset=utf-8")):e&&(t.body="string"==typeof e?e:JSON.stringify(e),t.headers={},t.headers[p]="application/json; charset=utf-8"),r=i.method,n===h?(i.dataType===a&&(o={mode:"no-cors"}),s={method:r||"GET"}):n===l||n===d||"batch"===n?s={method:r||"POST"}:n===v&&(s={method:r||"DELETE"}),c(c(c(c(c({},i),s),o),t),{requestType:n,requestData:u})},n.RemoteDataTransport=u},"./dist/src/dataSource/event.js":function(t,n){"use strict";var e,c,r;function i(t,n,r){var i=this;i.handler=t,i.owner=n,i.priority=r}function u(){this.IOt=[]}Object.defineProperty(n,"__esModule",{value:!0}),n.Event=n.EventHandler=void 0,e=i,n.EventHandler=e,c=null,Object.defineProperty(u.prototype,"hasHandlers",{get:function(){return 0<this.IOt.length},enumerable:!1,configurable:!0}),u.prototype.addHandler=function(t,n,r){var i=this,t=new e(t,n,r=void 0===r?1:r);i.IOt.push(t),i.sortHandlers()},u.prototype.removeHandler=function(t,n){for(var r,i,e,u,o,r=this,i=r.IOt,e=i.length,u=0;u<e;u++)if((o=i[u]).handler===t&&o.owner===n){r.IOt.splice(u,1);break}},u.prototype.sortHandlers=function(){this.IOt.sort(function(t,n){var t=t.priority,n=n.priority;return t<n?1:n<t?-1:0})},u.prototype.removeHandlersByPriority=function(t){for(var n,r,i,e,u,o,s,n=this,r=n.IOt,i=r.length,e=c,u=c,o=0;o<i;o++)if((s=r[o]).priority===t)e===c&&(e=o),u=o;else if(e!==c)break;e!==c&&u!==c&&n.IOt.splice(e,u-e+1)},u.prototype.removeAllHandlers=function(){this.IOt.length=0},u.prototype.raise=function(t,n){var r,i,i,e,u,o,s,r=!1,i=function(){r=!0};for(n===c?n={stopPropagation:i}:n.stopPropagation=i,e=(i=this).IOt.length,u=i.IOt.slice(0,e),o=0;o<e&&!r;o++)(s=u[o]).handler.call(s.owner,t,n)},n.Event=u},"./dist/src/dataSource/utils.js":function(D,s,t){"use strict";var e,o,c,f,a,h;function n(t){return t&&!(0,s.isArray)(t)&&"object"==typeof t}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function u(t){return"boolean"==typeof t}function l(t,n){var r,i,e,u,o;if((0,s.isArray)(t))for(r=0;r<t.length;r++)n(t[r],r,t);else for(e=0,u=i=Object.keys(t);e<u.length;e++)n(t[o=u[e]],o,t)}function d(t,n){var r,i,e,u,o;if((0,s.isArray)(t))for(r=t.length-1;0<=r;r--)n(t[r],r,t);else for((i=Object.keys(t)).reverse(),e=0,u=i;e<u.length;e++)n(t[o=u[e]],o,t)}function v(t){return Object.keys(t)}function p(t,n,r){if((0,s.isArray)(t))return t.reduce(n,r);throw new Error("NOT SUPPORT")}function w(t,n,r){return t.indexOf(n,r=void 0===r?0:r)}function b(t,n){for(var r=0,i=t.length;r<i;r++)if(n(t[r],r,t))return r;return-1}function j(t,n){var r,i,e,u,o,s,c;if(void 0===n&&(n=!1),!C(t)&&"object"==typeof t){if(t&&t instanceof Array)return t.map(function(t){return j(t,n)});if(t&&"object"==typeof t){for(r={},e=0,u=i=v(t);e<u.length;e++)s=t[o=u[e]],n?(c=N(s),r[o]="object"===c||"array"===c?j(s,n):s):r[o]=s;return r}}return t}function m(t,n){var r,i,e;for(void 0===t&&(t=[]),void 0===n&&(n=[]),r={},i=Math.min(t.length,n.length),e=0;e<i;e++)r[t[e]]=n[e];return r}function _(t){return"string"==typeof t}function y(t,n){var r,i,e,u;if(_(n))return t[n];for(r={},i=0,e=n;i<e.length;i++)r[u=e[i]]=t[u];return r}function g(t,n){if((0,s.isArray)(t))return t.map(n);throw new Error("NOT SUPPORT")}function O(t){return void 0===t}function S(t){return null===t}function C(t){return O(t)||S(t)}function R(t){return""===t||C(t)}function N(t){var n;return Object.prototype.toString.call(t).match(/\[\w+\s(\w+)\]/)[1].toLowerCase()}function T(t,n,r,i){n<0||n>t.length||r<0||r>t.length||n===r||i<=0||t.splice.apply(t,e([r-(n<r?i-1:0),0],t.splice(n,i),!1))}function E(t,n){var t=t.parent;t&&(n(t),E(t,n))}function F(t,n,r,i){var e,u,o,s,c,f,a,h,l,d,v,e=t[i||"children"]||[];for(R(r)?u=e.slice():(f=c=void 0,"string"==typeof r?o=r:"function"==typeof r?s=r:"object"==typeof r&&(o=r.field,s=r.getValue,c=r.compareFn,f=r.isOrderChildren),u=f?e:e.slice(),o?u.sort(function(t,n){return t[o]-n[o]}):s?u.sort(function(t,n){return s(t)-s(n)}):c&&u.sort(c)),"object"==typeof(a=n)&&(a=n.invoking,h=n.invoked),d=0;d<u.length;d++){if(v=u[d],a&&(l=a(v,t))&&l.cancel)return l;if((l=l&&l.cancelDeepRecursion?l:F(v,n,r,i))&&l.cancel)return l;if(h&&(l=h(v,t))&&l.cancel)return l}}function L(t){return t}function M(r){return void 0===r&&(r=0),new Promise(function(t,n){setTimeout(function(){t("timeout")},r)})}function I(t){var n=t.callback,r=t.timeout,r=void 0===r?5e3:r,t=t.retryCount,i=void 0===t?1:t;return Promise.race([n(),M(r)]).then(function(t){if("timeout"!==t)return Promise.resolve(t);if(0<i)return I({callback:n,retryCount:--i});throw"timeout"})}function x(t,n){return A(t.map(function(t){return function(){return new Promise(t)}}),n)}function A(t,r){var i=[];return t.reduce(function(t,n){return t.then(function(t){return i.push(Promise.resolve(t)),r?I({callback:n,timeout:r.timeout,retryCount:r.retryCount}):n()})},Promise.resolve({})).then(function(t){return i.shift(),i.push(Promise.resolve(t)),Promise.all(i)})}function P(t){return"string"==typeof t&&("="===t.charAt(0)||0<=t.indexOf("{{")&&0<=t.indexOf("}}"))}function k(t){return!C(t._error||t._code)}function V(t){var n;return C(t)||C(n=t._error||t._code)?t:n}function G(n,t){var r,r,i,e,u;if(C(n)||""===n)return"";if(r=P(t),!t||"General"===t||r)return"boolean"==typeof n||n instanceof Boolean?(n=c?n?c.getBoolean().boolean_true:c.getBoolean().boolean_false:n).toString().toUpperCase():n instanceof Date?(i=(r=f.Fe(f.culture()).DateTimeFormat).shortDatePattern,0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&0===n.getMilliseconds()||(i=r.defaultDatePattern),h.Pe(n,i)):(n="number"==typeof n?a.Ge(n.toString()):n).toString();try{return(e=o.Formatter&&o.Formatter.GeneralFormatter)?(u=null,(u="string"==typeof t?new e(t):t).format(n,{})):n.toString()}catch(t){return n.toString()}}function q(t,n){var r,i;if(!C(t)&&!C(n))for(r=n.split(".");0<r.length;)t=t[i=r.shift()];return t}function B(t){var n,r,i,e,u;if(t&&0<t.length){for(n={},r=[],i=0,e=t;i<e.length;i++)n[u=e[i]]||(n[u]=!0,r.push(u));return r}return t}e=this&&this.__spreadArray||function(t,n,r){if(r||2===arguments.length)for(var i=0,e=n.length,u;i<e;i++)!u&&i in n||((u=u||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(s,"__esModule",{value:!0}),s.getUniqueArray=s.q$=s.format=s.formatCalcError=s.isCalcError=s.promiseAllSerial=s.promiseSerialExecute=s.traversalTree=s.bubbleTree=s.swapArrayItems=s.getActualType=s.isNullOrEmpty=s.isNullOrUndefined=s.isNull=s.isUndefined=s.map=s.pick=s.isString=s.zipObject=s.clone=s.findIndex=s.indexOf=s.reduce=s.keys=s.forEachRight=s.forEach=s.isBoolean=s.isNumber=s.isFunction=s.isObject=s.isArray=void 0,o=t("Common"),c=t("CalcEngine"),f=o.Common.CultureManager,a=o.Common.st,h=o.Common.ct,s.isArray=Array.isArray,s.isObject=n,s.isFunction=r,s.isNumber=i,s.isBoolean=u,s.forEach=l,s.forEachRight=d,s.keys=v,s.reduce=p,s.indexOf=w,s.findIndex=b,s.clone=j,s.zipObject=m,s.isString=_,s.pick=y,s.map=g,s.isUndefined=O,s.isNull=S,s.isNullOrUndefined=C,s.isNullOrEmpty=R,s.getActualType=N,s.swapArrayItems=T,s.bubbleTree=E,s.traversalTree=F,s.promiseSerialExecute=x,s.promiseAllSerial=A,s.isCalcError=k,s.formatCalcError=V,s.format=G,s.q$=q,s.getUniqueArray=B},"./dist/src/interfaces/conditionalFormatOptions.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.c=void 0,n.c=0},"./dist/src/interfaces/interface.js":function(t,n){"use strict";var r,i,e,u,o,o,o,o;Object.defineProperty(n,"__esModule",{value:!0}),n.RelationshipMap=n.RowColumnStates=n.StateRuleDirection=n.ViewArea=n.DEFAULT_VIEW_NAME=void 0,n.DEFAULT_VIEW_NAME="defaultView",(o=r=n.ViewArea||(n.ViewArea={}))[o.colHeader=1]="colHeader",o[o.viewport=3]="viewport",(o=i=n.StateRuleDirection||(n.StateRuleDirection={}))[o.none=0]="none",o[o.row=1]="row",o[o.column=2]="column",o[o.both=3]="both",(o=e=n.RowColumnStates||(n.RowColumnStates={}))[o.hover=1]="hover",o[o.readonly=4]="readonly",o[o.active=16]="active",o[o.selected=32]="selected",o[o.dirty=64]="dirty",o[o.inserted=128]="inserted",o[o.updated=256]="updated",o[o.pin=1024]="pin",o[o.primaryKey=2048]="primaryKey",o[o.required=4096]="required",(o=u=n.RelationshipMap||(n.RelationshipMap={}))[o.OneToOne=0]="OneToOne",o[o.OneToMany=1]="OneToMany"},"./dist/src/interfaces/styleOptions.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.s=void 0,n.s=0},"./dist/src/interfaces/validatorOptions.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.v=void 0,n.v=0},"./dist/src/query.js":function(t,n,r){"use strict";var n,W,K,s,o,i,e,J;function M(t,n){var r,i,e,u,o;if(n&&0<(r=(0,W.keys)(n)).length)for(i=0,e=r;i<e.length;i++)o=n[u=e[i]],t=t.replace(new RegExp("\\[@"+u+"\\]","g"),o.substring(1));return t}function $(t){for(var n,r,n=[],r=0;r<t.length;r++)n[t[r]]=r;return n}function Y(t,n){for(var r,i,e,u,o,s,c,f,a,h,l,d,r=[t],i=0;i<n;){for(e=0,u=r.length;e<u;e++)if((o=r.shift()).childrenArray&&o.childrenArray[0])for(c=o.childrenArray[s=0];s<c.length;s++)f=c[s],r.push(f);i++}for(a=[],h=0,l=r;h<l.length;h++)a.push((d=l[h]).recordRowNumbers[0]);return{indexMap:a,queue:r}}function l(t,n,r){var i,t,i=t?n:r,t=t?r:n;return(0,W.isNullOrUndefined)(i)&&(0,W.isNullOrUndefined)(t)?0:(0,W.isNullOrUndefined)(i)?-1:(0,W.isNullOrUndefined)(t)?1:"number"==typeof i||i instanceof Date?i-t:t<i?1:i<t?-1:0}function u(t,n,s){for(var r,i,e,u,o,c,f,a,h,r=[t],i=0;i<n.length;){for(e=0,u=r.length;e<u;e++)if((o=r.shift()).sort(function(t,n){for(var r,i,e,u,o,r=0,i=0,e=s;i<e.length;i++)if(o=(u=e[i]).field,0===(r=l(u.ascending,t[o],n[o])))return r;return r}),i<n.length-1)for(c=n[i+1].field,f=0,a=o;f<a.length;f++)h=a[f],r.push(h[c]);i++}}function y(t,n,r,i){for(var e,u,o,s,c,f,e,u={},o=0,s=(0,W.keys)(t);o<s.length;o++)c=s[o],-1!==r.indexOf(c)?(f=i(c))!==c&&(t[f]=t[c],delete t[c]):-1===n.indexOf(c)&&(u[c]=t[c],delete t[c]);return u}function g(t,n,r,i){for(var e,u,e=i;0<=e;e--)if(t[u=r[e].caption||r[e].field]!==n[u])return;return 1}function c(m,_){var t,n;if(2<=_.length)for(t=function(r){for(var t,n,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j,t=r===_.length-1?"$rows":_[r+1].field,n=[],i=_[r-1].caption||_[r-1].field,e=_[r].caption||_[r].field,u=_[r].summaryFields,o=u.map(function(t){return t.caption}),s=u.map(function(t){var n=(0,K.tse)(r);return t.caption+"_"+t.slice+n}),c=function(t){var n=(0,K.tse)(r);return n?t.substring(0,t.lastIndexOf(n)):t},f=0,a=m;f<a.length;f++)if(l=(h=a[f])[i],0!==n.length&&g(n[n.length-1],h,_,r-1)){for(y(h,o.concat(e,t),s,c),b=0,j=o;b<j.length;b++)w=j[b],n[n.length-1][w]+=h[w];n[n.length-1][e].push(h)}else{for((d=y(h,o.concat(e,t),s,c))[i]=l,v=0,p=o;v<p.length;v++)d[w=p[v]]=h[w];d[e]=[h],n.push(d)}m=n},n=_.length-1;0<n;n--)t(n);return m}function X(t,n,r,i){var i,e;n=c(n,r),i&&u(n,r,i),n&&0<n.length&&(t[e=(i=r[0]).caption||i.field]=n)}function z(t,n){var r,i,e,u,o,s,c,f,a,E,h,l,d,v,p,u,F,w,b,j,m,_,o,y,u,g,O,S,S,C,r={},i=[],u=t.select;if(u&&(o=u.fields,e=u.limit,o))for(s=0,c=o;s<c.length;s++)f=c[s],(0<=n.indexOf(f)||0<=f.indexOf("."))&&i.push({value:f}),r[f]=!0;if(a=[],E=t.calculate)for(d=h=(l=0,W.keys)(E);l<d.length;l++)v=d[l],p=E[v],a.push({caption:v,value:p}),r[v]&&(delete r[v],r[p]=!0);if(u=t.groups,F=[],u)for(w=function(t){for(var n,f,r,i,e,a,u,o,s,c,h,l,d,v,p,w,b,j,m,_,y,g,O,S,C,O,R,N,T,S,n=[],f=[],r=void 0,i=void 0,e=[],a={},u,o=0,s=(0,W.keys)(t);o<s.length;o++)for(h=t[c=s[o]],l=[c],v=l="="!==c[d=0]&&0<=c.indexOf(",")?c.split(","):l;d<v.length;d++){if(w={field:p=v[d],summaryFields:[],caption:h.caption},h.aggregate&&(w.summaryFields=h.aggregate.map(function(t){for(var n,r,i,e,u,o,s,c,n,u=0,o=(0,W.keys)(t);u<o.length;u++)"having"===(s=o[u])?(c=M(t[s],E),f.push(c)):"sliceBy"===s?i=t[s]:(r=M(t[s],E),a[e=s]=!0);return{formula:r,slice:i,caption:e}})),b=h.calculate)for(_=j=(m=0,W.keys)(b);m<_.length;m++)g=M(b[y=_[m]],E),e.push({caption:y,value:g});if((O=h.order)&&(r={field:S=(0,W.keys)(O)[0],ascending:C="ASC"===O[S]}),i=h.includeDetailRows,O=h.attributes)for(R=0,N=O;R<N.length;R++)T=N[R],a[T]=!0;n.push(w),S=h.caption||p,a[S]=!0}F.push({groupByInfos:n,havingInfos:f,groupSortInfo:r,includeDetailRows:i,groupCalculateInfos:e,groupSelectFields:a})},b=0,j=u;b<j.length;b++)w(m=j[b]);if((o=t.where)&&(_=M(o,E)),y=[],u=t.orderBy)for(g=0,O=u;g<O.length;g++)C="ASC"===(S=O[g])[S=(0,W.keys)(S)[0]],y.push({field:S,ascending:C});return{selectFields:r,relatedColumns:i,calculateColumns:a,limit:e,filterExpression:_,groupInfos:F,sortInfos:y}}function Q(t,n,r,i,e,u,o,s,c){var f,a,h,l,d,f=[],a=c.length;if(0<=(o=void 0===o?0:o))for(l=(h=0)===o?a:Math.min(o,a);h<l;h++)f.push((0,K.nse)(t,n,r,i,e,c[h],u,!0,!0,s));else for(h=a-1,d=Math.max(0,a+o);d<=h;h--)f.push((0,K.nse)(t,n,r,i,e,c[h],u,!0,!0,s));return f}function Z(t){for(var n,r,n=[],r=0;r<t;r++)n[r]=r;return n}function tt(t){var n,r,i,e,e;if(0===t.length)return"";if(1===t.length)return t[0];for(n=[],r=0,i=t;r<i.length;r++)e="="===(e=i[r])[0]?e.slice(1):e,n.push(e);return"=AND("+n.join(",")+")"}function nt(t,n,r){var i,e,u,o,s,i=[],e=0;if("string"==typeof n)for(u=t.Ywt(n,0,0),o=0;o<r.length;o++)s=r[o],!0===t.nMt(u,s,0)&&(i[e]=s,e++);return i}function rt(r,t,n,i,e){var u=(0,o.ese)(r,t,n,e,i);e.sort(function(t,n){return u(r,i,t,n)})}function f(t,n){var t=new i.FieldManager(J,t);return n=t.prepareFields(n),{fieldMgr:t,columnInfos:n}}function a(t,n){var r=t.POt;return new e.GroupManager(n,r.wEt.bind(r),t.QOt)}function it(t,n,r,i){var i,e,i,t,u,r,o,r,i=f(t,i),e=i.fieldMgr,i=i.columnInfos,t=a(t,n),u=e.buildGroupFields(n,r),r=t.groupBy(u,r),o=r.rootNode,r=r.indexMap;return e.transposeSliceFields(u),{rootNode:o,newIndexMap:r,fieldMgr:e,groupMgr:t,columnInfos:i=(0,s.ise)(i,e,n)}}Object.defineProperty(n,"__esModule",{value:!0}),n=r("./dist/src/dataManager.js"),W=r("./dist/src/dataSource/utils.js"),K=r("./dist/src/view/view.js"),s=r("./dist/src/view/view-group.js"),o=r("./dist/src/view/view-sort.js"),i=r("./dist/src/viewField/fieldManager.js"),e=r("./dist/src/viewField/groupManager.js"),J=void 0,n.DataManager.prototype.query=function(t){var n,r,i,e,u,D,t,o,s,c,f,a,h,l,d,v,p,w,b,L,j,t,k,V,G,m,_,y,g,O,S,C,_,R,N,T,E,F,q,M,T,R,B,I,N,T,F,E,x,A,P,H,U,g,n=this,r=n.tables[t.tableName];if(r){if(i=!1,t.unpivot&&(i=!0,r._dataSource.rse=r._dataSource._data,r.fetchSync(t.unpivot)),e=Z(r.length()),u=(0,K.ose)(r),o=(t=z(t,D=n.relationships.filter(function(t){return t.sourceTable.name===r.name}).map(function(t){return t.sourceRelationshipName}))).selectFields,s=t.relatedColumns,c=t.calculateColumns,f=t.limit,a=t.filterExpression,h=t.groupInfos,l=t.sortInfos,0<s.length)for(d=0,v=s;d<v.length;d++)p=v[d],u.push(p);if(0<c.length)for(w=0,b=c;w<b.length;w++)L=b[w],u.push(L);if(a&&(e=nt(r,a,e)),l&&0<l.length&&h.length<=0&&rt(r,u,J,l,e),j={},0<(0,W.keys)(o).length&&(t=Q(r,u,J,J,J,o,f,!1,e))&&0<t.length&&(j.$r=t),0<h.length)for(k=$(e),V=e.slice(0),G=u.slice(0),m=0;m<h.length;m++){if(y=(_=h[m]).groupByInfos,g=_.groupSelectFields,O=_.groupCalculateInfos,S=_.havingInfos,C=_.groupSortInfo,_=_.includeDetailRows,N=(R=it(r,y,e,u)).rootNode,T=R.newIndexMap,E=R.fieldMgr,F=R.groupMgr,e=T,u=q=R.columnInfos,0<(M=void 0,W.keys)(g).length){if(R=(T=Y(N,y.length)).indexMap,B=T.queue,M=Q(r,u,F,E,y,g,0,!0,e=R),_&&j.$r)for(I=0;I<M.length;I++)M[I].$rows=B[I].recordRowNumbers.map(function(t){return k[t]});if(N=void 0,C?N=[C]:l&&0<l.length&&(N=l),0<O.length||0<S.length||N){for(T=r.name+"_VirtualTable1",(F=n.addTable(T,{data:M})).fetchSync(),E=Z(F.length()),x=(0,K.ose)(F),A=0,P=O;A<P.length;A++)H=P[A],x.push(H);0<S.length&&(E=nt(F,U=tt(S),E)),g=Q(F,x,J,J,J,J,0,!1,E),n.removeTable(F.name),X(j,g,y,N)}else X(j,M,y)}e=V,u=G}return i&&(r._dataSource._data=r._dataSource.rse,r.fetchSync(J,!0)),j}}},"./dist/src/relationship.js":function(t,n,r){"use strict";var i,a,e,u;function o(t,n,r,i,e,u){this.sourceTable=t,this.sourceFieldName=n,this.sourceRelationshipName=r,this.targetTable=i,this.targetFieldName=e,this.targetRelationshipName=u,r&&(this.sourceField=t.xOt(n,r,i,e,this)),u&&(this.targetField=i.xOt(e,u,t,n,this))}Object.defineProperty(n,"__esModule",{value:!0}),n.Relationship=void 0,i=r("./dist/src/interfaces/interface.js"),a=r("./dist/src/dataSource/utils.js"),e=void 0,o.prototype.NOt=function(t){return t===this.targetRelationshipName},o.prototype.VP=function(){this.sourceTable&&this.sourceTable.kOt(this),this.targetTable&&this.targetTable.kOt(this)},o.prototype.DOt=function(t){return this.relationshipMap===i.RelationshipMap.OneToMany&&t===this.sourceRelationshipName?i.RelationshipMap.OneToOne:this.relationshipMap},o.prototype._Ot=function(){var t,n,t=this.sourceTable,n=this.sourceFieldName;if(t.EOt())return t.jOt(n)&&!t.OOt()?i.RelationshipMap.OneToOne:i.RelationshipMap.OneToMany},o.prototype.ROt=function(t){var n=this.relationshipMap;return(0,a.isNullOrUndefined)(n)&&(n=this.relationshipMap=this._Ot()),(0,a.isNullOrUndefined)(n)?t:n===i.RelationshipMap.OneToOne?{uit:"object"}:{uit:"array"}},o.prototype.BOt=function(){var r,i,e,t,u,n,o,s,c;function f(t,n,r){t[n]?(t[n].push(r),t.uit="array"):t[n]=[r]}for(r=this.sourceField.LOt={uit:"object"},i=this.targetField.LOt=this.ROt({}),e=this.ROt({uit:"object"}),t=this.sourceTable.getDataSync(),u=this.targetTable.getDataSync(),n=0;n<t.length;n++)o=t[n][this.sourceFieldName],(0,a.isNullOrUndefined)(o)||f(e,o,n);for(s=function(n){var t=u[n][c.targetFieldName];(0,a.isNullOrUndefined)(t)||e[t]&&(i[n]=e[t],e[t].forEach(function(t){f(r,t,n)}))},c=this,n=0;n<u.length;n++)s(n);this.targetField.type=e.uit,this.sourceField.type=r.uit},o.prototype.dl=function(){this.sourceField.LOt=e,this.targetField.LOt=e,this.targetTable.FOt(),this.sourceTable.FOt()},n.Relationship=o},"./dist/src/res.en.js":function(t,n){"use strict";var r,n;function i(t,n){return{description:t,parameters:n}}function e(t,n,r,i){return{name:t,optional:n,repeatable:r,enum:i}}Object.defineProperty(n,"__esModule",{value:!0}),n.resource=void 0,n.resource={zve:{WINDOW:i("(TableSheet Specific) Determines the rows as the window by partitioning and ordering to apply the window function.",[e("window_function"),e("partition_by",!0),e("order_by",!0),e("frame_rows\\range",!0)]),PARTITIONBY:i("(TableSheet Specific) Divides the rows into partitions.",[e("field_function",!(n=[{value:"-1",description:"Indicates the lower following of the partition."},{value:"[@]",description:"Indicates the current row or value."},{value:"[@+n]",description:"Indicates the n following of the current, if the order is ascending."},{value:"[@-n]",description:"Indicates the n following of the current, if the order is descending."}]),!0)]),ORDERBY:i("(TableSheet Specific) Defines the logical order in each partition.",[e("field_function",!(r=[{value:"-1",description:"Indicates the upper boundary of the partition."},{value:"[@]",description:"Indicates the current row or value."},{value:"[@-n]",description:"Indicates the n preceding of the current, if the order is ascending."},{value:"[@+n]",description:"Indicates the n preceding of the current, if the order is descending."}]),!0)]),ORDERASC:i("(TableSheet Specific) Specifies ascending order for the specified field.",[e("field_function")]),ORDERDESC:i("(TableSheet Specific) Specifies descending order for the specified field.",[e("field_function")]),FRAMEROWS:i("(TableSheet Specific) Limit the rowset of the window by specified the preceding or following rows against the current row.",[e("preceding_function",!1,!1,r),e("following_function",!0,!1,n)]),FRAMERANGE:i("(TableSheet Specific) Limit the rowset of the window by specified the preceding or following range with respect to the value in the current row.",[e("preceding_function",!1,!1,r),e("following_function",!0,!1,n)]),CUMEDIST:i("(TableSheet Specific) The cumulative distribution of a value within a group of values.",[]),W_PERCENTRANK:i("(TableSheet Specific) Calculates the percentage of the relative rank of a row within a partition of rows.",[]),ROWNUMBER:i("(TableSheet Specific) Returns the number of the current row within its partition.",[]),W_RANK:i("(TableSheet Specific) Returns the rank of each row within the partition of a result set.",[]),DENSERANK:i("(TableSheet Specific) Returns the rank of the current row within its partition, without gaps.",[]),LEAD:i("(TableSheet Specific) Provides access to the value from a row at a given physical offset that follows the current row.",[e("value_function"),e("offset",!0),e("default_value",!0)]),LAG:i("(TableSheet Specific) Provides access to the value from a row at a given physical offset that before the current row.",[e("value_function"),e("offset",!0),e("default_value",!0)]),NTILE:i("(TableSheet Specific) Divides a partition into N buckets, assigns each row its bucket number.",[e("n")]),FIRSTVALUE:i("(TableSheet Specific) Access to the value from the first row within the window frame.",[e("value_function")]),LASTVALUE:i("(TableSheet Specific) Access to the value from the last row within the window frame.",[e("value_function")]),NTHVALUE:i("(TableSheet Specific) Access to the value from the n-th row within the window frame.",[e("value_function"),e("n")]),CALCULATE:i("(TableSheet Grouping Specific) Expand the group context for the formula.",[e("formula"),e("remove_filters_function")]),REMOVEFILTERS:i("(TableSheet Grouping Specific) Select the context of the upper group level.",[e("group_field_function",!0,!0)]),CHILDREN:i("(TableSheet Hierarchy Specific) Retrieves the value of the children that be a certain offset from the parent.",[e("level_offset"),e("field_function")]),ONLYCHILDREN:i("(TableSheet Hierarchy Specific) Retrieves the value of the children that be not parent.",[e("field_function")]),PARENT:i("(TableSheet Hierarchy Specific) Retrieves the value of the parent that be a certain offset from the current.",[e("level_offset"),e("field_function")]),LEVEL:i("(TableSheet Hierarchy Specific) Retrieves the level of the current.",[]),LEVELROWNUMBER:i("(TableSheet Hierarchy Specific) Retrieves the row number of the current under its parent.",[])}}},"./dist/src/table/calcField.js":function(t,n,r){"use strict";var i,e,u,o,s,c;function f(t,n,r){var i,e,i=c.call(this)||this;i.calcSource=n.POt,i.calcService=i.calcSource.getCalcService(),i.GOt=t;try{e=i.expression=r||i.calcService.parse(i.calcSource,t,0,0),i.calcService&&e&&(i.w3=i.calcService.getGlobalSourceModel(),i.w3.cyt(i,0,0,e,e,!0))}catch(t){}return i.Tl=[],i}i=this&&this.__extends||(s=function(t,n){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.CalcField=void 0,e=r("CalcEngine"),u=r("./dist/src/dataSource/utils.js"),c=e.BaseCalc,i(f,c),f.prototype.getKey=function(){var t=this;return"T:"+t.calcSource.nM.name+":"+t.GOt},f.prototype.vyt=function(){this.c_t().I3(this,3)},f.prototype.c_t=function(){return this.calcService},f.prototype.P6t=function(){this.C8()},f.prototype.C8=function(){this.Tl=[]},f.prototype.getValue=function(t){var n;return this.expression?(n=this.Tl[t],(0,u.isUndefined)(n)&&!(0,u.isUndefined)(t)&&(this.calcSource.pe(t),n=this.Tl[t]=this.calcService.evaluateExpression(this.calcSource,this.expression,{row:t,col:0})),n):"Invalid Formula"},f.prototype.getValues=function(t,n){for(var r,i,e,r=[],i=n=n||0,e=t.length;i<e;i++)r.push(this.getValue(t[i]));return r},f.prototype.getValueWithContext=function(t){var n,t,n=this.calcSource.DJ,t=this.getValue(t);return this.calcSource.DJ=n,t},n.CalcField=f},"./dist/src/table/hierarchyField.js":function(t,n,r){"use strict";var i,e,u,o;function s(t,n){this.GOt=t,this.nM=n,this.UOt=new e.CalcField(this.l7t(),n),this.HOt=new u.TableField(t,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.HierarchyField=void 0,i=r("./dist/src/dataSource/utils.js"),e=r("./dist/src/table/calcField.js"),u=r("./dist/src/table/tableField.js"),s.prototype.getKey=function(){return this.UOt.getKey()},s.prototype.vyt=function(){this.UOt.vyt()},s.prototype.c_t=function(){return this.UOt.c_t()},s.prototype.P6t=function(){this.C8()},s.prototype.l7t=function(){return this.nM.isHierarchy()?this.nM._dataSource.l7t(this.GOt):void 0},s.prototype.C8=function(){var t=this.l7t();(0,i.isNullOrEmpty)(t)?this.UOt=null:(0,i.isNullOrUndefined)(this.UOt)||t!==this.UOt.GOt?this.UOt=new e.CalcField(t,this.nM):this.UOt.C8(),this.HOt=new u.TableField(this.GOt,this.nM)},s.prototype.zOt=function(t){var n,n,n=this.nM;if(n.isHierarchy())return n=n.SEt(t),!(0,i.isNullOrUndefined)(n)&&0<n.children.length},s.prototype.getValue=function(t){return(!(0,i.isNullOrUndefined)(this.UOt)&&this.zOt(t)?this.UOt:this.HOt).getValue(t)},s.prototype.getValues=function(t,n){for(var r,i,e,r=[],i=n=n||0,e=t.length;i<e;i++)r.push(this.getValue(t[i]));return r},s.prototype.setValue=function(t,n){return this.HOt.setValue(t,n)},s.prototype.setItemValue=function(t,n,r,i){this.HOt.setItemValue(t,n,r,i)},s.prototype.hasItem=function(t){this.HOt.hasItem(t)},s.prototype.insertItem=function(t,n){this.HOt.insertItem(t,n)},s.prototype.getOriginalValue=function(t){return this.HOt.getOriginalValue(t)},s.prototype.getRelatedTable=function(){return this.HOt.getRelatedTable()},s.prototype.getRelationMaps=function(){return this.HOt.getRelationMaps()},s.prototype.getHostTableIndexes=function(t){return this.HOt.getHostTableIndexes(t)},n.HierarchyField=s},"./dist/src/table/table.entry.js":function(t,n,r){"use strict";var i,e,i=this&&this.__createBinding||(Object.create?function(t,n,r,i){void 0===i&&(i=r);var e=Object.getOwnPropertyDescriptor(n,r);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(t,i,e)}:function(t,n,r,i){t[i=void 0===i?r:i]=n[r]}),e=this&&this.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||i(n,t,r)};Object.defineProperty(n,"__esModule",{value:!0}),e(r("./dist/src/table/tableEvents.js"),n),e(r("./dist/src/table/table.js"),n)},"./dist/src/table/table.js":function(t,n,r){"use strict";var i,e,b,u,o,a,v,p,s,c,f,h,l;function w(t,n,r){var i={syncDone:!1,asyncCount:0,args:void 0,succeededArgs:void 0,failedArgs:void 0,onSucceeded:t,onFailed:n,onEnd:r,invoke:function t(){0===i.asyncCount&&i.syncDone&&(i.failedArgs?i.onFailed&&i.onFailed(i.failedArgs):i.onSucceeded&&i.onSucceeded(i.succeededArgs),i.onEnd)&&i.onEnd(i.succeededArgs||i.failedArgs)},execute:function t(n){n&&(i.onEnd=n),i.syncDone=!0,i.invoke()},suspend:function t(){return i.asyncCount++,{succeed:function t(n){i.succeededArgs=n,i.resume()},fail:function t(n){i.failedArgs=n,i.resume()}}},resume:function t(){i.asyncCount--,i.invoke()}};return i}function d(t,n){var r,i,e,u;for(r in t)if(t.hasOwnProperty(r))for(e in i=t[r],n)if(n.hasOwnProperty(e)&&i===(u=n[e])&&i.rb)return!0}function j(t,n){return d(n.views,t.VOt)}function m(t,n){return-1<t.indexOf("[".concat(n,"]"))||-1<t.indexOf("[@".concat(n))||-1<t.indexOf("[@[".concat(n))}function _(t,n,r,i){var e,u,o,t,s,c,f,a;if(0!==n){for(e=t&&"="===t[0]?function(t){return(0,b.formatCalcError)(i(t))}:i,t=r&&r.dataType,s=r&&r.dataMap,c=!!t,f=0;f<n;f++)a=e(f),s&&!(0,b.isNullOrUndefined)(s[a])&&(a=s[a]),c||(0,b.isNullOrUndefined)(a)||(o=a,c=!0),(u=u||{})[a=a instanceof Date?new Date(a.getFullYear(),a.getMonth(),a.getDate()).toISOString():a]||(u[a]=[]),u[a]&&u[a].push(f);return u.K$=t||(c?typeof o:"object"),u}}function y(t,n,r,i){var e,u,o,o,s;for(e in t)t.hasOwnProperty(e)&&(u=t[e],o=(o=i&&i[e])&&o.dataMap,u)&&(s=r[e],u[s=(s=o&&!(0,b.isNullOrUndefined)(o[s])?o[s]:s)instanceof Date?s.toISOString():s]?u[s].push(n):u[s]=[n])}function g(t,n,r,i,e,u){var t,r,u,t=t[r],r=u&&u.dataMap;t&&e!==i&&(r&&((0,b.isNullOrUndefined)(r[i])||(i=r[i]),(0,b.isNullOrUndefined)(r[e])||(e=r[e])),i instanceof Date&&(i=i.toISOString()),e instanceof Date&&(e=e.toISOString()),u=t[i])&&(1<u.length?u.splice(u.indexOf(n),1):delete t[i],t[e]?t[e].push(n):t[e]=[n])}function O(t,n,r){var i,e,u,o,s;for(i in t)if(t.hasOwnProperty(i)&&(e=t[i]))for(u in e)if(e.hasOwnProperty(u)&&(0,b.isArray)(e[u])&&(o=e[u],(0,b.isArray)(o))){for(s=0;s<o.length;s++)o[s]>=n+r?o[s]-=r:o[s]>=n&&o[s]<n+r&&(o.splice(s,1),s--);0===o.length&&delete e[u]}}function S(t,n){var t;this.YOt={},this.ZOt={},this.WOt=0,Object.defineProperty(this,"name",{get:function(){return this.Zc},set:function(t){var n,r,i,e,r,n=this.Zc;if(this.Zc=t,r=this.QOt){for(i in this.VOt)this.VOt.hasOwnProperty(i)&&(e=this.VOt[i]).KOt(n,t);delete(r=r.tables)[n],r[t]=this}}}),Object.defineProperty(this,"options",{get:function(){return this._dataSource.options},set:function(t){this.JOt=!0,this._dataSource.options=t}}),this.name=t,t=n instanceof i.DataSource?n:new i.DataSource(n),this._dataSource=t,this.views={},this.VOt={},this.Pq=[],this.XOt={},this.qOt=f,this.JOt=!0,this.aT={}}function C(t){var n,t,r,i,n={data:t.data,remote:t.remote,autoSync:t.autoSync,batch:t.batch,schema:t.schema},t=t.remote;return t&&(r=n.remote={},(i=t.read)&&!(0,b.isFunction)(i)&&(r.read=i),(i=t.create)&&!(0,b.isFunction)(i)&&(r.create=i),(i=t.update)&&!(0,b.isFunction)(i)&&(r.update=i),(i=t.delete)&&!(0,b.isFunction)(i)&&(r.delete=i),i=t.batch)&&!(0,b.isFunction)(i)&&(r.batch=i),n}Object.defineProperty(n,"__esModule",{value:!0}),n.Table=n.updateFilterIndexesCacheOnRemove=n.updateFilterIndexesCacheOnUpdate=n.updateFilterIndexesCacheOnInsert=n.generateFilterIndexCache=n.isInCalcField=void 0,i=r("./dist/src/dataSource/dataSource.js"),e=r("./dist/src/calculation/calcSource.js"),b=r("./dist/src/dataSource/utils.js"),u=r("./dist/src/view/view.js"),o=r("./dist/src/interfaces/interface.js"),a=r("./dist/src/table/tableEvents.js"),v=r("./dist/src/table/calcField.js"),p=r("./dist/src/table/tableField.js"),s=r("./dist/src/table/hierarchyField.js"),c=r("./dist/src/table/windowOverField.js"),f=null,h=void 0,n.isInCalcField=m,n.generateFilterIndexCache=_,n.updateFilterIndexesCacheOnInsert=y,n.updateFilterIndexesCacheOnUpdate=g,n.updateFilterIndexesCacheOnRemove=O,S.prototype._Et=function(t,n,r){var i,e,n;"="===(n=!(0,b.isNullOrUndefined)(n)&&""!==n?n:"*")[0]?(i=this.bEt(n)).Iwt(0,t,r):(e=(e=this.aT[n])||(this.aT[n]={}),n=t.getKey(),r?e[n]=t:delete e[n])},S.prototype.o_t=function(t,n){var r,i,r=function(t,n){for(var r in t)n&&r.startsWith("T:")||t[r].vyt()};if((0,b.isNullOrUndefined)(t))for(i in this.aT)this.aT[i]&&r(this.aT[i],n);else-1<t.indexOf(".")&&(t=t.split(".")[0]),r(this.aT[t]),r(this.aT["*"])},S.prototype.REt=function(t){var n,r;if(this.QOt=t)this.POt=new e.DataManagerCalcSource(t.Lp,this);else for(n in this.POt=f,this.VOt)this.VOt.hasOwnProperty(n)&&(r=this.VOt[n]).$Ot(this)},S.prototype.Ywt=function(t,n,r){var i=this.POt;return i.getCalcService().parse(i,t,n||0,r||0)},S.prototype.wde=function(t){var n=this.POt;return n.getCalcService().unparse(n,t,0,0)},S.prototype.nMt=function(t,n,r){var i=this.POt;return i.pe(n),i.getCalcService().evaluateExpression(i,t,{row:n||0,col:r||0})},S.prototype._fe=function(t,n,r){var i=this.POt;return i.pe(n,h,h,r),i.getCalcService().evaluateExpression(i,t,{row:n||0,col:0})},S.prototype.getDataSync=function(t){return this._dataSource.tOt(t)},S.prototype.NEt=function(t,n){var r,i,e,u,o,s,r=this;if(t){if(0<=t.indexOf(r))return f}else{if(r.tRt)return r.tRt;i=!0,t=[],n=[]}for(t.push(r),n.push(new Promise(function(t){if(r.JOt)return r.fetch().then(t);t(null)})),e=r.Pq,u=0;u<e.length;u++)(s=(o=e[u]).targetTable)&&s.NEt(t,n);if(i)return r.tRt=Promise.all(n),r.tRt},S.prototype.fetch=function(n){var r,i,e,r=this;return r.BEt&&(i=r.columns),e=r.length(),r._dataSource.load({reload:n}).then(function(t){return r.ase(e,i,n),Promise.resolve(t)})},S.prototype.cPt=function(t){var n,r,i,e,u,o,s,c,n=this,r={};if(t&&(i=n.columns))for(o=e=(u=0,b.keys)(i);u<o.length;u++)(c=i[s=o[u]]).value&&"="===c.value[0]&&(r[s]=c);return r},S.prototype.ase=function(t,r,n){var i,e,u,u,o,s,c,f,a,h,l,i=this,e=i._dataSource.options.schema;if((i.JOt||n)&&(u=i.get(0),(u=(0,b.isNullOrUndefined)(u)&&e&&e.columns?e.columns:u)&&(u=(0,b.keys)(u),o=i.columns=i.cPt(!0),s=i.Pq,u.forEach(function(t){var n=r&&r[t];o[t]=i.nRt(t,n),s.push({name:t})})),i.JOt=!1),n&&i.ARt(),e&&e.columns){for(a in f=[],c=e.columns)c[a]&&c[a].indexed&&f.push(a);i.eRt(f)}if(n&&i.clearIndexes(),i.createIndexes(i.qOt||[]),i.BEt=!1,i.dl(),n)for(l in i._dataSource.pOt(),h=i.views)h.hasOwnProperty(l)&&h[l].iM(t!==i.length())},S.prototype.fetchSync=function(t,n){var r,i,n,r=this,i=r.length(),n=r._dataSource.loadSync(t,n);return r.ase(i,h,!(0,b.isNullOrUndefined)(t)),n},S.prototype.nRt=function(t,n){var u,r,i,e,u=this,r={name:t,value:t,jOt:!1};if(!(0,b.isNullOrUndefined)(n)){for(e in n.value=void 0,n.name=void 0,n)n.hasOwnProperty(e)&&!(0,b.isNullOrUndefined)(n[e])&&(r[e]=n[e]);i=n.W5,delete n.W5,n.jOt&&(r.jOt=n.jOt)}return Object.defineProperty(r,"dataType",{get:function(){return i},set:function(t){var t;i!==t&&("rowOrder"!==i&&"rowOrder"!==t||!u.isHierarchy()||u.setHierarchyOptionChanged(),i=t,u._dataSource.xjt(this.name,this.dataType,this.dataPattern),t=this.value,u.dl(t),u.rRt(t))}}),Object.defineProperty(r,"isPrimaryKey",{get:function(){return this.jOt},set:function(t){this.jOt!==t&&(this.jOt=t,u.qOt||(u.qOt=[]),u.qOt.slice().sort().join(",")!==u.Ljt(!0).slice().sort().join(","))&&u.createIndexes(u.qOt)}}),Object.defineProperty(r,"mappedName",{get:function(){return this.value},set:function(n){var r;this.value===n||(0,b.isNullOrEmpty)(n)||(r=this.value,u._dataSource.Njt(r,n),u.dl(r),u.rRt(n),u.oRt(r,n),u.aRt(r,n),u.Pq.forEach(function(t){t.name===r&&(t.name=n)}),u.qOt=(u.qOt||[]).map(function(t){return t===r?n:t}),u.columns[n]=u.columns[r],delete u.columns[r],this.name=this.value=n)}}),Object.defineProperty(r,"relationship",{get:function(){for(var t,n,r,i,t,n=0,r=u.QOt.relationships;n<r.length;n++){if((i=r[n]).sourceTable===u&&i.sourceFieldName===this.value)return{table:i.targetTable,field:i.targetFieldName,sourceName:i.sourceRelationshipName,targetName:i.targetRelationshipName};if(i.targetTable===u&&i.targetFieldName===this.value)return{table:i.sourceTable,field:i.sourceFieldName,sourceName:i.sourceRelationshipName,targetName:i.targetRelationshipName}}},set:function(t){for(var n,r,i,e,n,r=0,i=u.QOt.relationships;r<i.length;r++)if((e=i[r]).sourceRelationshipName===t.sourceName){u.QOt.removeRelationship(e.sourceRelationshipName);break}t.table&&t.field&&u.QOt.addRelationship(u,this.value,t.sourceName,t.table,t.field,t.targetName)}}),r},S.prototype.length=function(){return this._dataSource.length()},S.prototype.getDirtyIndexes=function(){return this._dataSource.getDirtyIndexes()},S.prototype.isInserted=function(t){return this._dataSource.isInserted(t)},S.prototype.isUpdated=function(t){return this._dataSource.isUpdated(t)||this.uRt(t)},S.prototype.getErrorInfo=function(t){return this._dataSource.getErrorInfo(t)},S.prototype.uRt=function(t){var n,r,i,e,u,e,o,s,c,n=this,r=n.Pq;for(n.WOt++,i=0;i<r.length;i++)if(u=(e=r[i]).targetTable,e=e.LOt,u&&j(u,n)&&e&&e[t]&&!u.WOt)for(o=0,s=e[t];o<s.length;o++)if(c=s[o],u.isUpdated(c))return n.WOt--,!0;n.WOt--},S.prototype.insertItem=function(n,r,i,t){var e,u,e=this,u={index:n,data:r};this.ki(a.Events.ItemInserting,u),this._dataSource.insertItem(n,r,function(t){e.sRt(n,r),e.cRt(n,r),e.dl(),e.Jhe(),e.ki(a.Events.ItemInserted,u),i&&i(t)},t)},S.prototype.updateItem=function(t,n,r,i){this._dataSource.updateItem(t,n,r,i)},S.prototype.fRt=function(r,i,e,u,o,s,c){var f=this;return function(t){var n;f.lRt(r,i,e),f.hRt(r,u,i,e),f.dl(),f.Jhe()&&f.age(),f.uge(r,s),f.ki(a.Events.ItemUpdated,o),c&&c(t)}},S.prototype.dRt=function(t,n,r,i,e,u){var o,s,c,o=this.sge(t,r),s=n[r],c={index:t,data:n,field:r,originalValue:i,newValue:s};this.ki(a.Events.ItemUpdating,c),this._dataSource.updateItem(t,n,this.fRt(t,i,s,r,c,o,e),u)},S.prototype.updateItemValue=function(t,n,r,i,e){var u,o,s,c,c,o=this.sge(t,n),s=this._getValueByField(n,t),c=this.vRt(t);c[n]=r,this.ki(a.Events.ItemUpdating,c={index:t,data:c,field:n,originalValue:s,newValue:r}),this._dataSource.updateItemValues(t,((u={})[n]=r,u),this.fRt(t,s,r,n,c,o,i),e)},S.prototype.resetItem=function(r,t,n){var i,t,n,e,n,u,o,s,i=this,t=w(t,n);this.mRt(r,t.suspend),this._dataSource.isUpdated(r)&&(n=t.suspend(),e=n.succeed,n=n.fail,u=this.vRt(r),o=this.gRt(r),s=this.sge(r),this.ki(a.Events.ItemResetting,{index:r}),this._dataSource.resetItem(r,function(t){var n;i.pRt(r,u,o),i.dl(),i.Jhe()&&i.age(),i.uge(r,s),i.ki(a.Events.ItemReset,{index:r,originalData:u,dataBeforeChanged:o}),e(t)},n)),t.execute()},S.prototype.pRt=function(t,n,r){var i,e,u,o,o,i=this,e=i.columns;if(!(0,b.isNullOrUndefined)(n)&&!(0,b.isNullOrUndefined)(r))for(u in e)e.hasOwnProperty(u)&&(o=(o=e[u]).value instanceof Function?o.value.name:o.value,i.hRt(t,o,n[o],r[o]))},S.prototype.mRt=function(c,f){var a,h,t,n,a=this,h=a.Pq;for(a.WOt++,t=function(t){var t,i,t,n,r,e,u,o,s,o,t=h[t],i=t.targetTable,t=t.LOt;if(i&&j(i,a)&&t&&t[c]&&!i.WOt){for(n=[],r=0,e=t[c];r<e.length;r++)u=e[r],i.isInserted(u)?n.push(u):i.isUpdated(u)&&(s=(o=f()).succeed,o=o.fail,i.resetItem(u,s,o));0<n.length&&(n.sort(function(t,n){return n-t}),n.forEach(function(t){var n=f(),r=n.succeed,n=n.fail;i.qCt(t,1,r,n)}))}},n=0;n<h.length;n++)t(n);a.WOt--},S.prototype.saveItem=function(n,t,r){var i,t,r,e,r,e,u,r,i=this,t=w(t,r),r=t.suspend(),e=r.succeed,r=r.fail;this.bRt(n,e,r),(this._dataSource.isUpdated(n)||this._dataSource.isInserted(n))&&(e=t.suspend(),u=e.succeed,r=e.fail,this.ki(a.Events.ItemSaving,{index:n}),this._dataSource.saveItem(n,function(t){i.dl(),i.Jhe(),i.ki(a.Events.ItemSaved,{index:n}),u(t)},r)),t.execute()},S.prototype.bRt=function(t,n,r){var n,i,e,u,o,s,c,s,f,a,h,l,d,l,n=w(n,r),i=n.suspend,e=this,u=e.Pq;for(e.WOt++,o=0;o<u.length;o++)if(c=(s=u[o]).targetTable,s=s.LOt,c&&j(c,e)&&s&&s[t]&&!c.WOt)for(f=0,a=s[t];f<a.length;f++)h=a[f],(c.isUpdated(h)||c.isInserted(h))&&(d=(l=i()).succeed,l=l.fail,c.saveItem(h,d,l));n.execute(function(){return e.WOt--})},S.prototype.get=function(t){return this._dataSource.get(t)},S.prototype.remove=function(t,n,r,i){var e,u,o,s,o,e=this;void 0===n&&(n=1),s=(o=(u=w(function(){e.qCt(t,n,r,i)},i)).suspend()).succeed,o=o.fail,this.yRt(t,n,s,o),u.execute()},S.prototype.qCt=function(n,r,i,t){var e,u,e=this,u={index:n,count:r};this.ki(a.Events.ItemRemoving,u),this._dataSource.remove(n,r,function(t){"number"==typeof t.removedCount&&(u.count=t.removedCount),e.dl(),e.Jhe(),e.wRt(),e.MRt(n,r),e.ki(a.Events.ItemRemoved,u),i&&i(t)},t)},S.prototype.yRt=function(c,f,t,n){var t,a,r,h,i,e,t=w(t,n),a=t.suspend,r=this,h=r.Pq;for(r.WOt++,i=function(t){var t,i,n,r,n,t,n,e,u,o,s,t=h[t],i=t.targetTable,n=t.CRt,r=t.LOt;if(i&&n.NOt(t.name)&&r&&r[c]&&!i.WOt){for(t=(n=a()).succeed,n=n.fail,e=[],u=void 0,o=function(t){var n=r[c+t];e=e.concat(Object.keys(n).map(function(t){return n[t]}))},s=0;s<f;s++)o(s);e.sort(function(t,n){return n-t}),u=e.map(function(r){return function(t,n){i.remove(r,1,t,n)}}),(0,b.promiseSerialExecute)(u).then(t).catch(n)}},e=0;e<h.length;e++)i(e);t.execute(function(){return r.WOt--})},S.prototype.getChanges=function(){return this._dataSource.getChanges()},S.prototype.isDataLengthChanged=function(){return this._dataSource.isDataLengthChanged()},S.prototype.submitChanges=function(t,i,e){var u=this;return new Promise(function(n,r){u.SRt(t,function(t){n(t),i&&i(t)},function(t){r(t),e&&e(t)})})},S.prototype.SRt=function(i,n,r){var e,t,u,o,u,e=this,t=w(function(){e.wRt(),e.ki(a.Events.ChangesSubmitting,h),e._dataSource.submitChanges(function(t,n,r){i?i(t,n,r):e.ki(a.Events.ChangesSubmittedRowFailed,{index:t,reason:n,type:r})}).then(function(t){e.ki(a.Events.ChangesSubmitted,t),n(t)}).catch(function(t){r(t)})}),u=t.suspend(),o=u.succeed,u=u.fail;this.TRt(o,u),t.execute()},S.prototype.TRt=function(t,n){var t,r,i,e,u,o,s,o,o,c,o,t=w(t,n),r=t.suspend,i=this,e=i.Pq;for(i.WOt++,u=0;u<e.length;u++)s=(o=e[u]).targetTable,o=o.LOt,s&&o&&!s.WOt&&(c=(o=r()).succeed,o=o.fail,s.submitChanges(h,c,o));t.execute(function(){return i.WOt--})},S.prototype.cancelChanges=function(n,t){var r,i,r=this,i=w(function(){var t={isDataLengthChanged:r.isDataLengthChanged()};r.ki(a.Events.ChangesCancelling,h),r._dataSource.cancelChanges(),r.dl(),r.Jhe(),r.wRt(),r.ARt(),r.ki(a.Events.ChangesCancelled,t),n&&n(h)});this.IRt(i.suspend),i.execute()},S.prototype.IRt=function(t){var n,r,i,e,u,e,e,o,e,n=this,r=n.Pq;for(n.WOt++,i=0;i<r.length;i++)u=(e=r[i]).targetTable,e=e.LOt,u&&e&&!u.WOt&&(o=(e=t()).succeed,e=e.fail,u.cancelChanges(o,e));n.WOt--},S.prototype.xRt=function(t){return t instanceof v.CalcField||t instanceof s.HierarchyField},S.prototype.NRt=function(){var t,r,n,i,e,u,t=this.options.schema.hierarchy.column,r=[new RegExp("(\\[@)(".concat(t,")\\]|(PARENT)|(CHILDREN)|(ONLYCHILDREN)|(LEVEL)|(LEVELROWNUMBER)"))];for(n in this.XOt)Object.prototype.hasOwnProperty.call(this.XOt,n)&&(i=this.XOt[n])instanceof s.HierarchyField&&(i.C8(),r.push(new RegExp("(\\[@)(".concat(i.GOt,")\\]"))));for(n in e=function(t){var n;Object.prototype.hasOwnProperty.call(u.XOt,t)&&(n=u.XOt[t])instanceof v.CalcField&&r.some(function(t){return t.test(n.GOt)})&&n.C8()},(u=this).XOt)e(n)},S.prototype.FOt=function(){var t,n;for(t in this.XOt)Object.prototype.hasOwnProperty.call(this.XOt,t)&&(n=this.XOt[t],this.xRt(n)?n.C8():this.XOt[t]=h)},S.prototype.dl=function(t,n){var r,i,e;if(t){for(r=this.XOt[t],this.xRt(r)?r.C8():this.XOt[t]=h,i=0;i<this.Pq.length;i++)if(t===(e=this.Pq[i]).name||t===e.sourceField)return void(e.LOt&&e.CRt.dl())}else for(this.FOt(),i=0;i<this.Pq.length;i++)(e=this.Pq[i]).CRt&&e.CRt.dl()},S.prototype.primaryKey=function(t){var t,n,r,i,e,u,o,s,c,f;if(0===arguments.length)return this.qOt||(this.Ljt(),this.createIndexes(this.qOt)),this.qOt.join(",");if(!(0,b.isNullOrUndefined)(t)&&(this.qOt=(this.qOt||[]).concat(t.split(",")),t=this._dataSource.options.schema,!(0,b.isNullOrUndefined)(t))){for(i in r=[],n=t.columns=t.columns||{})Object.prototype.hasOwnProperty.call(n,i)&&(e=n[i]).isPrimaryKey&&r.push(i);if(0===r.length)this.qOt.forEach(function(t){n[t]=n[t]||{},n[t].isPrimaryKey=!0});else{for(u=0;u<r.length;u++)o=r[u],this.columns&&this.columns[o]&&(this.columns[o].isPrimaryKey=!0);for(s=this.qOt.slice().sort(),r.sort(),c=r,f=0;f<s.length||f<c.length;f++)if(s[f]!==c[f])return void(this.qOt=c)}}},S.prototype.getIndexes=function(){return(0,b.keys)(this.YOt)},S.prototype.kRt=function(){return(0,b.keys)(this.ZOt)},S.prototype.createIndexes=function(t){for(var n,r,i,e,n=this.YOt,r=0,i=t;r<i.length;r++)n[e=i[r]]||(n[e]=this.DRt(e))},S.prototype.eRt=function(t,n){for(var r,i,e,u,r=this.ZOt,i=0,e=t;i<e.length;i++)r[u=e[i]]&&!n||(r[u]=this._Rt(u))},S.prototype.dropIndexes=function(t){for(var n,r,i,e,n=this.YOt,r=0,i=t;r<i.length;r++)n[e=i[r]]&&delete n[e]},S.prototype.clearIndexes=function(){this.YOt={}},S.prototype.oRt=function(t,n){var r=this.YOt;(0,b.isNullOrUndefined)(r[t])||(r[n]=r[t],delete r[t])},S.prototype.ARt=function(){this.ZOt={}},S.prototype.aRt=function(t,n){var r=this.ZOt;(0,b.isNullOrUndefined)(r[t])||(r[n]=r[t],delete r[t])},S.prototype.wRt=function(){var t=this.getIndexes();this.clearIndexes(),this.createIndexes(t)},S.prototype.ERt=function(){var t=this.kRt();this.ARt(),this.eRt(t)},S.prototype.DRt=function(t){for(var n,r,i,e,u,r=this.length(),i=0;i<r;i++)(n=n||{})[u="string"!=typeof(u=(e=this.get(i))[t])?String(u):u]||(n[u]=[]),n[u]&&n[u].push(i);return n},S.prototype._Rt=function(n){var r=this;return _(n,this.length(),this.jRt(n),function(t){return r._getValueByField(n,t)})},S.prototype.ORt=function(t){return!!this.YOt[t]},S.prototype.search=function(t,n){if(!(0,b.isNullOrUndefined)(t)&&!(0,b.isNullOrUndefined)(n))return(0,b.isString)(t)||(t=String(t)),this.ORt(n)?this.RRt(t,n):this.BRt(t,n)},S.prototype.mEt=function(t){var r,n,i,e,u,o,r=this.primaryKey().split(",");if(0===r.length||!this.YOt[r[0]])return[];if(1===r.length)return this.YOt[r[0]][t];if((t=t.split("|")).length!==r.length)return[];for(n=0;n<t.length;n++)t[n]=t[n].trim();for(i={},e={},this.YOt[r[0]][t[0]].forEach(function(t){i[t]=1}),u=function(n){o.YOt[r[n]]&&o.YOt[r[n]][t[n]].forEach(function(t){i[t]===n&&(e[t]=n)}),i=e,e={}},o=this,n=1;n<t.length;n++)u(n);return Object.keys(i)},S.prototype.kEt=function(t,n,r){var i,e,u,o,s,c,f,a,h,l,d,v,p,w;if(r){for(i={},e=0;e<n.length;e++)u=n[e],o=this._dataSource._data[u],i[u]=o&&o.data[t];for(c=0,f=s=this.QOt.relationships;c<f.length;c++)if((a=f[c]).sourceTable===this&&a.targetTable!==this){for(h={},l=a.sourceRelationshipName+".",p=d=(v=0,b.keys)(a.targetTable.columns);v<p.length;v++)h[w=p[v]]=a.sourceTable._getValueByField(l+w,t);i[a.sourceRelationshipName]=h}}else for(i=[],e=0;e<n.length;e++)o=this._dataSource._data[n[e]],i.push(o&&o.data[t]);return i},S.prototype.ASt=function(t,n,r,i){for(var e,u,o,s,e=[],u=this.length(),o=0;o<u;o++)s=n&&this._dataSource._data[n].data[o],n!==f&&s!==t&&String(s)!==t||e.push(this.kEt(o,r||this._dataSource.DEt,i));return e},S.prototype.BRt=function(t,n){for(var r,i,e,u,o,r=[],i=this.length(),e=0;e<i;e++)(o=(u=this.get(e))[n])!==t&&String(o)!==t||r.push(u);return r},S.prototype.RRt=function(t,n){var r,i,n,e,u,o,s,r,i,n=this.YOt[n][t],e=[];if(n)for(u=0,o=n;u<o.length;u++)s=o[u],e.push(this.get(s));return e},S.prototype.sRt=function(t,n){var r,i,e,u,r=this.YOt;for(i in r)r.hasOwnProperty(i)&&(e=r[i])&&(e[u=n[i]]?e[u].push(t):e[u]=[t])},S.prototype.cRt=function(t,n){var r=this._dataSource.options.schema;y(this.ZOt,t,n,r&&r.columns)},S.prototype.lRt=function(t,n,r){var i,e,u,o,i=this.YOt;for(e in i)i.hasOwnProperty(e)&&(u=i[e])&&r!==n&&((o=u[n])&&1<o.length?o.splice(o.indexOf(t),1):delete u[n],u[r]?u[r].push(t):u[r]=[t])},S.prototype.hRt=function(t,n,r,i){g(this.ZOt,t,n,r,i,this.jRt(n))},S.prototype.cge=function(){var t,n,r,t=[];if(this.ZOt)for(r in n=this.ZOt)"="===r[0]&&(0,c.hasWindowOverFormulas)(r)&&t.push(r);return t},S.prototype.age=function(){var t=this.cge();t&&0<t.length&&this.eRt(t,!0)},S.prototype.sge=function(t,n){var r,i,e,r=[];if(this.ZOt)for(e in i=this.ZOt)"="===e[0]&&(n===h||m(e,n)&&!(0,c.hasWindowOverFormulas)(e))&&r.push({field:e,originValue:this._getValueByField(e,t)});return r},S.prototype.uge=function(t,n){var r,i,e;if(n&&0<n.length)for(r=0;r<n.length;r++)i=n[r].field,e=n[r].originValue,this.hRt(t,i,e,this._getValueByField(i,t))},S.prototype.MRt=function(t,n){O(this.ZOt,t,n)},S.prototype.LRt=function(t,n){var r,i,e,u,r=this.ZOt,i=r&&r[t];if(i)for(e in i)if(i.hasOwnProperty(e)&&(u=i[e],(0,b.isArray)(u))&&u.some(function(t){return t===n}))return e},S.prototype.jOt=function(t){return 0<=this.Ljt().indexOf(t)},S.prototype.OOt=function(){return 1<this.Ljt().length},S.prototype.EOt=function(){return 0<this.Ljt().length},S.prototype.Ljt=function(t){var t,n,r,i,e,u,o,s;if(!this.qOt||t)if(t=this._dataSource.options.schema,(0,b.isNullOrUndefined)(t)||(0,b.isNullOrUndefined)(t.columns)||0===Object.keys(t.columns).length)for(n in this.qOt=[],this.columns)this.columns[n].isPrimaryKey&&this.qOt.push(n);else{for(n in i=[],r=t.columns=t.columns||{})r.hasOwnProperty(n)&&(e=r[n]).isPrimaryKey&&i.push(n);for(this.qOt||(this.qOt=[]),u=this.qOt.slice().sort(),i.sort(),o=i,s=0;s<u.length||s<o.length;s++)if(u[s]!==o[s]){this.qOt=o;break}}return this.qOt},S.prototype.defaultView=function(){var i=this;return i.FRt?Promise.resolve(i.FRt):new Promise(function(r,t){i.fetch().then(function(t){var n,n,n,n=i.get(0),n=(0,b.keys)(n),n=i.addView(o.DEFAULT_VIEW_NAME,n);i.FRt=n,r(n)})})},S.prototype.addView=function(t,n,r,i){var n=new u.View(t,n,r,i);return(this.views[t]=n).PRt(this),n},S.prototype.GRt=function(t,n){var n=new u.View(t,n);return n.PRt(this),this.QOt.rV[t]=n},S.prototype.removeView=function(t){var n=this.views;n[t].PRt(f),delete n[t],this.URt(t)},S.prototype.URt=function(t){var n,r,i,n=this.QOt.tables;for(r in n)n.hasOwnProperty(r)&&delete(i=n[r]).VOt[t]},S.prototype.HRt=function(t){return this.views[t]},S.prototype.zRt=function(t){for(var n,r,n=0;n<this.Pq.length;n++)if((r=this.Pq[n]).name===t)return r;return null},S.prototype.Ole=function(t){for(var n,r,i,n=0,r=this.Pq;n<r.length;n++)if((i=r[n]).name.toUpperCase()===t.toUpperCase())return{field:i,fieldName:i.name};return null},S.prototype.VRt=function(t){var n,r,i,n=this.getDataSync(t),r=[];if(t)for(i=0;i<t.length;i++)r.push(n[t[i]]);else for(i=0;i<n.length;i++)r.push(n[i]);return r},S.prototype.vRt=function(t){return this.VRt([t])[0]},S.prototype.gRt=function(t){return this._dataSource.lOt(t)},S.prototype.YRt=function(t,n){for(var r,i,r=[],i=0;i<n.length;i++)r.push(this._getValueByField(t,n[i]));return r},S.prototype.bEt=function(t){return this.XOt[t]||!this.CEt()||(0,b.isNullOrEmpty)(this._dataSource.l7t(t))||(this.XOt[t]=new s.HierarchyField(t,this)),!this.XOt[t]&&"="===t[0]&&(0,c.hasWindowOverFormulas)(t)&&this.Xhe(t),this.XOt[t]||(this.XOt[t]=new("="===t[0]?v.CalcField:p.TableField)(t,this)),this.XOt[t]},S.prototype.Cve=function(t){var n,r,i,e,u,o,s,c,f,a,h,l,d,n=this.XOt;if(t.D5?r=t.D5:(r="="!==(r=this.wde(t))[0]?"="+r:r,t.D5=r),u=(e=r).indexOf("=[@"),o=r.lastIndexOf("]"),s=0===u&&o===r.length-1){for(h=a=!1,l=c=u+3,d=f=o-1;l<d&&("["!==r[l]&&c===u+3&&(a=!0,u=l),"]"!==r[d]&&f==o-1&&(h=!0,o=d),!a||!h);l++,d--);e=r.slice(u,o+1)}return i=n[e],(0,b.isNullOrUndefined)(i)&&(i=n[e]=s?new p.TableField(e,this):new v.CalcField(e,this,t)),s?function(t){return i.getValue(t)}:function(t){return i.getValueWithContext(t)}},S.prototype.Xhe=function(t){for(var n,r,i,e,u,u,n=this,r=(0,c.getWindowOverFormulas)(t,!1),i=(0,c.getWindowOverFormulas)(t),e=0;e<i.length;e++)u=i[e],(u=(0,c.deconstructWindowOverFunction)(n,u)).originalWindowOverFormula=r[e],n.qhe(u.windowOverFormula,u)},S.prototype.qhe=function(t,n){var r,i,e,u,o;if(!(this.XOt[t]&&this.XOt[t]instanceof c.WindowOverCalcField)){if(r=n.partitions,i=n.orders,(0,b.isArray)(r))for(e=0;e<r.length;e++)u=r[e],this.columns[u.field]||this.rRt(u.field);if((0,b.isArray)(i))for(e=0;e<i.length;e++)o=i[e],this.columns[o.field]||this.rRt(o.field);this.XOt[t]=new c.WindowOverCalcField(t,this,n),this.XOt[n.originalWindowOverFormula]=this.XOt[t]}return this.XOt[t]},S.prototype.Jhe=function(){return this.$he(!0)},S.prototype.$he=function(t){},S.prototype.fme=function(){return 1===Object.keys(this.views).length},S.prototype.ZRt=function(t){var t=this.XOt[t];return t&&t.setValue},S.prototype.WRt=function(t,n,r){this.rRt(t);var i=this.XOt[t];return this.o_t(t),i&&i.setValue&&i.setValue(n,r)},S.prototype.QRt=function(t,n,r,i,e){this.rRt(t);var u=this.XOt[t];return this.o_t(t),u&&u.setItemValue&&u.setItemValue(n,r,i,e)},S.prototype.KRt=function(t,n){this.rRt(t);var t=this.XOt[t];return t&&t.hasItem&&t.hasItem(n)},S.prototype.JRt=function(t,n,r,i,e){this.rRt(t);var u=this.XOt[t];return this.o_t(t),u&&u.insertItem&&u.insertItem(n,r,i,e)},S.prototype._getValueByField=function(t,n){return this.rRt(t),this.XOt[t].getValue(n)},S.prototype.XRt=function(t,n){return this.rRt(t),this.XOt[t].getOriginalValue(n)},S.prototype.qRt=function(t){return this.rRt(t),this.XOt[t].getRelatedTable()},S.prototype.$Rt=function(t){return this.rRt(t),this.XOt[t].getRelationMaps()},S.prototype.tBt=function(t){for(var n,r,i,e,u,o,n=this,r,i,e=0,u=n.QOt.relationships;e<u.length;e++){if((o=u[e]).sourceTable===n&&o.sourceFieldName===t)return o.targetTable;if(o.targetTable===n&&o.targetFieldName===t)return o.sourceTable}},S.prototype.nBt=function(t,n){return this.rRt(t),this.XOt[t].getHostTableIndexes(n)},S.prototype.rRt=function(t){return this.XOt[t]||this.bEt(t),this.XOt[t]},S.prototype.xOt=function(t,n,r,i,e){var n={name:n,sourceField:t,targetTable:r,targetField:i,CRt:e};return this.Pq.push(n),n},S.prototype.kOt=function(t){for(var n=this.Pq.length-1;0<=n;n--)this.Pq[n].CRt===t&&this.Pq.splice(n,1)},S.prototype.eBt=function(){for(var t,n,r,i,t=[this],n=this.Pq,r=0;r<n.length;r++)i=n[r].targetTable,-1===t.indexOf(i)&&t.push(i);return t},S.prototype.iBt=function(n){var r,t,i,r=this,t=r.Pq,i={};return t.forEach(function(t){var t=t.name;i[t]=r._getValueByField(t,n)}),i},S.prototype.ltt=function(){return this.Pq},S.prototype.rBt=function(t){var t=this.jRt(t);return t&&t.dataType},S.prototype.jRt=function(t){var n,r,i,n=this,r=n._dataSource.options.schema;return r&&r.columns&&r.columns[t]?i=r.columns[t]:(0,b.isNullOrUndefined)(n.columns)||(i=n.columns[t]),i},S.prototype.oBt=function(t){var n,r,t;return 0===t.length?[]:((t=(r=(n=this).zRt(t[0]))&&r.targetTable?r.targetTable.oBt(t.slice(1)):[]).unshift(r),t.filter(function(t){return!(0,b.isNullOrUndefined)(t)}))},S.prototype.toJSON=function(){var t,n,r,t=this.views,n=[];for(r in t)t.hasOwnProperty(r)&&n.push(t[r].toJSON());return{name:this.name,dataSourceOption:C(this._dataSource.options),primaryKey:this.primaryKey(),views:n,columns:this.aBt(this.columns)}},S.prototype.fromJSON=function(t){for(var n,r,i,e,u,n,r=0,i=t.views;r<i.length;r++)e=i[r],(u=this.addView(e.name,e.columns,!1,e.options)).fromJSON(e);this.columns=t.columns,this.primaryKey(t.primaryKey)},S.prototype.bind=function(t,n){this._dataSource.bind(t,n)},S.prototype.unbind=function(t,n){this._dataSource.unbind(t,n)},S.prototype.ki=function(t,n){return this._dataSource.ki(t,n)},S.prototype.vOt=function(t){return this._dataSource.vOt(t)},S.prototype.aBt=function(t){var n,r;for(n in t)t.hasOwnProperty(n)&&!(0,b.isNullOrUndefined)(t[n])&&((r=t[n]).W5=r.dataType);return t},S.prototype.z7t=function(t,n,r){return this._dataSource.z7t(t,n,r)},S.prototype.V7t=function(t){return this._dataSource.V7t(t)},S.prototype.d7t=function(t,n,r){return this._dataSource.d7t(t,n,r)},S.prototype.uBt=function(){return this._dataSource.$jt()},S.prototype.qX=function(){return this._dataSource.qX()},S.prototype.m7t=function(t,n,r,i){return this.CEt()&&this.NRt(),this._dataSource.m7t(t,n,r,i)},S.prototype.CEt=function(){return this._dataSource.isHierarchy()},S.prototype.isHierarchy=function(){return this.CEt()},S.prototype.getHierarchyType=function(){return this._dataSource.Fjt()},S.prototype.isHierarchyOptionChanged=function(){return this._dataSource.a7t()},S.prototype.setHierarchyOptionChanged=function(){this._dataSource.u7t()},S.prototype.rebuildHierarchyStructure=function(){return this._dataSource.load({reload:!0})},S.prototype.SEt=function(t){return this._dataSource.SEt(t)},S.prototype.f7t=function(){return this._dataSource.f7t()},S.prototype.getHierarchyRootNode=function(){return this.f7t()},S.prototype.M7t=function(t){this._dataSource.M7t(t),this.NRt()},S.prototype.S7t=function(t,n){this._dataSource.S7t(t,n),this.NRt()},S.prototype.O7t=function(t,n){return this._dataSource.O7t(t,n)},S.prototype.L7t=function(t,n){return this._dataSource.L7t(t,n)},S.prototype.F7t=function(t,n){return this._dataSource.F7t(t,n)},S.prototype.G7t=function(t,n){return this._dataSource.G7t(t,n)},S.prototype.Xme=function(t){return this._dataSource.Xme(t)},S.prototype.H7t=function(t){return this._dataSource.H7t(t)},S.prototype.h7t=function(t,n){return this._dataSource.h7t(t,n)},S.prototype.isColumnSpreadChanged=function(){return this._dataSource.Cue()},S.prototype.setColumnSpreadChanged=function(t){this._dataSource.Sue(t)},n.Table=S},"./dist/src/table/tableEvents.js":function(t,n){"use strict";var r;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),n.Events=void 0,i.ItemInserting="ItemInserting",i.ItemInserted="ItemInserted",i.ItemUpdating="ItemUpdating",i.ItemUpdated="ItemUpdated",i.ItemResetting="ItemResetting",i.ItemReset="ItemReset",i.ItemSaving="ItemSaving",i.ItemSaved="ItemSaved",i.ItemRemoving="ItemRemoving",i.ItemRemoved="ItemRemoved",i.ChangesSubmitting="ChangesSubmitting",i.ChangesSubmittedRowFailed="ChangesSubmittedRowFailed",i.ChangesSubmitted="ChangesSubmitted",i.ChangesCancelling="ChangesCancelling",i.ChangesCancelled="ChangesCancelled",n.Events=i},"./dist/src/table/tableField.js":function(t,n,r){"use strict";var f,c,i,e;function a(o,s,c){return function(t,n,r,i){var e=o.map[t],u=e;return(0,f.isNullOrUndefined)(u)&&(e=o.map[t]=[]),n[s.targetField]=c._getValueByField(s.sourceField,t),o.relatedTable.JRt(o.subField,void 0,n,function(t){e.push(t.index),t.index=e.length-1,r&&r(t)},i)}}function u(t,o){var e,s,u,t,t,e=this;this.Oit=[],s="string"==typeof t?t.split("."):t,!(u=s[0]&&o.zRt(s[0]))&&s[0]&&(t=o.Ole(s[0]))&&(u=t.field,s[0]=t.fieldName),u&&u.targetTable?(this.relatedTable=u.targetTable,this.map=u.LOt,this.setValue=null,this.map||(u.CRt.BOt(),this.map=u.LOt),this.getRelationMaps=function(){var t=[{name:u.name,relationshipMap:u.CRt.DOt(u.name)}];if(this.relatedTable)return this.subField?t.concat(this.relatedTable.$Rt(this.subField)):t},this.getHostTableIndexes=function(t){var n,r,t,r,i,n=[t];return this.relatedTable?(this.subField&&(n=this.relatedTable.nBt(this.subField,t)),t=void 0,t=(r=u.CRt).targetTable===this.relatedTable?r.targetRelationshipName:r.sourceRelationshipName,r=this.relatedTable.zRt(t),i=r.LOt,n.reduce(function(t,n){return t.concat(i[n])},[])):n},"object"===u.type?1===s.length?(this.getValue=function(t){var t=e.map[t];return(0,f.isNullOrUndefined)(t)?c:e.relatedTable.vRt(t[0])},this.setValue=function(t){var n=t[s[0]];return t[u.sourceField]=n?n[u.targetField]:null,t}):(this.subField=s.slice(1).join("."),this.getValue=function(t){var t=e.map[t];return(0,f.isNullOrUndefined)(t)?c:e.relatedTable._getValueByField(e.subField,t[0])},this.getOriginalValue=function(t){var t=this.map[t];return(0,f.isNullOrUndefined)(t)?c:this.relatedTable.XRt(this.subField,t[0])},this.setItemValue=function(t,n,r,i){var t=e.map[t];return(0,f.isNullOrUndefined)(t)?c:e.relatedTable.QRt(e.subField,t[0],n,r,i)},this.hasItem=function(t){var t=e.map[t];return!(0,f.isNullOrUndefined)(t)&&e.relatedTable.KRt(e.subField,t[0])},this.insertItem=a(this,u,o)):1===s.length?this.getValue=function(t){var t=e.map[t];return(0,f.isNullOrUndefined)(t)?[]:e.relatedTable.VRt(t)}:(t=s[1]-1,isNaN(t)?(this.subField=s.slice(1).join("."),this.getValue=function(t){var t=e.map[t];return(0,f.isNullOrUndefined)(t)?c:e.relatedTable.YRt(e.subField,t)},this.getOriginalValue=function(t){var t=this.map[t];return(0,f.isNullOrUndefined)(t)?c:this.relatedTable.XRt(this.subField,t)},this.hasItem=function(t){var t=e.map[t];return t&&0<t.length},this.insertItem=a(this,u,o)):2===s.length?(this.arrayFieldIndex=s[1]-1,this.getValue=function(t){var t,t,t=e.map[t],t=t&&t[e.arrayFieldIndex];return(0,f.isNullOrUndefined)(t)?c:e.relatedTable.vRt(t)}):(this.arrayFieldIndex=t,this.subField=s.slice(2).join("."),this.getValue=function(t){var t,t,t=e.map[t],t=t&&t[e.arrayFieldIndex];return(0,f.isNullOrUndefined)(t)?c:e.relatedTable._getValueByField(e.subField,t)},this.getOriginalValue=function(t){var t,t,t=this.map[t],t=t&&t[this.arrayFieldIndex];return(0,f.isNullOrUndefined)(t)?c:this.relatedTable.XRt(this.subField,t)},this.setItemValue=function(t,n,r,i){var t,t,t=e.map[t],t=t&&t[e.arrayFieldIndex];if(!(0,f.isNullOrUndefined)(t))return e.relatedTable.QRt(e.subField,t,n,r,i)}))):(0===s.length?this.getValue=function(t){return o._dataSource.get(t)}:1===s.length?(this.getValue=function(t){return o._dataSource.getFieldValue(s[0],t)},this.getOriginalValue=function(t){return o._dataSource.getFieldOriginalValue(s[0],t)},this.getRelatedTable=function(){return o},this.setItemValue=function(t,n,r,i){return o.updateItemValue(t,s[0],n,r,i)},this.hasItem=function(t){return o._dataSource.length()>t},this.insertItem=function(t,n,r,i){var e=(0,f.isNullOrUndefined)(t)?o.length():t;return o.insertItem(e,n,function(t){t.index=e,r&&r(t)},i)}):(this.getValue=function(t){for(var n,r,n=o._dataSource.getFieldValue(s[0],t),r=1;n&&r<s.length;r++)n=n instanceof Array?n[s[r]-1]:n[s[r]];return n},this.setItemValue=function(t,n,r,i){var e,u,u,u=o._getValueByField(s[0],t);if(!(0,f.isNullOrUndefined)(u))return u=(0,f.clone)(u,!0),this.setValue(((e={})[s[0]]=u,e),n),o.updateItemValue(t,s[0],u,r,i)}),this.setValue=function(t,n){for(var r,i,e,u,r=t,i=t,e=s.length,u=0;i&&u<e;u++)r=i instanceof Array?i[s[u]-1]:i[s[u]],u!==e-1&&(i=r);return i!==r&&(r!==n||(0,f.isNullOrUndefined)(r)&&(0,f.isNullOrUndefined)(n))&&(i[s[e-1]]=n),t})}Object.defineProperty(n,"__esModule",{value:!0}),n.TableField=void 0,f=r("./dist/src/dataSource/utils.js"),c=null,i=void 0,u.prototype.getValue=function(t){return null},u.prototype.getValues=function(t,n,r){var i,e;if(n=(0,f.isNumber)(n)?n:0,r=(0,f.isNumber)(r)?r:t.length-1,(i=this.Oit).length!==t.length||this._me!==t)for(this._me=t,this.Oit=i=[],e=i.length;e<t.length;e++)i.push(this.getValue(t[e]));return i.slice(n,r+1)},u.prototype.setValue=function(t,n){return null},u.prototype.setItemValue=function(t,n,r,i){},u.prototype.hasItem=function(t){},u.prototype.insertItem=function(t,n){},u.prototype.getOriginalValue=function(t){return null},u.prototype.getRelatedTable=function(){if(this.relatedTable)return this.subField?this.relatedTable.qRt(this.subField):this.relatedTable},u.prototype.getRelationMaps=function(){return[]},u.prototype.getHostTableIndexes=function(t){return[t]},n.TableField=u},"./dist/src/table/windowOverField.js":function(t,n,r){"use strict";var i,o,e,h,I,x,r,A,u,s,c;function f(t,n,r){var i=c.call(this,r.windowFormula,n)||this;return i.GOt=t,i.options=r,i.Qhe=function(t){return n.rRt(t)},i.tde={evaluator:i},i.nde=!0,i.Sve(),i.Tve(),i}function P(t,n,r,i,e){var u,o,s,c,f;for(void 0===e&&(e=!1),u=r,o=i,s=A;u<=o;)n<=(f=t(c=Math.floor((u+o)/2)))?(e?u=c+1:o=c-1,s=c):e?o=c-1:u=c+1;return s}function D(t,n,r,i,e){var u,o,s,c,f;for(void 0===e&&(e=!1),u=r,o=i,s=A;u<=o;)(f=t(c=Math.floor((u+o)/2)))<=n?(e?o=c-1:u=c+1,s=c):e?u=c+1:o=c-1;return s}function L(t,n,r,i,e){for(var u,o,s,c,f,a,h,l,u=i,o=e,s=A,c=r.length-1;u<=o;){for(a=!0,h=t(f=Math.floor((u+o)/2)),l=c;0<=l;l--)if(r[l]!==n(h,l)){a=!1;break}a?(u=f+1,s=f):o=f-1}return s}function k(t,n,r,i){for(var e,u,o,s,e=r,u=i,o=A;e<=u;)t(s=Math.floor((e+u)/2))===n?(e=s+1,o=s):u=s-1;return o}function V(t,n,r,i){var e,u,o,s,c;for(void 0===i&&(i=!1),e=n,u=r,o=A;e<=u;)c=t(s=Math.floor((e+u)/2)),(0,x.isNullOrUndefined)(c)?(i?u=s-1:e=s+1,o=s):i?e=s+1:u=s-1;return o}function G(t){return(0,x.isNumber)(t)&&-1<t?t:0}function a(t){return"string"==typeof t&&-1<t.indexOf(h.WINDOWOVER)}function l(t,n){var r,i,e,u,o,s,c,f,a,r=[],i=h.WINDOWOVER.length,e=i+2,u=0,o=0;do{if(-1===(u=t.indexOf(h.WINDOWOVER,u)))break;for(o=u+i,s=0,c="=".concat(h.WINDOWOVER),f=0;o<t.length;o++)if((" "!==(a=t[o])||" "===a&&(!1===n||0<f))&&(c+=a),"("===a)s++;else if(")"===a){if(0===--s)break}else"["===a?f++:"]"===a&&f--}while(o!==t.length&&(r.push(c),u=o,t.length-u>=e));return r}function d(t,n){var t,r,i,e,u,t=t.nMt(t.Ywt(n.replace(h.WINDOWOVER,h.WINDOWOVERDECONSTRUCT))),r=(t.partitions||[]).reduce(function(t,n){return"".concat(t,"__").concat(n.field)},"p"),i=(t.orders||[]).reduce(function(t,n){return"".concat(t,"__").concat(n.field,"_").concat(n.ascending)},"o"),e="f",u=t.windowFrame;return u&&(e+="__".concat(u.type),u.begin&&(e+="__p__".concat(u.begin.type,"__").concat(u.begin.offset)),u.end)&&(e+="__f__".concat(u.end.type,"__").concat(u.end.offset)),o({partitionKey:r,orderKey:i,frameKey:e,windowOverFormula:n},t)}i=this&&this.__extends||(s=function(t,n){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(n,"__esModule",{value:!0}),n.deconstructWindowOverFunction=n.getWindowOverFormulas=n.hasWindowOverFormulas=n.WindowOverCalcField=void 0,e=r("./dist/src/calculation/functions/windowFunctions/util.js"),h=r("./dist/src/calculation/functions/windowOvers/util.js"),I=r("./dist/src/dataSource/dataSource.interface.js"),x=r("./dist/src/dataSource/utils.js"),r=r("./dist/src/table/calcField.js"),A=-1,c=r.CalcField,i(f,c),f.prototype.P6t=function(){},f.prototype.C8=function(){this.Tl=[],this.nde=!0,this.Sve()},f.prototype.getValue=function(t){return this.Tl[t]},f.prototype.XBt=function(t,n,r,i){var e,u,o,s,e=this;if(e.Tl||(e.Tl=[]),r=(0,x.isNumber)(r)?r:0,i=(0,x.isNumber)(i)?i:t.length-1,(0,x.isArray)(n))for(o=r,s=0;o<=i;o++,s++)u=t[o],e.Tl[u]=n[s];else for(o=r;o<=i;o++)u=t[o],e.Tl[u]=n;return e.Tl},f.prototype.Sve=function(){var t,n,r,i,t=this,n=t.options,r=t.Ave={};if((0,x.isArray)(n.orders))for(i=0;i<n.orders.length;i++)r[n.orders[i].field]={}},f.prototype.Tve=function(){var t=this,n=t.options.windowFormula,r=[e.ROWNUMBER,e.WRANK,e.DENSERANK,e.WPERCENTRANK,e.CUMEDIST,e.LEAD,e.LAG,e.NTILE,e.FIRSTVALUE,e.LASTVALUE,e.NTHVALUE];t.Ive=!r.some(function(t){return-1<n.indexOf(t)})},f.prototype.nMt=function(t,n,r,i){var e,t,n,e=this;return e.calcSource.pe(t,n,r),(t=4===arguments.length)&&e.calcSource.wEt("extendContext",i),n=e.calcService.evaluateExpression(e.calcSource,e.expression,{row:0,col:0}),t&&e.calcSource.wEt("extendContext"),n},f.prototype.ede=function(t,n,r,i,e){var u=this,o=u.tde.valueCache,s,c;!(0,x.isNullOrUndefined)(o)||-1===n&&-1===r||(u.tde.begin=(0,x.isNumber)(e)?e:n,c=u.nMt(t,n,r,u.tde),(0,x.isNumber)(i)&&(n=r=i),o=u.tde.valueCache,(0,x.isNullOrUndefined)(o)||(c=o,n=e,r=void 0),u.XBt(t,c,n,r))},f.prototype.xve=function(t){return this.Ave[t]},f.prototype.Nve=function(t,n,r){var i=n[r];return i=void 0===i?n[r]=this.calcSource.nM._getValueByField(t,r):i},f.prototype.evaluateWindowFunction=function(t,n){var r=this;r.ide(t,n||0),r.rde(),r.nde=!1},f.prototype.rde=function(){this.tde.begin=void 0,this.tde.valueCache=void 0},f.prototype.ide=function(t,n){var r=this,i=r.options.windowFrame;i&&-1===i.begin.offset&&i.end&&-1===i.end.offset||(r.Ive?r.ode(r.options.windowFrame,t,n):r.ede(t,n,void 0,void 0,n))},f.prototype.ode=function(t,n,r){for(var i,e,u,o,i=this,e={startIndex:r,endIndex:r},u=r,o=n.length;u<o;u++)i.Khe(t,r,u,n,e),i.ede(n,e.startIndex,e.endIndex,u,r)},f.prototype.Khe=function(t,n,r,i,e){var u,o,s,c,f,a,h,t,h,u=this;(0,x.isNullOrUndefined)(t)?f=(0,x.isNullOrUndefined)(u.options.orders)||0===u.options.orders.length?(o=I.WindowOverFrameType.ROWS,s=I.WindowOverFramePreceding.UnBounded,I.WindowOverFrameFollowing.UnBounded):(o=I.WindowOverFrameType.RANGE,s=I.WindowOverFramePreceding.UnBounded,I.WindowOverFrameFollowing.CurrentRow):(o=t.type,h=t.begin,t=t.end,h&&(s=h.type,c=h.offset),t?(f=t.type,a=t.offset):f=I.WindowOverFrameFollowing.CurrentRow,o!==I.WindowOverFrameType.RANGE||!(0,x.isNullOrUndefined)(u.options.orders)&&0!==u.options.orders.length||(o=I.WindowOverFrameType.ROWS,s=I.WindowOverFramePreceding.UnBounded,f=I.WindowOverFrameFollowing.UnBounded)),h=i.length-1,o===I.WindowOverFrameType.RANGE?(s===I.WindowOverFrameFollowing.NFollowing?e.startIndex=u.ude(s,c,n,h,r,i,-1===e.startIndex?r+1:e.startIndex,!0):e.startIndex=u.ade(s,c,n,r,i,-1===e.startIndex?n:e.startIndex),f===I.WindowOverFramePreceding.NPreceding?e.endIndex=u.ade(f,a,n,r,i,-1===e.endIndex?n:e.endIndex,!0):e.endIndex=u.ude(f,a,n,h,r,i,-1===e.endIndex?r+1:e.endIndex),e.startIndex>e.endIndex?(e.startIndex=-1,e.endIndex=-1):u.Dme(s,f,n,h,e)):o===I.WindowOverFrameType.ROWS&&(s===I.WindowOverFrameFollowing.NFollowing?e.startIndex=u.cde(f,c,h,r):e.startIndex=u.sde(s,c,n,r),f===I.WindowOverFramePreceding.NPreceding?e.endIndex=u.sde(s,a,n,r):e.endIndex=u.cde(f,a,h,r),u.Dme(s,f,n,h,e))},f.prototype.Dme=function(t,n,r,i,e){t===I.WindowOverFramePreceding.UnBounded?n===I.WindowOverFramePreceding.NPreceding?-1!==e.startIndex&&-1===e.endIndex&&(e.startIndex=-1):n===I.WindowOverFrameFollowing.NFollowing&&-1!==e.startIndex&&-1===e.endIndex&&(e.endIndex=i):t===I.WindowOverFramePreceding.NPreceding?n===I.WindowOverFramePreceding.NPreceding||n===I.WindowOverFramePreceding.CurrentRow?-1===e.startIndex&&-1!==e.endIndex&&(e.startIndex=r):n!==I.WindowOverFrameFollowing.NFollowing&&n!==I.WindowOverFrameFollowing.UnBounded||(-1===e.startIndex&&(e.startIndex=r),-1===e.endIndex&&(e.endIndex=i)):t===I.WindowOverFramePreceding.CurrentRow?n===I.WindowOverFrameFollowing.NFollowing&&-1===e.endIndex&&(e.endIndex=i):t===I.WindowOverFrameFollowing.NFollowing&&(n===I.WindowOverFrameFollowing.NFollowing?-1!==e.startIndex&&-1===e.endIndex?e.endIndex=i:-1===e.startIndex&&-1!==e.endIndex&&(e.endIndex=-1):n===I.WindowOverFrameFollowing.UnBounded&&-1===e.startIndex&&-1!==e.endIndex&&(e.endIndex=-1))},f.prototype.sde=function(t,n,r,i){var e;switch(t){case I.WindowOverFramePreceding.UnBounded:e=r;break;case I.WindowOverFramePreceding.NPreceding:e=r<=(e=i-G(n))?e:-1;break;default:I.WindowOverFramePreceding.CurrentRow;e=i}return e},f.prototype.cde=function(t,n,r,i){var e;switch(t){case I.WindowOverFrameFollowing.UnBounded:e=r;break;case I.WindowOverFrameFollowing.NFollowing:e=(e=i+G(n))<=r?e:-1;break;default:I.WindowOverFrameFollowing.CurrentRow;e=i}return e},f.prototype.ade=function(t,n,r,i,e,u,o){var s,c,f,a,h,l,d,v,p,d,w,b,j,m,_,y,g,O,S,C,R,N,T,j,E,s=this,f=s.options.orders;switch(t){case I.WindowOverFramePreceding.NPreceding:if(n=G(n),c=r,1===f.length&&r<=(c=i))if(a=f[0].field,h=f[0].ascending,l=s.xve(a),d=s.Nve(a,l,e[i]),(0,x.isNullOrUndefined)(d)){if(v=e[i-1],d!==(p=s.Nve(a,l,v)))return c;c=u}else(0,x.isNumber)(d)&&(d=!1===h?d+n:d-n,w=function(t){return s.Nve(a,l,e[t])},j=e[b=i-1],c=(_=(m=!(0,x.isNumber)(j)||i===r)||(!1===h?d<s.Nve(a,l,j):d>s.Nve(a,l,j)))?o?m?-1:b:i:o?!1===h?P(w,d,u,b,!0):D(w,d,u,b):!1===h?D(w,d,u,b,!0):P(w,d,u,b));break;case I.WindowOverFramePreceding.UnBounded:c=r;break;default:I.WindowOverFramePreceding.CurrentRow;if(r<(c=i)){if(1===f.length){if(y=f[0].field,g=s.xve(y),O=s.Nve(y,g,e[i]),v=e[i-1],O!==(S=s.Nve(y,g,v)))return c}else{for(O=[],C=[],R=[],g=y=void 0,N=e[i],T=0;T<f.length;T++)y=f[T].field,g=s.xve(y),C.push(y),R.push(g),O.push(s.Nve(y,g,N));for(v=void 0,j=O.length-1,v=e[i-1],E=j;0<=E;E--)if(O[E]!==s.Nve(C[E],R[E],v))return c}c=u}}return c},f.prototype.ude=function(t,n,r,i,e,u,o,s){var c,f,a,h,l,d,v,p,w,b,j,m,v,_,y,g,O,y,S,C,R,N,T,E,F,_,M,c=this,a=c.options.orders;switch(t){case I.WindowOverFrameFollowing.NFollowing:n=G(n),f=i,1===a.length&&(h=a[0].field,l=a[0].ascending,d=c.xve(h),v=c.Nve(h,d,u[e]),p=function(t){return c.Nve(h,d,u[t])},(0,x.isNullOrUndefined)(v)?(w=!0,e!==r&&(b=u[e-1],w=!(0,x.isNumber)(b)||v!==c.Nve(h,d,b)),f=o,w&&(j=u[e+1],f=(m=!(0,x.isNumber)(j)||v!==c.Nve(h,d,j))?e:V(p,o,i,!1===l))):(0,x.isNumber)(v)&&(v=!1===l?v-n:v+n,j=u[_=e+1],f=(m=(y=!(0,x.isNumber)(j)||e===i)||(!1===l?v>c.Nve(h,d,j):v<c.Nve(h,d,j)))?s?y?-1:_:e:s?!1===l?D(p,v,o,i,!0):P(p,v,o,i):!1===l?P(p,v,o,i,!0):D(p,v,o,i)));break;case I.WindowOverFrameFollowing.UnBounded:f=i;break;default:I.WindowOverFrameFollowing.CurrentRow;if(1===a.length)g=a[0].field,O=c.xve(g),y=c.Nve(g,O,u[e]),p=function(t){return c.Nve(g,O,u[t])},w=!0,e!==r&&(b=u[e-1],w=!(0,x.isNumber)(b)||y!==c.Nve(g,O,b)),f=o,w&&(j=u[e+1],f=(m=!(0,x.isNumber)(j)||y!==c.Nve(g,O,j))?e:k(p,y,o,i));else{for(S=[],C=[],R=[],T=N=void 0,E=u[e],F=0;F<a.length;F++)N=a[F].field,T=c.xve(N),C.push(N),R.push(T),S.push(c.Nve(N,T,E));_=function(t){var n,r,i,n=u[t],r=!(0,x.isNumber)(n);if(!r)for(n=u[n],i=a.length-1;0<=i;i--)if(S[i]!==c.Nve(C[i],R[i],n)){r=!0;break}return r},f=o,w=!0,(w=e!==r?_(e-1):w)&&((m=_(e+1))||(f=L(M=function(t){return u[t]},p=function(t,n){return c.Nve(C[n],R[n],t)},S,o+1,i))===A)&&(f=e)}}return f},n.WindowOverCalcField=f,n.hasWindowOverFormulas=a,n.getWindowOverFormulas=l,n.deconstructWindowOverFunction=d},"./dist/src/viewField/fieldManager.js":function(t,n,r){"use strict";var u,c,M,o,I,j,s,R;function f(i,e,u,o){return function(t,n){var n,r,n=i.getField(n),r=u&&!(0,s.isGroupSlice)(n.name)&&n.extra&&n.extra.caption||n.name;return o&&n instanceof j.ColumnDataReaderField||(t[r]=n.getValue(e)),t}}function i(t,n){this.Pq=[],this.Z={},this.positionOfField=[],this.keysOfBaseField=[],this.sBt=t,this.cBt={},this.nM=n}function e(t,n){for(var n,r,i,e,u,o,s,c,n=n.valueRelation,r=n.split("."),i=t(n),e="",u=!1,o=!1,s=0;s<r.length;s++)c=i[s],(0,M.isNullOrEmpty)(r[s])||(e+=".".concat(r[s])),!o&&c&&"array"===c.type&&c.name===r[s]&&(u=o=!0,e+=".".concat(I.RelationTemplateToken));return{isOneToMany:u,relationTemplate:e.slice(1)}}function a(t,n,r,i){var e,u,e=P(t),u;return{valueRelation:t,valueCaption:n||e,valueIndex:r,valueCrossKey:i}}function x(t){for(var n,r,i,e,u,n=t.columns,r=t.crossKeys,i=t.initialOptionIndex,e=[],u=0;u<n.length;u++)e.push(a(n[u].value,n[u].caption,i+u,r[u]));return e}function A(t,n){return h(t,n,"")}function h(t,n,r){return!(0,M.isNullOrEmpty)(n)&&0<=t.indexOf(n)?h(t=t.replace(n,r),n,r):t}function m(t){var t=t.value;return"string"==typeof t?t:"function"==typeof t?t.name:void 0}function l(t){var t,t="string"==typeof t||(0,M.isNullOrUndefined)(t)?t:"function"==typeof t?t.name:t.value;return(t||"").split(".")}function P(t){var t=l(t);return t[t.length-1]}function D(t){if(!(0,M.isNullOrEmpty)(t.formatter))return t.formatter}function L(t){var t=l(t);return t[t.length-2]}function k(t,n){var t=l(t);return n&&t.splice(t.length-1,0,""),t.slice(0,t.length-1).join(".")}function V(t){return"string"==typeof t?[t]:t||[]}function _(t){for(var n,r,i,e,u,n=0,r={},i=0;i<t.length;i++)e=t[i].caption,(0,M.isArray)(e)?(t[i].caption=e.map(function(t){return null==t?void 0:t.toString()}),r[i]=e.length,n<r[i]&&(n=r[i])):t[i].caption=null==e?void 0:e.toString();for(i in r)if(r[i]<n)for(u=n-r[i],e=t[i].caption;0<u;)e.unshift(),u--;for(i=0;i<t.length;i++)e=t[i].caption,(0,M.isArray)(e)&&1===e.length&&(t[i].caption=e[0])}function d(t,n){var t,t,t,r,t=t.qRt(n);if(!((0,M.isNullOrUndefined)(t)||(t=t._dataSource.options.schema,(0,M.isNullOrUndefined)(t))||(t=t.columns,(0,M.isNullOrUndefined)(t))||(r=t[P(n)],(0,M.isNullOrUndefined)(r))))return r.lookup}function v(t,n){return p(t,n)||w(t,n)}function p(t,n){return(0,M.isArray)(d(t,n))}function w(t,n){var r,i,e,u,n,r=d(t,n);if((0,M.isObject)(r)&&(r=r.name),(0,M.isString)(r))return i=t.qRt(n),e=P(n),u=P(r),n=t.QOt.relationships.find(function(t){return t.sourceTable===i&&t.sourceFieldName===e&&t.sourceRelationshipName===u}),!(0,M.isNullOrUndefined)(n)}function b(t,n,r){var i=P(r),r=S(t,function(t){return t.sourceFieldName===i&&t.sourceTable===n});return r?{relationTable:r.targetTable,relationPrimaryKey:r.targetFieldName,relationTableName:r.sourceRelationshipName}:{}}function y(t,n,r){var i,n,e,u,n,u,n,e,u,i,i=n.over,n=n.attributes;return!((0,M.isNullOrEmpty)(i)||(0,M.isNullOrEmpty)(r)||r===i||g(t,r)||(e=l(r),n=!(u=p(t,i))&&w(t,i)&&n&&0<n.length,!u&&!n)||(u=b(t,O(t,i),i),-1<e.indexOf(u.relationTableName)))&&(n=t.$Rt(i),e=t.$Rt(r),!(!n.every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne})||!e.every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne}))||(u=(0,M.findIndex)(n,function(t){return t.relationshipMap===o.RelationshipMap.OneToMany}),i=(0,M.findIndex)(e,function(t){return t.relationshipMap===o.RelationshipMap.OneToMany}),-1<u&&u===i&&n[u].name===e[i].name?n.slice(u+1).every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne})&&e.slice(u+1).every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne}):void 0))}function g(t,n){var r=O(t,n),i=P(n);return r.jOt(i)||S(t,function(t){return t.sourceTable===r&&t.sourceFieldName===i||t.targetTable===r&&t.targetFieldName===i})}function O(t,n){return t.qRt(n)}function S(t,n){return t.QOt.relationships.find(n)}function C(t){var i=t.ascending,r=t.compare;return r?function(t,n){return r(t.extra.caption,n.extra.caption,i)}:function(t,n){var t=t.extra.caption,n=n.extra.caption,r=i?t:n,n=i?n:t;return n<r?1:r<n?-1:0}}u=this&&this.__spreadArray||function(t,n,r){if(r||2===arguments.length)for(var i=0,e=n.length,u;i<e;i++)!u&&i in n||((u=u||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(n,"__esModule",{value:!0}),n.isValidCross=n.isLookupRelationField=n.isLookupListField=n.isLookupField=n.getLookupBy=n.FieldManager=void 0,c=r("CalcEngine"),M=r("./dist/src/dataSource/utils.js"),o=r("./dist/src/interfaces/interface.js"),I=r("./dist/src/viewField/utils.js"),j=r("./dist/src/viewField/fields.js"),s=r("./dist/src/viewField/groupManager.js"),i.prototype.hde=function(){return this.nM.length()},i.prototype.fBt=function(t,n){return this.nM._getValueByField(t,n)},i.prototype.lBt=function(t,n){return this.nM.XRt(t,n)},i.prototype.hBt=function(t){return this.nM.iBt(t)},i.prototype.dBt=function(t){return S(this.nM,t)},i.prototype.vBt=function(t){return O(this.nM,t)},i.prototype.mBt=function(t){return this.nM._dataSource._data[t].data},i.prototype.gBt=function(t){return!(0,M.isNullOrUndefined)(this.nM._dataSource._data[t])},i.prototype.oBt=function(t){return this.nM.oBt(t.split("."))},i.prototype.pBt=function(){return this.nM.POt},i.prototype.bBt=function(t){return d(this.nM,t)},i.prototype.yBt=function(t){return v(this.nM,t)},i.prototype.wBt=function(t){return p(this.nM,t)},i.prototype.MBt=function(t){return w(this.nM,t)},i.prototype.getTable=function(){return this.nM},i.prototype.getField=function(t){return this.Pq[t]},i.prototype.getFieldByPosition=function(t){return this.getField(this.positionOfField[t])},i.prototype.getFieldByName=function(t){return this.Z[t]},i.prototype.getFields=function(t){return this.Pq.filter(t)},i.prototype.kve=function(t,n,r,i,e){var u=this;f(u,r,i,e)(t,u.positionOfField[n])},i.prototype.getFieldValues=function(t,n,r){var i=this;return i.positionOfField.reduce(f(i,t,n,r),{})},i.prototype.CBt=function(t){var n=this;return n.positionOfField.filter(function(t){return-1===n.keysOfBaseField.indexOf(t)}).reduce(f(n,t),{})},i.prototype.moveFields=function(t,n,r){(0,M.swapArrayItems)(this.Pq,t,n,r)},i.prototype.moveFieldsByIndexes=function(t){var n=this;t.forEach(function(t){t.field=n.Pq[t.oldIndex]}),t.forEach(function(t){n.Pq[t.newIndex]=t.field})},i.prototype.removeFields=function(t,n){for(var r,i,e,u,o,r,i=0,e=this.Pq.splice(t,n||1);i<e.length;i++)u=e[i],-1<(o=this.keysOfBaseField.indexOf(u.key))&&this.keysOfBaseField.splice(o,1),-1<(o=this.positionOfField.indexOf(u.key))&&this.positionOfField.splice(o,1)},i.prototype.reset=function(){var r=this;r.positionOfField=r.keysOfBaseField.slice(),r.Pq=r.Pq.reduce(function(t,n){return-1<r.keysOfBaseField.indexOf(n.key)?t.concat(n):t},[]),r.Z={},r.Pq.forEach(function(t){r.Z[t.name]=t})},i.prototype.SBt=function(t){var n=this,r=n.cBt,e=r[t],u=n.pBt(),o=u.getCalcService(),e=e||(r[t]=n.fixExpression(o.parse(u,t,0,0)));return function(t,n,r,i){var t,n;return u.pe(t,n,r),(t=4===arguments.length)&&u.wEt("extendContext",i),n=o.evaluateExpression(u,e,{row:0,col:0}),t&&u.wEt("extendContext"),n}},i.prototype.TBt=function(t,n){var r=this,i=r.cBt,e=i[t],u=n||r.pBt(),o=u.getCalcService(),e=e||(i[t]=r.fixExpression(o.parse(u,t,0,0)));return function(t,n,r,i){var t,n;return u.pe(t,n,r),(t=4===arguments.length)&&u.wEt("extendContext",i),n=o.MX.evaluateExpression(e,u.getEvaluatorContext({row:0,col:0},!1),!1,!0),t&&u.wEt("extendContext"),(0,M.isNullOrUndefined)(n.toArray)?[]:n.toArray()}},i.prototype.fixExpression=function(t){var n,r,i,e,u,o,s,n=this;if(t.function)for(t.function.isReverseArgs&&t.function.isReverseArgs()&&t.arguments.reverse(),r=0,i=t.arguments;r<i.length;r++)e=i[r],n.fixExpression(e);else for(u=0,o=Object.getOwnPropertyNames(t);u<o.length;u++)t[s=o[u]]instanceof c.Expression&&n.fixExpression(t[s]);return t},i.prototype.ABt=function(t){var n=this;return t.key=n.Pq.length,n.Pq.push(t),n.Z[t.name]=t},i.prototype.addDataBaseField=function(t,n,r){var i=this,t=i.addColumnDataField(t,n,r);return i.IBt(t)},i.prototype.addReaderBaseField=function(t,n,r){var i,t,i=this,t=i.addColumnDataReaderField(t,"function"==typeof n?n:function(t){return i.fBt(n,t)},r,i.hde.bind(i));return i.IBt(t)},i.prototype.IBt=function(t){var n=this,r=t.key;return n.keysOfBaseField.push(r),n.positionOfField.push(r),t},i.prototype.addColumnDataField=function(t,n,r){return this.ABt(new j.ColumnDataField(t,n,r))},i.prototype.addColumnDataReaderField=function(t,n,r,i){return this.ABt(new j.ColumnDataReaderField(t,n,r,i))},i.prototype.addDataField=function(t,n){return this.ABt(new j.DataField(t,n))},i.prototype.addFormulaField=function(t,n){return this.ABt(this.xBt(t,n))},i.prototype.xBt=function(t,n){return new j.FormulaField(t,n,this.SBt(n))},i.prototype.addCategoryFormulaField=function(t,n){return this.ABt(this.NBt(t,n))},i.prototype.NBt=function(t,n){return new j.CategoryFormulaField(t,n,this.SBt(n))},i.prototype.addCategoryField=function(t,n){return this.ABt(this.kBt(t,n))},i.prototype.kBt=function(t,n){return new j.CategoryField(t,n)},i.prototype.addSliceCategoryField=function(t){return this.ABt(new j.SliceCategoryField(t))},i.prototype.DBt=function(t,n,r,i,e){for(var u,o,s,c,f,a,h,a,l,d,v,c,u=this,o=t.fieldExtra,s=t.field,l=0,d=r.length;l<d;l++)f=(a=r[l]).result,h=a.key,(0,M.isUndefined)(h)&&(v=a.value,t.field.addKey(v,a.recordRowNumbers[e]),c=t.field.getMap(),h=a.key=c[v]),a=t.sliceFields[h],(0,M.isUndefined)(a)&&(c=s.getValueByKey(h),(a=u.addSliceCategoryField((0,I.combineName)(c,"s",n.name))).setFieldExtra(o),a.setFieldManager(u),t.sliceFields[h]=a,t.sliceKeys.push(a.key)),a.setData(f,i,e)},i.prototype._Bt=function(n,t,r,i){var e=this;return(0,I.isField)(n)?e.getFieldByName(n):(0,I.isFormula)(n)?e.EBt((0,I.combineName)(n,"".concat(i,"_formula_source")),t,n,r):(0,I.isRelated)(n)?new j.ColumnDataReaderField((0,I.combineName)(n,"".concat(i,"_related_source")),function(t){return e.fBt(n,t)},{value:n},e.hde.bind(e)):e.getFieldByName(n)},i.prototype.EBt=function(t,n,r,i){var e,t=this.xBt((0,I.combineName)(t,n),r);return t.evaluateFormulaBy(i),t},i.prototype.buildGroupFields=function(t,c){var f=this,r,a,h=[];return t.forEach(function(t,n){var s,n,n;(0,M.isNullOrEmpty)(t.field)||(a=(0,M.isNullOrUndefined)(a)?r={}:a.group={},s=(0,I.combineName)(t.field,n),n=f._Bt(t.field,s,c,"group_field"),(n=f.addCategoryField(s,n)).setFieldExtra(t),n.setFieldManager(f),h.push(n.key),a.field=n,"boolean"==typeof t.ascending&&(a.sort=t.ascending?"asc":"desc"),(0,M.isNullOrUndefined)(t.summaryFields)||t.summaryFields.forEach(function(t,n){var n,r,i,r,e,u,o,u;(0,M.isNullOrEmpty)(t.formula)||(n=(0,I.combineName)(t.formula,n,s),(r=f.addCategoryFormulaField(n,t.formula)).setFieldExtra(t),r.setFieldManager(f),(0,M.isNullOrUndefined)(a.formulas)&&(a.formulas=[]),i=a.formulas.push(r)-1,h.push(r.key),(0,M.isNullOrUndefined)(t.slice))||(r=t.slice,u=(e=(0,M.isString)(r))?r:r.field,o=f._Bt(u,n,c,"slice"),(o=f.kBt((0,I.combineName)(u,"slice_category",n),o)).setFieldManager(f),(0,M.isNullOrUndefined)(a.slices)&&(a.slices=[]),u=f.NBt((0,I.combineName)(u,"slice_formula_result",n),t.formula),a.slices.push({field:o,formula:u,formulaIndex:i,sliceKeys:[],fieldExtra:e?{}:r,sliceFields:{},addSliceField:f.DBt.bind(f)}))}),(0,M.isNullOrUndefined)(t.windowOrderedFunctions))||(a.windowFunctionOptions=t.windowOrderedFunctions.map(function(t){return{orders:t.orders,fields:t.functions.map(function(t){return f.nM.XOt[t.windowOverFormula]})}}))}),f.positionOfField=h.concat(f.keysOfBaseField),r},i.prototype.transposeSliceFields=function(n){var r=this,i,e;n.slices&&n.slices.forEach(function(t){var t;i=r.positionOfField.indexOf(n.formulas[t.formulaIndex].key),e=t.sliceKeys,(0,M.isNullOrUndefined)(t.fieldExtra.sort)||(e=e.map(function(t){return r.getField(t)}).sort(C(t.fieldExtra.sort)).map(function(t){return t.key})),(t=r.positionOfField).splice.apply(t,u([i+1,0],e,!1))}),n.group&&r.transposeSliceFields(n.group)},i.prototype.prepareFields=function(o){for(var s,c,f,a,t,n,r,i,e,u,e,h,l,d,v,p,w,b,s=this,c=[],f=0,a=0;f<o.length;f++,a++)if(n=m(t=o[f]),r=t.value,i=t.cross){if(u=(e=s.jBt(o,f)).crossColumnOptions,e=e.endColIndex,h=u.columns.length,0!==(l=s.OBt(u))){for(d=function(t,n){var r,i,r,e,u,r=a+t,i=f+n,r=s.getField(r);r.setFieldExtra(o[i]),r.setFieldManager(s),e={value:r.name,name:r.name,isCross:!0,RBt:i},r.isReadonly()&&(e.readonly=!0),(u=r.extra)&&(0,j.setFieldExtraProperties)(function(t){u[t]&&(e[t]=u[t])}),c.push(e),v=++t,p=n=h<=++n?0:n},b=w=0;w<l;)d(w,b),w=v,b=p;f=e,a+=l-1}}else s.gBt(n)?s.addDataBaseField(n,s.mBt(n),t):s.addReaderBaseField(n,r,t),c.push(o[f]);return _(c),c},i.prototype.jBt=function(t,n){var r,i,e,u,e,o,s,r=this,i=n,e=t[n],u=e.cross,e=r.BBt(u,[e],i);if("string"==typeof u){for(s=o=n;n<t.length&&!(++s<t.length&&u!==t[s].cross);)n++;e=r.BBt(u,t.slice(o,s),i)}return{crossColumnOptions:e,endColIndex:n}},i.prototype.BBt=function(t,n,r){var t="string"==typeof t?this.sBt.cross[t]:t;return{initialOptionIndex:r,crossKeys:n.map(function(t){return t.LBt}),cross:t,columns:n,lookup:this.FBt(t,n)}},i.prototype.FBt=function(n,t){var r=this;return t.every(function(t){return r.isValidCross(n,t.value)})&&this.bBt(n.over)},i.prototype.isValidCross=function(t,n){return y(this.nM,t,n)},i.prototype.OBt=function(t){var n=this,r=t.lookup,i=0;return(0,M.isArray)(r)?i=n.PBt(t):((0,M.isString)(r)||(0,M.isObject)(r))&&(i=n.GBt(t)),i},i.prototype.GBt=function(t){var n,r,i,e,u,o,s,c,f,a,h,t,l,d,v,p,w,l,b,r,j,m,_,y,g,O,S,C,R,N,T,E,F,N,E,n=this,r=t.cross,i=n.sBt.showCrossValueHeader,e=V(r.caption),u=0,o=x(t),s=r.over,c=P(s),f=s,a=r.attributes||[],h=a.length,t=k(a[0],!0),l=n.UBt(n.vBt(f),f),d=l.relationTableName||L(a[0]),v=l.relationTable||n.HBt(d),p=v.length(),w=l.relationPrimaryKey||n.zBt(d,c),l=r.filter?n.TBt(A(r.filter,t),v.POt):null;for((0,M.isNullOrUndefined)(l)||0<(r=l(null)).length&&(b=r.reduce(function(t,n){var r;return t["object"==typeof n?n[w]:n]=!0,t},{})),j=[],m=0;m<h;m++)_=P(a[m]),y=D(a[m]),j.push({fieldName:_,formatter:y});for(g=0;g<p;g++)if(O=v._getValueByField(w,g),(0,M.isNullOrUndefined)(b)||b[O]){for(S=e.slice(),m=0;m<h;m++)_=j[m].fieldName,C=v._getValueByField(_,g),y=j[m].formatter,(0,M.isNullOrUndefined)(y)||(C=(0,M.format)(C,y)),S.push(C);for(R=0;R<o.length;R++)T=(N=o[R]).valueRelation,E=N.valueCaption,F=N.valueIndex,N=N.valueCrossKey,E=i?S.concat(E):S,n.VBt({path:E,value:(0,I.combineName)(T,O,s,N),valueRelation:T,dimRelationPath:f,dimRelationKey:c,dimTableName:d,dimTableKeyFieldValue:O,initialOptionIndex:F}),u++}return u},i.prototype.PBt=function(t){for(var n,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j,m,w,j,n=this,r=t.cross,i=t.lookup,e=n.sBt.showCrossValueHeader,u=V(r.caption),o=0,s=x(t),c=r.over,f=P(c),a=c,h=i.length,l=0;l<h;l++)for(d=u.slice(),v=i[l],d.push(v),p=0;p<s.length;p++)b=(w=s[p]).valueRelation,j=w.valueCaption,m=w.valueIndex,w=w.valueCrossKey,j=e?d.concat(j):d,n.VBt({path:j,value:(0,I.combineName)(b,v,c,w),valueRelation:b,dimRelationPath:a,dimRelationKey:f,dimTableKeyFieldValue:v,initialOptionIndex:m}),o++;return o},i.prototype.setCrossFieldValues=function(t){var n,r,i,e,u,o,s,c,f,n=this,r=n.Pq,i=t.length,e=r.filter(function(t){return t instanceof j.CrossField});if(0<e.length)for(u=0;u<i;u++)for(o=t[u],s={},c=0;c<e.length;c++)f=e[c],n.YBt(f,o,s)},i.prototype.YBt=function(t,n,r){var i,e,u,o,i=this,e=t.dimRelationPath,u=r[e];if((0,M.isNullOrUndefined)(u)&&t.isOneToMany&&(u=r[e]=i.fBt(e,n)),(0,M.isArray)(u))for(o=0;o<u.length;o++)if(t.ZBt(u[o],t.dimTableKeyFieldValue)&&(0,M.isNullOrUndefined)(t.getValueIndex(n))){t.setValueIndex(n,o);break}},i.prototype.zBt=function(n,r){var t=this,i=t.dBt(function(t){return t.sourceFieldName===r&&t.sourceRelationshipName===n});return i?i.targetFieldName:(i=t.dBt(function(t){return t.targetFieldName===r&&t.targetRelationshipName===n}))?i.sourceFieldName:void 0},i.prototype.HBt=function(n){var t,r=this.dBt(function(t){return t.sourceRelationshipName===n||t.targetRelationshipName===n})||{},r=r.sourceRelationshipName===n?r.sourceField:r.targetField;return r?r.targetTable:{length:function(){return 0}}},i.prototype.UBt=function(t,n){return b(this.nM,t,n)},i.prototype.WBt=function(t){var n=this,t=new j.CrossField(t,n.fBt.bind(n),n.lBt.bind(n),n.hBt.bind(n));return n.ABt(t),n.IBt(t),t},i.prototype.VBt=function(t){var n,t,n,r,n,n=this,t=n.WBt(t);t.isReadonly()||(r=(n=e(n.oBt.bind(n),t)).isOneToMany,n=n.relationTemplate,r&&(t.isOneToMany=r,t.valueArrayRelation=n))},i.prototype.isCrossField=function(t){return t instanceof j.CrossField},i.prototype.clearCrossFieldData=function(){for(var t,n,r,i,t,n=this.Pq,r=0;r<n.length;r++)(i=n[r])instanceof j.CrossField&&i.clearData()},i.prototype.resetCrossFieldRowValues=function(t){for(var n,r,i,e,u,n=this,r=n.Pq,i={},e=0;e<r.length;e++)(u=r[e])instanceof j.CrossField&&(u.clearValue(t),n.YBt(u,t,i))},i.prototype.removeCrossFieldValues=function(t,n){for(var r,i,e,u,r,i=this.Pq,e=0;e<i.length;e++)(u=i[e])instanceof j.CrossField&&u.removeData(t,n)},i.prototype.setCrossFieldInsertedIndex=function(t,n,r){for(var i,e,u,o,s,i,e=this.Pq,u=k(t.valueRelation,!0),o=0;o<e.length;o++)(s=e[o])instanceof j.CrossField&&s.isOneToMany&&t.dimTableKeyFieldValue===s.dimTableKeyFieldValue&&(0,M.isNullOrUndefined)(s.getValueIndex(n))&&u===k(s.valueRelation,!0)&&s.setValueIndex(n,r)},n.FieldManager=i,n.getLookupBy=d,n.isLookupField=v,n.isLookupListField=p,n.isLookupRelationField=w,n.isValidCross=y},"./dist/src/viewField/fields.js":function(t,n,r){"use strict";var i,c,s,r,e,u,o,f,e,a,h,l,d,v,p,w,b,j,m,_,y;function g(t){["caption","width","style","headerStyle","conditionalFormats","validator","headerFit"].forEach(t)}function O(t){var n=(this.name=t).indexOf(s.FieldNameDelimiter);-1<n&&(t=t.slice(0,n)),this.fieldValue=t}function S(t,n){var t=v.call(this,t)||this;return t.data=n||[],t}function C(t,n,r){var t=p.call(this,t,n)||this;return t.column=r,t}function R(t,n,r,i){var t=w.call(this,t)||this;return t.column=r,t.setFieldExtra(r),t.getValue=n,t.getLength=i,t}function N(t,n,r){var t=b.call(this,t)||this;return t.setFieldExtra({value:n}),t.formula=n,t.P6t=r,t}function T(t,n){return t._error||t._code?"Calc Error ".concat(n,":").concat(t._error,",").concat(t._code):t}function E(t,n){var t=j.call(this,t)||this;return t.QBt=n,t.KBt={},t.Oit=[],t}function F(t,n,r){var t=m.call(this,t)||this;return t.P6t=r,t.formula=n,t}function M(t){return _.call(this,t)||this}function I(t,n,r,i){var e=y.call(this,t.value)||this;return e.path=t.path,e.valueRelation=t.valueRelation,e.dimRelationPath=t.dimRelationPath,e.dimRelationKey=t.dimRelationKey,e.dimTableName=t.dimTableName,e.isDateDimValue=t.dimTableKeyFieldValue instanceof Date,e.dimTableKeyFieldValue=e.isDateDimValue?t.dimTableKeyFieldValue.getTime():t.dimTableKeyFieldValue,e.initialOptionIndex=t.initialOptionIndex,e.getValueByField=x(t,i,n),e.getOriginalValueByField=x(t,i,r),e.data=[],e}function x(t,r,i){return(0,c.isFunction)(t.valueRelation)?function(t,n){return(0,c.isFunction)(t)?t(r(n)):i(t,n)}:i}i=this&&this.__extends||(d=function(t,n){return(d=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}d(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Object.defineProperty(n,"__esModule",{value:!0}),n.CrossField=n.SliceCategoryField=n.CategoryFormulaField=n.CategoryField=n.FormulaField=n.ColumnDataReaderField=n.ColumnDataField=n.DataField=n.Field=n.setFieldExtraProperties=void 0,c=r("./dist/src/dataSource/utils.js"),s=r("./dist/src/viewField/utils.js"),n.setFieldExtraProperties=g,O.prototype.setFieldExtra=function(n){var r,t,r=this;(0,c.isUndefined)(r.extra)&&(r.extra={}),(0,c.isNullOrUndefined)(n)||(n.field&&(r.fieldValue=n.field),g(function(t){r.JBt(t,n)}),(0,c.isNullOrUndefined)(n.caption)&&0<=(t=r.name.indexOf(s.FieldNameDelimiter))&&(r.extra.caption=r.name.substring(0,t)))},O.prototype.JBt=function(t,n){var r,n=n[t];n&&(this.extra[t]=n)},O.prototype.setFieldManager=function(t){this.fieldManager=t},O.prototype.getFieldManager=function(){return this.fieldManager},O.prototype.getValue=function(t){return this.data[t]},O.prototype.getOriginalValue=function(t){return this.getValue(t)},O.prototype.getLength=function(){return this.data.length},O.prototype.XBt=function(t,n,r,i){var e,u,o,s,e=this;if(e.data||(e.data=[]),r=(0,c.isNumber)(r)?r:0,i=(0,c.isNumber)(i)?i:t.length-1,(0,c.isArray)(n))for(o=0,s=n.length;r<=i&&o<s;o++)u=t[r=o+r],e.data[u]=n[o];else for(o=r;o<=i;o++)u=t[o],e.data[u]=n;return e.data},O.prototype.qBt=function(t,n){var r,i,e,u,r=this;for(r.data||(r.data=[]),e=0,u=t.length;e<u;e++)i=t[e],r.data[i]=n(i);return r.data},n.Field=r=O,i(S,v=r),n.DataField=e=S,i(C,p=e),n.ColumnDataField=C,i(R,w=r),n.ColumnDataReaderField=R,i(N,b=e),N.prototype.evaluateFormulaBy=function(t){var n=this,r=n.formula,i=n.P6t;return n.qBt(t,function(t){return T(i(t),r)})[t[0]]},n.FormulaField=N,i(E,j=r),E.prototype.getKey=function(t){return this.KBt[t]},E.prototype.getMap=function(){return this.KBt},E.prototype.getValueByKey=function(t){return this.Oit[t]},E.prototype.$Bt=function(t,n){this.KBt[n]=t,this.Oit[t]=n},E.prototype.getValue=function(t){var n=this;return n.data&&0<n.data.length?n.Sl(t):n.QBt?n.QBt.getValue(t):void 0},E.prototype.Sl=function(t){var n=this;return n.Oit[n.data[t]]},E.prototype.addKey=function(t,n){var r=this,i=r.getKey(t);return(0,c.isUndefined)(i)&&r.$Bt(i=n,t),i},E.prototype.getSourceField=function(){return this.QBt},n.CategoryField=e=E,i(F,m=e),F.prototype.evaluateFormulaBy=function(t,n){var r,i,r=this,i=r.P6t(t,n=n||0);return r.XBt(t,r.addKey(i,t[n]),n),i},n.CategoryFormulaField=F,i(M,_=e),M.prototype.setData=function(t,n,r){var i=this,t=i.addKey(t,n[r]);i.XBt(n,t,r)},n.SliceCategoryField=M,i(I,y=r),I.prototype.setFieldExtra=function(t){y.prototype.setFieldExtra.call(this,t),this.extra.caption=this.path},I.prototype.ZBt=function(t,n){var r,i;return this.isDateDimValue&&t instanceof Date?t.getTime()===n:t===n},I.prototype.tLt=function(t,n){var r=this,i=r.isOneToMany,e=r.dimRelationPath,u=r.dimTableKeyFieldValue;return!i&&r.ZBt(n(e,t),u)?t:this.data[t]},I.prototype.getDimValue=function(){var t=this,n=t.isDateDimValue,t=t.dimTableKeyFieldValue;return n?new Date(t):t},I.prototype.getValueIndex=function(t){return this.tLt(t,this.getValueByField)},I.prototype.setValueIndex=function(t,n){this.data[t]=n},I.prototype.clearData=function(){this.data=[]},I.prototype.clearValue=function(t){this.data[t]=void 0},I.prototype.removeData=function(t,n){this.data.splice(t,n)},I.prototype.isReadonly=function(){return(0,s.isFormula)(this.valueRelation)||(0,c.isFunction)(this.valueRelation)},I.prototype.Sl=function(t,n){var r,i,e,u,r,o,r=this,i=r.isOneToMany,e=r.valueArrayRelation,u=r.valueRelation,r=r.tLt(t,n);if((0,c.isNumber)(r))return o=void 0,n(o=i?e.replace(s.RelationTemplateToken,r+1):u,t)},I.prototype.getValue=function(t){return this.Sl(t,this.getValueByField)},I.prototype.getOriginalValue=function(t){return this.Sl(t,this.getOriginalValueByField)},I.prototype.getRelationField=function(t){var n=this,r=n.isOneToMany,i=n.valueArrayRelation,e=n.valueRelation,n=n.getValueIndex(t);return r?(0,c.isNumber)(n)?i.replace(s.RelationTemplateToken,n+1):void 0:e},n.CrossField=I},"./dist/src/viewField/groupManager.js":function(t,n,r){"use strict";var e,l,u,o,s,c,i;function f(t,n){var r,i,e,u,o;if((0,l.isNullOrUndefined)(t)||(0,l.isNullOrUndefined)(n))return t===n;if(r=Object.keys(t),i=Object.keys(n),r.length!==i.length)return!1;for(e=0,u=r;e<u.length;e++)if(t[o=u[e]]!==n[o])return!1;return!0}function a(t){for(var n,r,i,n=[],r=t.split(u.FieldNameDelimiter).reverse(),i=0;i<r.length;i+=2)n.push(r[i]);return n}function h(t){return 1===a(t).length}function d(t){return 2===a(t).length}function v(t){return 3===a(t).length}function p(t){return 2===t.split(u.FieldNameDelimiter).length}function w(t){var t=t.split(u.FieldNameDelimiter);return t[t.length-2]}function b(t,n,r,i){this.LEt=t,this.wEt=n,this.wwn=i||function(){};var t=new s.DataManagerProxy(r);this.Vhe=new o.DataManagerReportGroupHelper(t,void 0,void 0,new c.DataManagerReportSortHelper(t))}e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(n,"__esModule",{value:!0}),n.GroupManager=n.getGroupFieldName=n.isGroupField=n.isGroupSlice=n.isGroupSummary=n.isGroupCategory=n.getGroupOptionIndexesFrom=void 0,l=r("./dist/src/dataSource/utils.js"),u=r("./dist/src/viewField/utils.js"),o=r("./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-group-helper.js"),s=r("./dist/src/data-manager-report/data-manager-proxy/data-manager-proxy.js"),c=r("./dist/src/data-manager-report/tree-data-generator/helpers/data-manager-report-sort-helper.js"),n.getGroupOptionIndexesFrom=a,n.isGroupCategory=h,n.isGroupSummary=d,n.isGroupSlice=v,n.isGroupField=p,n.getGroupFieldName=w,b.prototype.isGrouped=function(t){return f(t,this.LEt)},b.prototype.groupBy=function(t,n){var r,i,e,u,r=this,i=r.Yhe(t),e,u={childrenArray:[this.Vhe.generateCellNodeTreeData(i,void 0,void 0,n)]};return{rootNode:u,indexMap:r.eLt(n,function(){return r.iLt(t,u)})}},b.prototype.Yhe=function(t){var n,r,i,e,r=this,i,e=(t.field.getSourceField()||t.field).fieldValue;return{templateCell:{sorts:t.sort?[((n={})[t.sort]=e,n)]:void 0,dataColumn:{tableName:t.field.fieldManager.getTable().name,columnName:e}},data:{groups:[]},field:t.field,group:t.group,children:t.group?[this.Yhe(t.group)]:[],slices:t.slices&&t.slices.length?t.slices.map(function(t){return r.Zhe(t)}):[],formulas:t.formulas}},b.prototype.Zhe=function(t){var n,r,i,n=e({},t),r,i=(n.field.getSourceField()||n.field).fieldValue;return n.templateCell={dataColumn:{tableName:t.field.fieldManager.getTable().name,columnName:i}},n.children=[],n.data={groups:[]},n},b.prototype.eLt=function(t,n){var r,i,i,r=this,i=r.LEt;return r.DJ={path:[],groupOptions:i,entireScope:t},r.wEt("groupContext",r.DJ),i=n(),r.DJ=null,r.wEt("groupContext"),i},b.prototype.iLt=function(t,n){for(var r,i,e,u,o,s,r=this,i,e=[],u=0,o=n.childrenArray&&n.childrenArray[0];u<o.length;u++)s=o[u],r.aLt(s,t,e);return e},b.prototype.aLt=function(t,n,r){var i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j,i=this,e=r.length,u=t.recordRowNumbers;if(i.uLt(t),t.childrenArray&&t.childrenArray[0]&&0!==t.childrenArray[0].length)for(a=c=t.childrenArray[f=0];f<a.length;f++)h=a[f],i.aLt(h,n.group,r);else{for(o=0,s=u.length;o<s;o++)r[e+o]=u[o];t.key=n.field.addKey(t.value,r[e])}if(i.sLt(n.formulas,r,e),i.dde(n.windowFunctionOptions,r,e),t.slices)for(o=0,d=(l=t.slices).length;o<d;o++){for(v=l[o],w=(p=n.slices[o]).formula,b=0,j=c=v.childrenArray&&v.childrenArray[0];b<j.length;b++)(h=j[b]).result=i.cLt(w,h.recordRowNumbers);p.addSliceField(p,n.formulas[p.formulaIndex],c,r,e)}i.fLt()},b.prototype.sLt=function(t,n,r){if(t)for(var i=0,e=t.length;i<e;i++)t[i].evaluateFormulaBy(n,r)},b.prototype.cLt=function(t,n){if(t)return t.evaluateFormulaBy(n)},b.prototype.dde=function(t,n,r){var i,e,u,o,s,c,f,a,h;if(t)for(i=this,e=0,u=t.length;e<u;e++)for(s=(o=t[e]).orders,c=o.fields,(0,l.isArray)(s)&&0<s.length&&i.wwn(n,s,r),f=0,a=c.length;f<a;f++)(h=c[f]).evaluateWindowFunction(n,r)},b.prototype.uLt=function(t){this.DJ.path.push(t)},b.prototype.fLt=function(){this.DJ.path.pop()},n.GroupManager=b},"./dist/src/viewField/utils.js":function(t,r){"use strict";function n(){for(var t,n,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.join(r.FieldNameDelimiter)}function i(t){return"="===t[0]}function e(t){return-1<t.indexOf(".")}function u(t){return-1<t.indexOf(r.FieldNameDelimiter)}Object.defineProperty(r,"__esModule",{value:!0}),r.isField=r.isRelated=r.isFormula=r.combineName=r.RelationTemplateToken=r.CaptionDelimiter=r.FieldNameDelimiter=void 0,r.FieldNameDelimiter="__",r.CaptionDelimiter="\\",r.RelationTemplateToken="{{}}",r.combineName=n,r.isFormula=i,r.isRelated=e,r.isField=u},"./dist/src/viewField/viewField.entry.js":function(t,n,r){"use strict";var i,e,i=this&&this.__createBinding||(Object.create?function(t,n,r,i){void 0===i&&(i=r);var e=Object.getOwnPropertyDescriptor(n,r);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(t,i,e)}:function(t,n,r,i){t[i=void 0===i?r:i]=n[r]}),e=this&&this.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||i(n,t,r)};Object.defineProperty(n,"__esModule",{value:!0}),e(r("./dist/src/viewField/groupManager.js"),n),e(r("./dist/src/viewField/fieldManager.js"),n),e(r("./dist/src/viewField/fields.js"),n),e(r("./dist/src/viewField/utils.js"),n)},"./dist/src/view/view-cross.js":function(t,n,r){"use strict";var n,i,e,u,r,o;Object.defineProperty(n,"__esModule",{value:!0}),n=r("Common"),i=r("./dist/src/view/view.js"),e=r("./dist/src/dataSource/utils.js"),u=r("./dist/src/viewField/fieldManager.js"),r=n.Common.lt.Dh,o=void 0,r(i.View.prototype,{YBt:function(){var t=this;t.lLt.setCrossFieldValues(t.iRt)},hLt:function(){var t=this;t.lLt&&(t.lLt.clearCrossFieldData(),t.YBt())},dLt:function(t,n){var r=this;r.lLt&&r.lLt.removeCrossFieldValues(t,n)},vLt:function(t){var n=this;n.lLt&&n.lLt.resetCrossFieldRowValues(t)},mLt:function(t,n){var r,i;return"string"==typeof t&&(r=!0,i=t,r=!(!(0,e.isNullOrUndefined)(this.LEt.cross)&&(t=this.LEt.cross[i],!(0,e.isNullOrUndefined)(t)))&&r)&&(t={over:i,attributes:[""]}),(0,u.isValidCross)(this.gLt,t,n)},pLt:function(){return this.bLt()&&(0,e.isNullOrUndefined)(this.lLt)},bLt:function(){return this.yLt.some(function(t){return t.cross})},wLt:function(t){for(var r,i,n,e,u,o,s,c,f,a,h,l,d,v,r=this,i=[],n=function(n,t){i.push({newIndex:t,columnInfos:r.yLt.filter(function(t){return t.RBt===n}),fields:r.lLt?r.lLt.getFields(function(t){return t.initialOptionIndex===n}):[]})},e=0,u=t;e<u.length;e++)n(s=(o=u[e]).oldIndex,c=o.newIndex);for(f=function(t,n,r){t.forEach(function(t){return t.RBt=r}),n.forEach(function(t){return t.initialOptionIndex=r})},a=0,h=i;a<h.length;a++)f(d=(l=h[a]).columnInfos,v=l.fields,c=l.newIndex)},MLt:function(){var n=this,t;return n.CLt.map(function(t){return n.SLt(t)})},TLt:function(t,n){var r,i,e,e,u,o,u,o,s,u,r=this,i=r.MLt(),e=r.ALt(i);if(0<e.length&&(t=e[t],n=e[n]),(e=r.ILt[t])&&"string"==typeof e.cross){if(u=r.ILt[t-1]||{},o=r.ILt[t+1]||{},u.cross===e.cross||o.cross===e.cross)return!0;if(u=r.ILt[n],o=r.ILt[t<n?n+1:n-1]||{},u.cross===e.cross||o.cross===e.cross)return!0}return s=function(t,n){return-1<i.indexOf(t)?s(t+n,n):t},(u=function(t,n){var t=r.ILt[s(t,-1)]||{},n=r.ILt[s(n,1)]||{};if("string"==typeof t.cross&&t.cross===n.cross)return!0})(t-1,t+1)||(t<n?u(n,n+1):u(n-1,n))},xLt:function(t){for(var r,i,n,e,r=this,i=0,n=function(t){return t&&0===t.length?o:t},e=function(){var n=r.yLt[i];n.RBt===t?(r.NLt=r.NLt&&r.NLt.filter(function(t){return t.field!==n.value}),r.kLt=r.kLt&&r.kLt.filter(function(t){return t.field!==n.value}),r.DLt=r.DLt&&r.DLt.filter(function(t){return t.field!==n.value}),r._Lt=r._Lt&&r._Lt.filter(function(t){return t.field!==n.value}),r.yLt.splice(i,1),r.lLt&&r.lLt.removeFields(i)):i++};i<r.yLt.length;)e();r.NLt=n(r.NLt),r.kLt=n(r.kLt),r.DLt=n(r.DLt),r._Lt=n(r._Lt)},ELt:function(){var r=this;r.ILt.forEach(function(t,n){(0,e.isNullOrUndefined)(t.cross)||((0,e.isNullOrUndefined)(t.LBt)&&(t.LBt=n),r.yLt[n].LBt=t.LBt)})}})},"./dist/src/view/view-event.js":function(t,n,r){"use strict";var n,O,w,i,b,r,e,j;function a(n){var t,r,i,e,u,o,s,t=[],r=[],i=Object.keys(w.Events);if((0,O.isArray)(n))for(e=function(n){(i.some(function(t){return t===n})?t:r).push(n)},u=0,o=n;u<o.length;u++)e(s=o[u]);else(i.some(function(t){return t===n})?t:r).push(n);return[t,r]}Object.defineProperty(n,"__esModule",{value:!0}),n=r("Common"),O=r("./dist/src/dataSource/utils.js"),w=r("./dist/src/table/tableEvents.js"),i=r("./dist/src/view/view.js"),b=r("./dist/src/view/view-util.js"),r=n.Common.lt.Dh,e=null,j=void 0,r(i.View.prototype,{bind:function(t,n){var r=this,t=a(t),i=t[0],t=t[1];0<t.length&&(r.jLt(t,n),this.gLt.bind(t,n)),0<i.length&&this.D3(i,this.OLt(n),n)},D3:function(t,n,r){var i,n,i=this,n=i.RLt(n);i.jLt(t,n,null,r),i.gLt.bind(t,n)},unbind:function(t,n){var r,i,e,u,o,s,c,f,r=this,i=a(t),e=i[0],u=i[1];if(0<u.length)for(r.nge(u,n),o=0;o<u.length;o++)s=u[o],this.gLt.unbind(s,n);if(0<e.length&&(c=this.nge(e,null,null,n),r.gLt))for(f=0;f<c.length;f++)r.gLt.unbind(t,c[f])},ki:function(t,n){return this.gLt.ki(t,n)},vOt:function(t){return this.gLt.vOt(t)},jLt:function(t,n,r,i){var e,u,o,s,c,f,a,h,h,f,e=this;if(n)for(u=(r||e.gLt).name,c=o=(s=0,O.isArray)(t)?t:[t];s<c.length;s++)f=c[s],(a=(0,O.isFunction)(n)?n:n[f])&&(h=(h=e.BLt[u]=e.BLt[u]||{})[f]=h[f]||[],(0,O.isNullOrUndefined)(i)||(f=(0,O.isFunction)(i)?i:i[f],a.ege=f),h.push(a))},nge:function(t,n,r,i){var e,u,r,o,s,c,f,a,h,l,d,v,p,w,b,j,m,_,y,g,e=this,u=(r||e.gLt).name,r=(0,O.isArray)(t)?t:[t],o=[];if((0,O.isNullOrUndefined)(i))if(n)for(s=0,c=r;s<c.length;s++)f=c[s],(a=(0,O.isFunction)(n)?n:n[f])&&-1<(d=(l=(h=e.BLt[u]=e.BLt[u]||{})[f]=h[f]||[]).indexOf(a))&&(o=o.concat(l.splice(d,1)));else for(v=0,p=r;v<p.length;v++)for(f=p[v],l=(h=e.BLt[u]=e.BLt[u]||{})[f]=h[f]||[],h[f]=[],w=0;w<l.length;w++)b=l[w],o.push(b);else for(j=0,m=r;j<m.length;j++){for(f=m[j],l=(h=e.BLt[u]=e.BLt[u]||{})[f]=h[f]||[],_=[],y=(0,O.isFunction)(i)?i:i[f],w=0;w<l.length;w++)(b=l[w]).ege===y&&_.push(w);for(g=_.length-1;0<=g;g--)o=o.concat(l.splice(d=_[g],1))}return o},OLt:function(u){var o=this;return function(t,n){var r,i,e;if(o.LLt(n),(0,O.isArray)(u))for(r=0,i=u;r<i.length;r++)(e=i[r]).call(o,t,n);else u&&u.call(o,t,n)}},LLt:function(t){var n=this;t.hasOwnProperty("row")||Object.defineProperty(t,"row",{get:function(){return(0,O.isNumber)(t.Ky)||(t.Ky=n.FLt(t.index)),t.Ky}})},RLt:function(r){var i=this;return function(t,n){i.PLt()&&r.call(i,t,n)}},PLt:function(t){return(0,O.isBoolean)(t)&&(this.rb=!t),!this.rb},GLt:function(n,r){var i=this;return i.PLt(!1),{success:function(t){i.PLt(!0),n&&n(t)},fail:function(t){i.PLt(!1),r&&r(t)}}},v7:function(){var u=this;u.D3(w.Events.ItemInserting,function(t,n){var r=n.index,n=n.data;u.ULt(n),r===u.length()&&u.Dit()&&u.HLt(n,r)}),u.D3(w.Events.ItemInserted,function(t,n){var r=n.index,n=n.data;u.zLt(r,n)}),u.D3(w.Events.ItemUpdating,function(t,n){var r=n.data,i=n.index,e=n.field,n=n.originalValue;u.VLt(r,n,e,i)}),u.D3(w.Events.ItemUpdated,function(t,n){var r=n.index,i=n.field,e=n.originalValue,n=n.newValue;u.YLt(r,i,e,n)}),u.D3(w.Events.ItemReset,function(t,n){var r=n.index,i=n.originalData,n=n.dataBeforeChanged;u.ZLt(r,i,n)}),u.D3(w.Events.ItemRemoved,function(t,n){var r=n.index,n=n.count;u.WLt(r,n)}),u.D3(w.Events.ChangesSubmitted,function(t,n){u.QLt()}),u.D3(w.Events.ChangesCancelled,function(t,n){u.KLt(n.isDataLengthChanged)})},wpt:function(){var t,n,r,i,e,u,o,s,c,f,t=this,n=t.BLt;for(r in n)if(n.hasOwnProperty(r))for(e in i=n[r])if(i.hasOwnProperty(e))for(o=0,s=u=i[e];o<s.length;o++)c=s[o],(f=t.gLt.QOt.tables[r])&&f.unbind(e,c);t.BLt={}},$Ot:function(t){var n,r,i,e,u,o,s,c,f,n,r=this.BLt,i=t.name,e=r[i];for(u in e)if(e.hasOwnProperty(u))for(s=0,c=o=e[u];s<c.length;s++)f=c[s],t&&t.unbind(u,f);r[i]=j},KOt:function(t,n){var r,i,e,r,i=this.BLt,e=i[t];delete i[t],i[n]=e},JLt:function(){var t,n,r,i,e,u,o,s,s;if(this.XLt())for(r=(n=t=this).name,i=t.yLt,e=t.gLt,u=0,o=i;u<o.length;u++)s=o[u],(0,O.isFunction)(s.value)||(0,b.isFormula)(s.value)||!(0,b.isRelation)(s.value)||(s=e.qRt(s.value),!(0,O.isNullOrUndefined)(s)&&(0,O.isNullOrUndefined)(s.VOt[r])&&(s.VOt[r]=n,t.qLt(s)))},qLt:function(r){var v,p,t,l,d,t,u,v=this,p=v.gLt,t=p.QOt.relationships.reduce(function(t,n){return n.sourceTable===p&&n.targetTable===r?{relationshipName:n.sourceRelationshipName,relationFieldName:n.sourceFieldName}:n.sourceTable===r&&n.targetTable===p?{relationshipName:n.targetRelationshipName,relationFieldName:n.targetFieldName}:t},{}),l=t.relationshipName,d=t.relationFieldName,t=function(t,h){var n=v.RLt(function(u,o){var n,t,r,s,r,i,e,c,f,a,n=function(t,n){var t=t.value.split(".");return t[t.length-1-n]},t=v.ILt.filter(function(t){return(0,b.isRelation)(t.value)&&n(t,1)===l}),r=t;if(o.eventName!==w.Events.ItemUpdating&&o.eventName!==w.Events.ItemUpdated||(r=r.filter(function(t){return n(t,0)===o.field})),s=[j],r.forEach(function(n){var t,r,i,e,t=!(0,O.isNullOrUndefined)(n.cross);t?(i=("string"==typeof n.cross?v.LEt.cross[n.cross]:n.cross).over,(0,O.isNullOrUndefined)(v.NLt)||-1<(e=(0,O.findIndex)(v.NLt,function(t){return-1<t.field.indexOf(n.value)&&-1<t.field.indexOf(i)}))&&(r=v.NLt[e].field)):v.$Lt(n.value)&&s.push(n.value),h.call(v,n.value,t,r)(u,o)}),o.eventName===w.Events.ItemInserted||o.eventName===w.Events.ItemRemoved||o.eventName===w.Events.ItemUpdated){if(o.eventName===w.Events.ItemUpdated&&(r=d===o.field,i=t.some(function(t){var n;if(!(0,O.isNullOrUndefined)(t.cross)&&("string"==typeof t.cross?v.LEt.cross[t.cross]:t.cross).over.split(".").pop()===o.field)return!0;return!1}),r||i))for(f=e=p.nBt(t[c=0].value,o.index);c<f.length;c++)a=f[c],v.vLt(a);s.forEach(function(t){v.tFt(j,!0,t,j)})}});v.jLt(t,n,r),r.bind(t,n)},u=function(t,n,r,i){var e,e,e,u,o,s,c,f,a,h,a,l,d;if(v.Dit())for(o=0,s=u=i.relatedViewIndexes||p.nBt(t,i.index);o<s.length;o++)c=s[o],h=a=f=void 0,h=n?(v.vLt(c),f=p.LRt(r,c),(e={})[r]=f,a=e,v.nFt(c,((e={})[r]=!0,e))[r]):(f=p.LRt(t,c),(e={})[t]=f,a=e,p._getValueByField(t,c)),a=v.eFt(c,a).data,v.iFt(a,f,t,c),v.hRt(c,t,f,h),p.hRt(c,t,f,h);else if(n)for(l=0,d=u=i.relatedViewIndexes||p.nBt(t,i.index);l<d.length;l++)c=d[l],v.vLt(c)};t(w.Events.ItemRemoving,function(r,i){return function(t,n){i&&(n.relatedViewIndexes=p.nBt(r,n.index))}}),t(w.Events.ItemRemoved,function(r,i,e){return function(t,n){u(r,i,e,n)}}),t(w.Events.ItemInserted,function(r,i,e){return function(t,n){u(r,i,e,n)}}),t(w.Events.ItemUpdating,function(f,a,h){return function(t,n){var r,r,i,e,u,o,s,c,c;if(v.Dit())for(i=n.relatedViewIndexes=p.nBt(f,n.index),n.relatedViewValues=[],e=0,u=i;e<u.length;e++)o=u[e],c=s=void 0,a?s=(c=v.nFt(o,((r={})[h]=!0,r)))[h]:(s=p._getValueByField(f,o),(r={})[f]=s,c=r),c=v.eFt(o,c).data,n.relatedViewValues[o]=s,v.iFt(c,s,f,o)}}),t(w.Events.ItemUpdated,function(f,a,h){return function(t,n){var r,i,e,u,o,s,c;if(v.Dit())for(e=0,u=i=n.relatedViewIndexes||p.nBt(f,n.index);e<u.length;e++)o=u[e],s=n.relatedViewValues[o],c=void 0,a?(c=v.nFt(o,((r={})[h]=!0,r))[h],f=h):c=p._getValueByField(f,o),v.hRt(o,f,s,c),p.hRt(o,f,s,c)}})}})},"./dist/src/view/view-filter.js":function(t,n,r){"use strict";var j,l,v,n,d,p,i;function w(t){return e(t[0])}function e(t){return t&&void 0!==t.Vce}function o(t,n){for(var r,i,e,u,o,s,c,r=["field","value","operator","relation"],i=t[0],e=[],u=0;u<r.length;u++)i.hasOwnProperty(o=r[u])&&e.push(o);for(s=0,c=t.length;s<c;s++)if(!f(t[s],n[s],e))return;return 1}function f(t,n,r){var i,e;for(r=r||["field","value","operator","relation"],i=0;i<r.length;i++)if(t[e=r[i]]!==n[e])return;return t.ort===n.ort}function b(t,n){for(var r,i,e,u,o,r={},i=0;i<t.length;i++)if(!r[e=t[i].field]){for(u=r[e]=[],o=i;o<t.length;o++)t[o].field===e&&u.push(t[o]);n(e,u)}}Object.defineProperty(n,"__esModule",{value:!0}),j=r("./dist/src/dataSource/utils.js"),l=r("./dist/src/table/table.js"),v=r("./dist/src/view/view-util.js"),n=r("Common"),d=r("./dist/src/view/view.js"),p=r("./dist/src/table/windowOverField.js"),(i=n.Common.lt.Dh)(d.View.prototype,{buildInFilter:function(s){var c,f,a,h,t,l,n,r,i,e,r,u,o,c=this.gLt,f={};if(1<s.length){for(a=[],h=[],t=function(i){var t,n,r,e,t,u,o,t=s[i],n=t.field,r=t.operator,e=t.value,t=t.relation,u=f[n];u=u||(f[n]=c.jRt(n)),h.push(t),o=(0,d.rFt)(l.gLt,l.yLt,l.lLt,n,s[i]),o=(0,v.mapGetValueFunc)(u,o),o=(0,v.oFt)(l,r,e,o),a.push(function(t,n,r){return o(t,r,n[i])})},l=this,n=0;n<s.length;n++)t(n);return(0,v.aFt)(a,h)}return i=(r=s[0]).field,e=r.operator,r=r.value,u=c.jRt(i),o=(0,d.rFt)(this.gLt,this.yLt,this.lLt,i,s[0]),o=(0,v.mapGetValueFunc)(u,o),o=(0,v.oFt)(this,e,r,o,i),function(t,n,r){return o(t,r,n[0])}},uFt:function(t){var n=this,r=n.ZOt,i;return n.gLt.ZOt[t]||r[t]},eRt:function(t,n){var r=this,i=r.gLt,e=r.yLt,u,o=[],s=[];t.forEach(function(n){(u=e.filter(function(t){return t.value===n})[0])&&((0,v.isViewColumn)(u)?o:s).push(n)}),i.eRt(s,n),r.sFt(o)},sFt:function(t){for(var n,r,i,e,u,n,r=this.ZOt,i=0,e=t;i<e.length;i++)r[u=e[i]]||(r[u]=this._Rt(u))},cFt:function(){this.ZOt={}},_Rt:function(t){var n=this.lLt.getFieldByName(t);return(0,l.generateFilterIndexCache)(t,(0,j.isNullOrUndefined)(n)?0:this.length(),this.jRt(t),function(t){return n.getValue(t)})},cRt:function(t,n){var r=this,i,e=r.gLt._dataSource.options.schema;r.Yce(t),(0,l.updateFilterIndexesCacheOnInsert)(this.ZOt,t,n,e&&e.columns)},hRt:function(t,n,r,i){var e=this;e.Yce(t,!1,n),e.fge(n),(0,l.updateFilterIndexesCacheOnUpdate)(e.ZOt,t,n,r,i,e.jRt(n))},pRt:function(t,n,r){var i,e,u,o,s,s,i=this,e=i.yLt;if(!(0,j.isNullOrUndefined)(n)&&!(0,j.isNullOrUndefined)(r))for(u=0,o=e;u<o.length;u++)s=(s=o[u]).value instanceof Function?s.value.name:s.value,i.hRt(t,s,n[s],r[s])},MRt:function(t,n){var r=this;r.Zce(t,n),(0,l.updateFilterIndexesCacheOnRemove)(r.ZOt,t,n)},fFt:function(t){var r,i,e,n,u,o,s,c,f,a,h,l,d;if(t){if(i=(r=this).iRt,e=[],u=(n=r.lFt).length,n&&0<u&&(e=i.slice(0,u)),o=u,"string"==typeof t)for(s=r.Ywt(t,0,0),c=u;c<i.length;c++)f=i[c],!0===r.nMt(s,f,0)&&(e[o]=f,o++);else if("function"==typeof t)for(c=u;c<i.length;c++)f=i[c],t(r.getRowData(f,!0))&&(e[o]=f,o++);else{if(i.length!==r.length())return r.Wce(),void r.Qce(t,e,i);for(d in(0,j.isArray)(t)||(t=[t]),(0,j.isNullOrUndefined)(r.Jce)&&(r.Jce={}),a=r.isHierarchy(),r.qce(t,function(t,n){r.Qce(n,e,i.slice()),a&&w(n)&&r.afe(n),r.tfe(t,n)}),h=[],l=function(n){t.some(function(t){return t.field===n})?a&&w(r.Jce[n].options)||h.push(n):delete r.Jce[n]},r.Jce)l(d);e=r.nfe(h)}r.iRt=e}},Qce:function(t,i,n){var e,r,u,o,s,c,f,a,h,l,d,e=this,r=(e.lFt||[]).length,u=r;for((0,j.isArray)(t)||(t=[t]),s=[],c=[],f=0;f<t.length;f++)a=t[f],((0,v.isFieldListFilterInfo)(a)?s:c).push(a);if(h=i,l=n,0<s.length&&(h=i.slice(),b(t=s,function(t,n){var t=t,r=e.uFt(t);r||(e.eRt([t]),r=e.uFt(t)),(0,v.hFt)(h,u,r,n,l),l=h,h=i.slice()}),h=l),0<c.length)for(h=i.slice(),t=c,o=this.buildInFilter(t),f=r;f<l.length;f++){d=l[f];try{o(e.gLt,t,d)&&(h[u]=d,u++)}catch(t){}}e.iRt=h},tfe:function(t,n){var r,i,e,u,r=this;if(!(0,j.isNullOrUndefined)(t))for(i=r.lFt||[],e=r.Jce[t]={options:n,count:r.iRt.length-i.length},u=i.length;u<r.iRt.length;u++)e[r.iRt[u]]=!0},afe:function(r){for(var i,e,t,n,u,o,s,c,f,a,h,l,d,v,p,w,b,i=this,e=[],t=function(t){var n=r[t];e.push(i.yLt.find(function(t){return t.value===n.field}))},n=0;n<r.length;n++)t(n);for(u=i.lFt||[],o=i.iRt.slice(0,u.length),n=u.length;n<i.iRt.length;n++)if(s=i.iRt[n],0===(c=i.getHierarchyNode(s,!0)).children.length)for(f=function(t,n){return(0,j.formatCalcError)(i.ufe(t,n))},a=i.ufe.bind(i),h=0;h<r.length;h++){for(d="="===(l=r[h]).field[0]?f:a,v=c,p=0;p<l.Vce.length&&(w=l.Vce[p],(b=d(e[h],v.modalIndex))===w);p++)v=v.parent;if(p===l.Vce.length){o.push(s);break}}i.iRt=o},Wce:function(){this.Jce=null},Yce:function(t,n,r){var i,e,u,o,s,c,f,a,h,i=this,e=i.Jce;if(e&&!(-1<(u=i.lFt||[]).indexOf(t))){for(s in o=i.iRt,e)((0,j.isNullOrUndefined)(r)||s===r||!1===n&&(0,v.isFormula)(s)&&(0,l.isInCalcField)(s,r)&&!(0,p.hasWindowOverFormulas)(s))&&(f=(c=e[s]).options,a=o.slice(0,u.length),h=o.slice(0,u.length).concat(t),i.Qce(f,a,h),-1<i.iRt.indexOf(t)?c[t]||(c[t]=!0,c.count+=1):c[t]&&(delete c[t],--c.count));i.iRt=o}},fge:function(t){var n,r,i,e,u,o,s,c,f,n=this,r=n.Jce;if(r&&!n.mme()){for(u in i=n.lFt||[],e=n.iRt,r)(0,v.isFormula)(u)&&((0,j.isNullOrUndefined)(t)||(0,l.isInCalcField)(u,t))&&(0,p.hasWindowOverFormulas)(u)&&(s=(o=r[u]).options,c=e.slice(0,i.length),f=e.slice(),n.Qce(s,c,f),(o=n.iRt).count=n.iRt.length,o.options=s);n.iRt=e}},Zce:function(t,n){var r,i,e,u,o,s,c,f,a,r=this,i=r.Jce;if(i&&!(-1<(e=r.lFt||[]).indexOf(t)))for(u in i)if(i.hasOwnProperty(u)){for(s=(o=i[u]).options,delete o.options,delete o.count,c=Object.keys(o),f=0;f<c.length;f++)t+n<=(a=+c[f])?c[f]=a-n:t<=a&&a<t+n&&(c.splice(f,1),f--);(o=c.reduce(function(t,n){return t[n]=!0,t},{})).options=s,o.count=c.length,i[u]=o}},nfe:function(t){var n,r,i,e,u,o,s,c,n=this;if(0<t.length){if(r=n.lFt||[],i=n.iRt,e=n.Jce,1===t.length&&i.length-r.length===e[t[0]].count)return i;for(u=i.slice(0,r.length),o=r.length;o<i.length;o++){for(s=i[o],c=0;c<t.length&&e[t[c]][s];c++);c===t.length&&u.push(s)}return u}return n.iRt},dFt:function(){var t,n,r,i,e,u,o,s,t=this.iRt;for(t||(this.gFt(),t=this.iRt),i=(r=this.lFt).length,r&&0<i&&(n=t.slice(0,i)),e=[],u=this.length(),s=o=0;s<u;s++)(!n||n.indexOf(s)<0)&&(e[o]=s,o++);n&&0<n.length?this.iRt=n.concat(e):this.iRt=e,this.cFt()},HLt:function(t,n){var r=this,i=r.NLt;r.Dit()&&r.autoFilter&&(0,v.addFilterInfoForFieldValue)(i,t,r,void 0,void 0,n)},iFt:function(t,n,r,i){var e=this,u=e.NLt;e.Dit()&&e.autoFilter&&(0,v.addFilterInfoForFieldValue)(u,t,e,n,r,i)},vFt:function(){var t=this;t.mFt()&&t.filter(t.NLt)},mFt:function(){return this.autoFilter&&this.NLt},Dit:function(){var t,n=this.NLt;return(0,j.isArray)(n)&&0<n.length},filter:function(t){var n=this;return n.iRt||n.gFt(),t?(n.isHierarchy()&&n.$ce(),n.fFt(t),n.isHierarchy()&&n.yFt(!0)):n.isHierarchy()?n.gFt():(this.dFt(),n.bde()),this.NLt=(0,j.isArray)(t)&&0<t.length?t:null,this.iRt.length},$ce:function(){var r=this;r.bFt().forEach(function(t){var n;r.getHierarchyNode(t,!0).modalIndex=t})},yFt:function(t){var n,r,i,e,u,o,s,c,f,t,a,n=this,r=n.iRt;if(!(0,j.isNullOrUndefined)(r)&&0!==r.length){for(t||n.$ce(),i=[],e=1,u=0;u<r.length;u++)o=r[u],(s=n.getHierarchyNode(o,!0)).visit=e,(0,j.bubbleTree)(s,function(t){t.isRoot||(t.visit=e)}),(0,j.traversalTree)(s,function(t){t.visit=e});for(f in n.Jce)if(w(n.Jce[f].options)){c=n.Jce[f];break}if(!(0,j.isNullOrUndefined)(c)){for(o in e=2,t=c.options,a=c.count,delete c.options,delete c.count,c)c.hasOwnProperty(o)&&(s=n.getHierarchyNode(+o,!0),(0,j.isNumber)(s.visit))&&(s.visit=e,(0,j.bubbleTree)(s,function(t){t.isRoot||(t.visit=e)}));c.options=t,c.count=a}(0,j.traversalTree)(n.getHierarchyRootNode(),function(t){t.visit===e&&(i.push(t.modalIndex),delete t.visit,delete t.modalIndex)}),n.iRt=i}},bFt:function(){var t=this,n=t.iRt,r,i=t.isHierarchy(),r=t.wFt;return i&&!(0,j.isNullOrUndefined)(r)||(t.gFt(),t.sort(t.kLt),r=t.iRt,t.iRt=n,i&&(t.wFt=r)),r},qce:function(t,e){var u=this;(0,j.isNullOrUndefined)(u.Jce)&&(u.Jce={}),b(t,function(t,n){var r=u.Jce[t],i;!(0,j.isNullOrUndefined)(r)&&r.options.length===n.length&&o(r.options,n)||e(t,n)})}})},"./dist/src/view/view-group.js":function(t,n,r){"use strict";var i,e,b,s,j,m,_,r,u,a;function c(c,f,a){for(var h,l,d,v,p,t,n,w,r,i,e,h=[],l=-1,d=-1,v=_.GROUP_COLUMN_WIDTH,p={},t=function(t){for(var n,r,i,e,n=c[t],r=0,i=a;r<i.length;r++)e=i[r],n.value===e.field&&(n.GFt=!0,p[(0,m.combineName)(n.value,(0,b.findIndex)(a,function(t){return t.field===n.value}))]={colInfo:n,index:t})},n=0;n<c.length;n++)t(n);for(r=function(t,n){var r,i,e,u,o,s,r=f.getField(w[t]),i=r.name,e,u={caption:r.extra.caption,value:i,name:i,isGroup:!0};-1<(d=(0,b.findIndex)(a,function(t,n){return(0,m.combineName)(t.field,n)===i}))&&(v=(0,_.getGroupColumnWidth)(a[d].field,c),l=d,u.DFt=!0,o=p[i],(0,b.isNullOrUndefined)(o)||(o.colInfo._Ft=t,u._Ft=o.index+n)),u.OFt=l,u.width=v,(s=r.extra)&&(0,j.setFieldExtraProperties)(function(t){s[t]&&(u[t]=s[t])}),h.push(u)},i=0,e=(w=f.positionOfField).length-f.keysOfBaseField.length;i<e;i++)r(i,e);return h}function w(t,n,r){for(var r,i,e,u,o,s,c,f,r=r?r.length:0,i={},e=r;e<t.length;e++)i[t[e]]=!0;for(u=0,o=r,s=n.length,c=t.length;u<s&&o<c;u++)i[f=n[u]]&&(t[o]=f,o++)}function y(t,n){var r,i,e,u,o;if(t&&0<t.length){for(r=[],i=n.length,0<(e=t.length)&&(r=t.slice(0)),u=e,o=0;o<i;o++)-1===t.indexOf(n[o])&&(r[u]=n[o],u++);return r}return n}Object.defineProperty(n,"__esModule",{value:!0}),n.ise=void 0,i=r("Common"),e=r("./dist/src/view/view.js"),b=r("./dist/src/dataSource/utils.js"),s=r("./dist/src/viewField/groupManager.js"),j=r("./dist/src/viewField/fields.js"),m=r("./dist/src/viewField/utils.js"),_=r("./dist/src/view/view-util.js"),r=i.Common.lt.Dh,u=null,a=void 0,n.ise=c,r(e.View.prototype,{groupBy:function(t){var n,r,n=this;return 0===arguments.length||!(0,b.isArray)(t)||n.hasHierarchyColumn()||0===(t=0<(r=n.yLt.filter(function(t){return t.isCross})).length?t.filter(function(n){return!r.some(function(t){return t.value===n.field})}):t).length?n.MFt:(n.iRt||n.gFt(),n.CFt(t),n.SFt(),n.TFt(t),void(this.MFt=t))},windowOver:function(t,n,r){var i,e,u,o,s,c,f,a,h,l,d,v,p,i=this,e=!1,o=function(){return e=i.iRt.length!==i.length(),u=!i.iRt||e?i.qFt():i.iRt.slice()},s=i.gLt.fme(),c=!1,f=!1,u=!s||(c=i.vde(),f=i.Dit(),r)||c||f?o():(i.iRt||i.gFt(),i.iRt);if((0,b.isArray)(t)&&0<t.length)t[t.length-1].windowOrderedFunctions=n,u=i.mde(t,u).indexMap;else for(a=0;a<n.length;a++)for(l=(h=n[a]).orders,(0,b.isArray)(l)&&0<l.length&&i.gde(u,l),d=h.functions,v=0;v<d.length;v++)(p=i.gLt.XOt[d[v].windowOverFormula]).evaluateWindowFunction(u);!s||c&&!e||(f?r||w(i.iRt,u,i.lFt):i.iRt=y(i.lFt,u))},removeGroupBy:function(){var t=this;t.isHierarchy()||(t.AFt(),t.IFt(),t.SFt(),t.MFt=u,t.xFt(),t.NFt())},AFt:function(){var t;this.kFt()},IFt:function(){var t,n,r,i,e,u,o,s,c,f,t=this,n=t.gLt,r=t.NLt,i=t.ZOt,e=t.getColumnInfos();if(r){for(f=r.length-1;0<=f;f--)u=r[f],(o=e.filter(function(t){return t.name===u.field})[0]).DFt?(s=(0,_.getColumnName)(e[o._Ft]),(c=i[u.field])&&(n.ZOt[s]=i[u.field],delete i[u.field]),u.field=s):o.isGroup&&(r.splice(f,1),delete i[u.field]);t.NLt=0===r.length?a:r}},xFt:function(){var t,n,r,i,e,t=this;if(t.kLt){for(n=[],r=0,i=t.kLt;r<i.length;r++)delete(e=i[r]).EFt,e.jFt?(0,s.isGroupField)(e.field)&&(delete e.jFt,delete e.OFt,e.field=(0,s.getGroupFieldName)(e.field),n.push(e)):n.push(e);t.kLt=0===n.length?a:n}t._Lt=a,t.DLt=t.kLt},CFt:function(t){var n,t,r,t;t&&((n=this).kFt(),r=(t=n.mde(t)).rootNode,t=t.indexMap,n.FFt=r,n.iRt=t)},mde:function(t,n){var r,n,i,e,u,r,t,r=this,n=n||r.iRt,i=r.lLt||r.RFt(),e=r.BFt||r.LFt(t),u=n;return r.length()>n.length?((0,b.isNullOrUndefined)(r.Efe)&&(r.Efe=r.qFt()),u=r.Efe):r.Efe=a,r=i.buildGroupFields(t,u),t=e.groupBy(r,n),i.transposeSliceFields(r),t},kFt:function(){var t,n,n=this;(n.BFt=null)!=(t=n.lLt)&&t.reset(),n.FFt=null},pde:function(t){var n=this;return this.autoGroup&&this.MFt&&(!(0,b.isString)(t)||n.$Lt(t))},PFt:function(t){var n=this;n.pde(t)&&n.CFt(n.MFt)},$Lt:function(n){var t=this;return t.MFt&&t.MFt.some(function(t){return t.field===n||t.summaryFields&&t.summaryFields.some(function(t){return t.formula&&-1<t.formula.indexOf(n)||t.slice&&("string"==typeof t.slice?-1<t.slice.indexOf(n):t.slice.field&&-1<t.slice.field.indexOf(n))})})},LFt:function(t){var n=this,r=n.gLt,i=r.POt;return n.BFt=new s.GroupManager(t,i.wEt.bind(i),r.QOt,n.gde.bind(n)),n.BFt},SFt:function(){for(var t,n,r,i,t=this,n=t.getColumnInfos(),r=n.length-1;0<=r;r--)(i=n[r]).isGroup&&n.splice(r,1),i.GFt&&(i.GFt=a,i._Ft=a);t.setColumnInfos(n)},TFt:function(t){for(var n,r,i,e,u,o,s,n=this,r=c(n.yLt,n.lLt,t),i=n.UFt,e,u=0,o=n.getColumnInfos();u<o.length;u++)s=o[u],i||(s.visible=!1),r.push(s);n.setColumnInfos(r)},HFt:function(t){var r,n,i,e,u,o,s,c,f,a;if(t){for(n=(r=this).FFt,i=[],e=r.yLt,u=Array.isArray(t)?t:[t],o=[],s=[],c=function(t){var n,t,n=u[t],t=e.filter(function(t){return t.value===n.field})[0];(t&&(0,b.isNumber)(t.OFt)?(n.jFt=!0,n.EFt=r.zFt([n]),n.OFt=t.OFt,o):s).push(n)},f=0;f<u.length;f++)c(f);a=r.zFt(s),s.forEach(function(t){return t.EFt=a}),r.VFt(n,i,0,o,s),r.iRt=i}},VFt:function(t,n,r,i,e){var u,t,o,s,c,f,a,h,l,d,v,u=this,t=t.childrenArray&&t.childrenArray[0];if(t)for(1<t.length&&0<i.length&&0<(c=i.filter(function(t){return t.OFt===r})).length&&(f=c[0].EFt,t.sort(function(t,n){return f(u.gLt,c,t.key,n.key)})),a=0,h=t;a<h.length;a++)if(s=(l=h[a]).recordRowNumbers)for(1<s.length&&0<e.length&&(f=(c=e)[0].EFt,s.sort(function(t,n){return f(u.gLt,c,t,n)})),o=n.length,d=0,v=s.length;d<v;d++)n[o+d]=s[d];else u.VFt(l,n,r+1,i,e)},setGroupSliceColumnSettings:function(t,n){var r=this,i=t[n];t.isGroup&&r.isGroupSliceColumn(t)&&r.getGroupSliceColumns(t).forEach(function(t){return t[n]=i})},isGroupSliceColumn:function(t){return t.isGroup&&(0,s.isGroupSlice)(t.value)},getGroupSliceColumns:function(t){var n,r,i,e,u,o,n,r=[],i=t.OFt,e=this.yLt;if(t.isGroup)for(u=0;u<e.length;u++)(o=e[u]).OFt===i&&(0,s.isGroupSlice)(o.value)&&r.push(o);return r},updateColumnSettingToGroupOptions:function(t,i){var n,r,e,u,o,n,r=this.MFt;if(r&&t.isGroup)switch(u=function(n,r){(0,j.setFieldExtraProperties)(function(t){!(0,b.isNullOrUndefined)(i)&&i!==t||(n[t]=r[t])})},(e=(0,s.getGroupOptionIndexesFrom)(t.value)).length){case 1:u(r[e[0]],t);break;case 2:u(r[e[0]].summaryFields[e[1]],t);break;case 3:u(o="string"==typeof(o=r[e[0]].summaryFields[e[1]].slice)?r[e[0]].summaryFields[e[1]].slice={field:o}:o,t)}},detailColumnsVisible:function(t){var n,r,n,i,n=this;if(0===arguments.length)return n.UFt;if(n.UFt!==t&&(n.UFt=t,n.BFt))for(r=n.getColumnInfos(),i=(n=n.lLt).positionOfField.length-n.keysOfBaseField.length;i<r.length;i++)r[i].visible=t}})},"./dist/src/view/view-sort.js":function(t,n,r){"use strict";var i,d,c,v,p,r;function s(i){return i.iRt.reduce(function(t,n){var r=i.getHierarchyNode(n,!0);return(0,d.isNullOrUndefined)(r)||(t[r.id]=n),t},{})}function f(n,r){return function(t){(0,d.isNullOrUndefined)(n[t.id])||r.push(n[t.id])}}function w(t,n,r,i,e){for(var u,o,s,c,u={},o=(0,v.rFt)(t,n,r,e,u,!1),s=0;s<i.length;s++)if(c=o(u,s,u),!(0,d.isNullOrUndefined)(c)&&!(0,d.isCalcError)(c))return c;return null}function b(t,n,r,i,e,u){var o,s,c,f,a,h,l;if(1===e.length)return u=u||0,o=e[0],s=(0,v.rFt)(t,n,r,o.field,o),c=void 0,c=o.compare?function(t,n,r,i){var r,t,r=s(t,r,n[u]),t=s(t,i,n[u]);return n[u].compare(r,t,n[u].ascending)}:null===(f=w(t,n,r,i,o.field))?function(){return 0}:(a=o.ascending,function(t,n,r,i){var r,t,r=s(t,r,n[u]),t=s(t,i,n[u]);return(0,p.compareValue)(a,f,r,t)});for(h=0;h<e.length;h++)o=e[h],(l=(0,v.ZFt)(t,n,o.field)).isGroup&&(0,d.isNullOrUndefined)(o.ascending)&&(o.compare=function(t,n){return t===n?0:1}),o.WFt=b(t,n,r,i,[o],h);return p.multiSort}function a(t){return!t.gLt.fme()||t.Dit()}Object.defineProperty(n,"__esModule",{value:!0}),n.ese=void 0,i=r("Common"),d=r("./dist/src/dataSource/utils.js"),c=r("./dist/src/table/windowOverField.js"),v=r("./dist/src/view/view.js"),p=r("./dist/src/view/view-util.js"),r=i.Common.lt.Dh,n.ese=b,r(v.View.prototype,{zFt:function(t,n){return b(this.gLt,this.yLt,this.lLt,this.iRt,t,n)},QFt:function(t){var n;t&&((n=this).isHierarchy()?(n.wFt=null,n.DLt=(0,p.getSortInfos)(t),n.KFt(t)):n.MFt?(n._Lt=(0,p.getSortInfos)(t),n.HFt(t)):(n.DLt=(0,p.getSortInfos)(t),n.JFt(t)))},JFt:function(t){var n,r,i,e,u,o,o,u,u;t&&(i=(r=(n=this).lFt).length,o=void 0===(o=(u=(e=Array.isArray(t)?t:[t])[0]).startRow)?0:o,u=void 0===(u=u.endRow)?n.length():u,n.gde(n.iRt,t,i+o,u))},gde:function(t,n,r,i){var e,u,o,s,c,f;if(n&&(e=this,0!==(u=Array.isArray(n)?n:[n]).length))if(o=e.zFt(u),i=i||t.length,0===(r=r||0)&&i>=t.length)t.sort(function(t,n){return o(e.gLt,u,t,n)});else for((s=t.slice(r,i)).sort(function(t,n){return o(e.gLt,u,t,n)}),c=0,f=s.length;c<f;c++)t[c+r]=s[c]},XFt:function(){var t,n,r,t=this,n=t.gLt.uBt();return!(0,d.isNullOrUndefined)(n)&&(0,d.isNullOrUndefined)(t.kLt)?((!t.iRt||t.iRt.length<t.length())&&(t.iRt=t.qFt()),t.iRt&&0<t.iRt.length&&(r={field:n,ascending:!0},t.isHierarchy()?t.KFt(r):t.JFt(r)),!0):(0,d.isNullOrUndefined)(n)&&(0,d.isNullOrUndefined)(t.kLt)&&t.isHierarchy()?((!t.iRt||t.iRt.length<t.length())&&(t.iRt=t.qFt()),t.iRt&&0<t.iRt.length&&t.$Ft(),!0):void 0},KFt:function(r){var i,t,n,e,u,o;r&&(t=(i=this).getHierarchyRootNode(),n=[],e=Array.isArray(r)?r:[r],u=s(i),o=i.zFt(e),e.forEach(function(t){return t.EFt=o}),(0,d.traversalTree)(t,f(u,n),{isOrderChildren:i.tOi,compareFn:function(t,n){return o=(r=e)[0].EFt,(0,d.isNullOrUndefined)(u[t.id])||(0,d.isNullOrUndefined)(u[n.id])?0:o(i.gLt,r,u[t.id],u[n.id])}}),i.iRt=n)},$Ft:function(){var t,n,r,i,t=this,n=t.getHierarchyRootNode(),r=[],i=s(t);(0,d.traversalTree)(n,f(i,r),{field:"sequence",isOrderChildren:!1}),t.iRt=r},NFt:function(){var t=this;t.tPt()&&t.sort(t.kLt)},tPt:function(){return this.autoSort&&this.kLt},sort:function(t){var n=this;n.iRt||n.gFt(),n.QFt(t),this.kLt=t},vde:function(t){var n=this;return n.tPt()||n.pde(t)},bde:function(t,n){var r,i,e,u,o,o,s,o,r=this;if(!r.vde(t)&&(n||a(r))&&r.tme()){for(i=r.getColumnInfos(),e=[],u=i.length-1;0<=u;u--)if(o=i[u],(0,c.hasWindowOverFormulas)(o.value)){o=(0,c.getWindowOverFormulas)(o.value),o=(s=r.gLt.XOt[o[o.length-1]]).options,(0,d.isArray)(o.partitions)&&0<o.partitions.length&&o.partitions.forEach(function(t){return e.push({field:t.field,ascending:t.ascending})}),(0,d.isArray)(o.orders)&&0<o.orders.length&&o.orders.forEach(function(t){return e.push({field:t.field,ascending:t.ascending})});break}0<e.length&&r.JFt(e)}},nPt:function(t){var n=this,r=n.autoSort,i=n.DLt&&0<n.DLt.length,e=n._Lt&&0<n._Lt.length;n.bde(t),r&&i&&(n.isHierarchy()?n.KFt(n.DLt):n.JFt(n.DLt)),n.PFt(t),r&&e&&n.HFt(n._Lt)}})},"./dist/src/view/view-style.js":function(t,n,r){"use strict";var n,r,i;Object.defineProperty(n,"__esModule",{value:!0}),n=r("Common"),r=r("./dist/src/view/view.js"),(i=n.Common.lt.Dh)(r.View.prototype,{getStyleRules:function(){return this.LEt.styleRules},getStyleRule:function(t){var n=this.getStyleRules();return t?n[t]:n},addStyleRule:function(t,n,r){var i,e;t&&(i={},n&&(i.style=n),r&&(i.rule=r),(e=this.getStyleRules())[t]=i)},removeStyleRule:function(t){var n;delete this.getStyleRules()[t]},clearStyleRules:function(){this.LEt.styleRules={}}})},"./dist/src/view/view-util.js":function(D,e,t){"use strict";var m,f,R,s,c,a,_,N;function n(t,n,r,i){var e,t,e=t?r:i,t=t?i:r;return(0,R.isNullOrUndefined)(e)&&(0,R.isNullOrUndefined)(t)?0:(0,R.isNullOrUndefined)(e)?-1:(0,R.isNullOrUndefined)(t)?1:"number"==typeof n||n instanceof Date?e-t:t<e?1:e<t?-1:0}function r(t,n,r,i,e){var u,o;if(r instanceof Date)if(-1<s.indexOf(n))r=r.getTime(),u=i,i=function(t,n,r){return u(t,n,r)&&u(t,n,r).getTime()};else{if(-1<c.indexOf(n))return function(){return!1};if(-1<a.indexOf(n))return function(){return!0}}return o=h(t,n,r,e),function(t,n,r){return o(i(t,n,r))}}function h(t,n,r,i){var e,u,o,s,c,c,c,e=r+"",u=e&&e.length;switch((0,R.isString)(r)&&(o=f.Common.$T.jJ(r)),s=t.gLt,n){case"eq":return c=function(t){return t===r},(0,R.isNullOrUndefined)(r)&&(c=function(t){return t===_||t===N}),o?function(t){return new RegExp("^"+o+"$").test(t)}:c;case"neq":return c=function(t){return t!==r},(0,R.isNullOrUndefined)(r)&&(c=function(t){return t!==_&&t!==N}),o?function(t){return!new RegExp("^"+o+"$").test(t)}:c;case"lt":return function(t){return null!==t&&t<r};case"lte":return function(t){return null!==t&&t<=r};case"gt":return function(t){return r<t};case"gte":return function(t){return r<=t};case"startswith":return o?function(t){return new RegExp("^"+o).test(t)}:function(t){return"string"==typeof(t+"")&&(t+"").substr(0,u)===r};case"doesnotstartwith":return o?function(t){return!new RegExp("^"+o).test(t)}:function(t){return"string"==typeof(t+"")&&(t+"").substr(0,u)!==r};case"endswith":return o?function(t){return new RegExp(o+"$").test(t)}:function(t){return"string"==typeof(t+"")&&-1!==(t+"").indexOf(r,(t+"").length-u)};case"doesnotendwith":return o?function(t){return!new RegExp(o+"$").test(t)}:function(t){return"string"==typeof(t+"")&&-1===(t+"").indexOf(r,(t+"").length-u)};case"contains":return o?function(t){return new RegExp(o).test(t)}:function(t){return"string"==typeof(t+"")&&0<=(t+"").indexOf(r)};case"doesnotcontain":return o?function(t){return!new RegExp(o).test(t)}:function(t){return"string"==typeof(t+"")&&(t+"").indexOf(r)<0};case"top":case"bottom":return(c=t.uFt(i))||(t.eRt([i]),c=t.uFt(i)),r=l(Object.keys(c),n,r),function(t){return-1<r.indexOf(t)};case"above":return r=d(s._dataSource._data[i].data,s.jRt(i)),function(t){return r<t};case"below":return r=d(s._dataSource._data[i].data,s.jRt(i)),function(t){return t<r};case"quarter":return function(t){return v(r,t)};case"month":return function(t){return(t&&t.getMonth())===r};default:return function(){return!1}}}function l(t,n,r){for(var i,e,u,o,i=[],e=0,u=t;e<u.length;e++)o=u[e],isNaN(o)||i.push(parseFloat(o));return r>=i.length||("top"===n?i=p(i,r):"bottom"===n&&(i=j(i,r))),i}function d(t,n){var r,i,e,u,o,r=0;if(!t||0===t.length)return r;for(i=n&&n.dataMap,e=0,u=t;e<u.length;e++)o=u[e],"number"==typeof(o=i&&"number"==typeof i[o]?i[o]:o)&&(r+=o);return r/t.length}function v(t,n){var r=n&&n.getMonth();switch(t){case 0:return r<=2;case 1:return 3<=r&&r<=5;case 2:return 6<=r&&r<=8;case 3:return 9<=r;default:return!1}}function i(t,n,r,i){for(var e,u,o,s,e=0,u=0,o=n.length;u<o&&0===(e=(s=n[u]).WFt(t,n,r,i));u++);return e}function u(t){return Array.isArray(t)?t:[t]}function o(t,n){var r,i;if(0===t.length)return[];for(r=t.slice(0),i=0;i<n;i++)-1===t.indexOf(i)&&r.push(i);return r}function p(t,n){for(var r,i,e,r=w(t.slice(0,n)),i=n;i<t.length;i++)t[i]>r[0]&&(e=r[0],r[0]=t[i],t[i]=e,w(r));return r}function w(t){for(var n,r,n=t.length,r=Math.floor(n/2);0<=r;r--)b(t,r,n);return t}function b(t,n,r){var i,e,u,i,i=2*n+1,e=2*n+2,u=n;i<r&&t[i]<t[u]&&(u=i),n!==(u=e<r&&t[e]<t[u]?e:u)&&(i=t[n],t[n]=t[u],t[u]=i,b(t,u,r))}function j(t,n){for(var r,i,e,r=y(t.slice(0,n)),i=n;i<t.length;i++)t[i]<r[0]&&(e=r[0],r[0]=t[i],t[i]=e,y(r));return r}function y(t){for(var n,r,n=t.length,r=Math.floor(n/2);0<=r;r--)g(t,r,n);return t}function g(t,n,r){var i,e,u,i,i=2*n+1,e=2*n+2,u=n;i<r&&t[i]>t[u]&&(u=i),n!==(u=e<r&&t[e]>t[u]?e:u)&&(i=t[n],t[n]=t[u],t[u]=i,g(t,u,r))}function O(t,n){for(var r,i,e,u,r=0,i=t;r<i.length;r++)if(u=n(e=i[r]))return u}function S(t){var n,t,r,i,n=t.style,t=(t=(n=n||(t.style={})).cellButtons)||(n.cellButtons=[]),r=(r=n.dropDowns)||(n.dropDowns=[]);(i=O(t,function(t){return"openDateTimePicker"===t.command}))||t.push({imageType:"dropdown",command:"openDateTimePicker",useButtonStyle:!1,buttonBackColor:"transparent"}),(i=O(r,function(t){return"dateTimePicker"===t.type}))||r.push({type:"dateTimePicker",option:{showTime:!1,calendarPage:"day",startDay:"sunday"}})}function C(n,t){var r,i,r=(0,R.findIndex)(t,function(t){return T(t)===n});return-1<r&&(i=t[r]).width||e.GROUP_COLUMN_WIDTH}function T(t){var t=t.value;return"string"==typeof t?t:"function"==typeof t?t.name:void 0}function E(t){return!t.JOt}function F(t){var n,r,i,e,u,n=E(t);if(n){for(t.WOt++,i=0,e=r=t.eBt();i<e.length&&(!(u=e[i])||u.WOt||(n=F(u)));i++);t.WOt--}return n}function M(t){return t.isGroup||t.isCross}function I(t){return x(t[0])}function x(t){return t.operator===N}function A(t){return t[0].operator!==N&&t[0].ort}function P(t){return t&&"="===t[0]}function L(t){return t&&-1<t.indexOf(".")}function k(h,l,d,v,p,w){for(var b,j,t,n,r,i,b=d.isHierarchy(),j={},t=function(n){var t,r,i,e,u,o,s,c,f,a;if(n&&!j[n.field]){if(j[n.field]=!0,(t=d.uFt(n.field))||(d.eRt([n.field]),t=d.uFt(n.field)),r=t&&Object.keys(t),e=void 0,(i=l[n.field])instanceof Date){for((u=new Date(i)).setHours(0,0,0,0),o=u.toISOString().slice(0,10),e=!0,s=0,c=r;s<c.length;s++)if((f=c[s]).startsWith(o)){e=!1;break}}else e=(0,R.isNullOrUndefined)(i)?-1===r.indexOf("null")&&-1===r.indexOf("undefined"):-1===r.indexOf(i+"");if(!h.some(function(t){return t.field===n.field&&t.value===i})&&e&&(I(h)?(h.push(m(m({},n),{value:i,isAdded:!0})),b&&V(d,h[h.length-1],p,i,w)):(A(h)||i===v&&void 0===v)&&h.push(m(m({},n),{value:i,operator:"eq",relation:"or",isAdded:!0}))),-1<r.indexOf(v+"")&&1===t[v].length&&v!==i)for(a=0;a<h.length;a++)if(h[a].value===v&&h[a].isAdded){h.splice(a,1);break}}},n=0,r=h;n<r.length;n++)t(i=r[n])}function V(t,n,r,i,e){var r,u,o,s;if(n.field===r||(0,R.isNullOrUndefined)(r)){if(r=void 0,n.Vce)(r=n.Vce.slice())[0]=i;else{for(o=(u=t.getHierarchyNode(e,!0)).parent,s=[i];!o.isRoot;)s.push(o.getFieldValue(n.field)),o=o.parent;r=s}n.Vce=r}}function G(t){var n,r,i,e,e;if((0,R.isNullOrUndefined)(t))return t;for(n=[],r=0,i=t;r<i.length;r++)e=i[r],(e=m({},e)).getValue&&delete e.getValue,n.push(e);return n}function q(i,e){var t,u,o,t,u=function(n,r,i,t){return t.every(function(t){return t(n,r,i)})},o=function(){for(var t,n,r,t=[],n=[i[0]],r=1;r<i.length;r++)"or"===e[r]?(t.push(n),n=[i[r]]):n.push(i[r]);return 0<n.length&&t.push(n),t}();return function(n,r,i){return o.some(function(t){return u(n,r,i,t)})}}function B(t,i){var e;return t&&t.dataMap?(e=JSON.parse(JSON.stringify(t.dataMap)),function(t,n,r){var t=i(t,n,r);return void 0!==e[t]?e[t]:t}):i}function H(t,n,r,i,e){var u,o,s,i,c,f,a,h,l,d,v,p,w,b,j,m,u=[],o=!1,s=!1,i=i.map(function(t){var n=t.value;return n===_&&(o=!0),n===N&&(s=!0),t.value});for(o&&!s&&i.push(N),s&&!o&&i.push(_),c=0,f=i;c<f.length;c++)for(a=f[c],l=0,d=h=r&&r[a]||[];l<d.length;l++)u[v=d[l]]=!0;for(p=n,w=t.reduce(function(t,n){return t[n]=!0,t},{}),b=0,j=e;b<j.length;b++)!u[m=j[b]]||0<n&&w[m]||(t[p]=m,p++)}function U(t,n,r,i,e,u,o){var s,c,f,a,h,l,d,v,p,w,b,j,m,_,y,g,O,S,C,s=[],c=i.map(function(t,n){return n}),f=[];if(e&&e.length&&(a=!(c=[]),i.forEach(function(t,n){-1<u.indexOf(n)?(s.push(n),c.push(N)):(s.push(N),c.push(n)),t.isCross&&(a=!0)}),t=e[t],n=e[n],a)){for(h=[],l=[],d=0;d<i.length;d++)(i[d].isCross?(h[i[d].RBt]||(h[i[d].RBt]=[],f.push(h[i[d].RBt])),v=h[i[d].RBt]):f).push(d),t===d&&(t=f.length-1),n===d&&(n=f.length-1);for(p=0,w=u;p<w.length;p++)b=w[p],l.push(f.indexOf(b));s=[],c=[],f.forEach(function(t,n){-1<l.indexOf(n)?(s.push(n),c.push(N)):(s.push(N),c.push(n))}),r=1}if((0,R.swapArrayItems)(c,t,n,r),c=c.filter(function(t){return!(0,R.isNullOrUndefined)(t)}),e&&e.length){for(d=0;d<s.length;d++)void 0===s[d]&&(s[d]=c.shift());if(f&&f.length){for(j=[],m=0;m<s.length;m++)if(_=s[m],Array.isArray(f[_]))if("string"==typeof(y=o[m].cross)){for(g=[s[m]];m+1<o.length&&y===o[m+1].cross;)g=g.concat(s[m+1]),m++;for(O=f[g[0]].length,S=[],C=0;C<O;C++)for(d=0;d<g.length;d++)S.push(f[g[d]][C]);j=j.concat(S)}else j=j.concat(f[_]);else j.push(f[_]);s=j}}else s=c;return s}m=this&&this.__assign||function(){return(m=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(e,"__esModule",{value:!0}),e.ePt=e.hFt=e.mapGetValueFunc=e.aFt=e.removeExtraInfos=e.addFilterInfoForFieldValue=e.isRelation=e.isFormula=e.isFieldListFilterInfo=e.isFieldListFilter=e.isViewColumn=e.isTableDataReady=e.getColumnName=e.getGroupColumnWidth=e.applyDateTimePicker=e.array_find=e.generatePinnedColumnIndexMap=e.getSortInfos=e.multiSort=e.oFt=e.compareValue=e.GROUP_COLUMN_WIDTH=void 0,f=t("Common"),R=t("./dist/src/dataSource/utils.js"),s=["eq","neq","lt","lte","gt","gte"],c=["startswith","doesnotstartwith","endswith","contains"],a=["doesnotendwith","doesnotcontain"],_=null,N=void 0,e.GROUP_COLUMN_WIDTH=100,e.compareValue=n,e.oFt=r,e.multiSort=i,e.getSortInfos=u,e.generatePinnedColumnIndexMap=o,e.array_find=O,e.applyDateTimePicker=S,e.getGroupColumnWidth=C,e.getColumnName=T,e.isTableDataReady=F,e.isViewColumn=M,e.isFieldListFilter=I,e.isFieldListFilterInfo=x,e.isFormula=P,e.isRelation=L,e.addFilterInfoForFieldValue=k,e.removeExtraInfos=G,e.aFt=q,e.mapGetValueFunc=B,e.hFt=H,e.ePt=U},"./dist/src/view/view.entry.js":function(t,n,r){"use strict";var i,e,i=this&&this.__createBinding||(Object.create?function(t,n,r,i){void 0===i&&(i=r);var e=Object.getOwnPropertyDescriptor(n,r);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(t,i,e)}:function(t,n,r,i){t[i=void 0===i?r:i]=n[r]}),e=this&&this.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||i(n,t,r)};Object.defineProperty(n,"__esModule",{value:!0}),e(r("./dist/src/view/view.js"),n),e(r("./dist/src/view/view-style.js"),n),e(r("./dist/src/view/view-event.js"),n),e(r("./dist/src/view/view-group.js"),n),e(r("./dist/src/view/view-sort.js"),n),e(r("./dist/src/view/view-filter.js"),n),e(r("./dist/src/view/view-cross.js"),n)},"./dist/src/view/view.js":function(t,n,r){"use strict";var j,l,m,o,d,i,_,e,y,h,g,u,s;function c(t){return{rule:{area:o.ViewArea.colHeader,direction:o.StateRuleDirection.column,state:t},style:{decoration:{icons:[{src:""}]}}}}function f(t){(0,m.isNullOrUndefined)(t.styleRules)&&(t.styleRules=(0,m.clone)(u,!0))}function a(t){return t instanceof Date&&!isNaN(t.valueOf())}function v(t){return e.Common.ct.Q0(t)}function p(t){var n=e.Common.ct.dJ(t);return n&&!a(n)&&(n=e.Common.ct.iPt(t)),a(n)?n:null}function w(t){var n,r,i,e,n=[],r=t.columns;if(r)for(i in r)r.hasOwnProperty(i)&&(e=r[i],n.push((0,m.clone)(e)));return n}function O(t){return 0===t?"":"_"+t}function b(t,n,r,i){var e,u,i,i;return(0,m.isNullOrUndefined)(r)||(u=r.value,r.isCross||r.isGroup?(i=i.getFieldByName(u))&&(e=i.getValue(n)):u&&("string"==(i=typeof u)?e=C(t,r,n):"function"==i&&(e=r.value(t.iBt(n))))),e}function S(i,a,t,e,r,u,o,s,c,n){var h,f,l,d,v,p,w,b,h={},f=[],l=!!r;if(a.forEach(function(t,n){var r,n,r=t.value;o&&!o[r]||(t.isCross?h[t.value]=e.getFieldByPosition(n).getValue(u):t.isGroup?e.kve(h,n,u,s,c):r&&("string"==typeof r?(n=s&&t.caption||r,h[n]=C(i,t,u)):"function"==typeof r&&f.push({name:r.name,caption:t.caption,value:r})))}),0<f.length&&(d=i.iBt(u),f.forEach(function(t){h[t.name]=t.value(d)})),l&&e&&r&&n){for(p in v=e.getFieldValues(u,s,c))!v.hasOwnProperty(p)||c&&o&&!o[p]||(h[p]=v[p]);for(w=function(c){for(var f,t,n,f=r[c].summaryFields,t=function(r){var t,n,t,i,e,u,o,s,t=f[r];if(t&&t.slice){for(n=O(c),t=t.caption+"_"+t.slice+n,i={},u=0,o=e=a.filter(function(t){var n=(0,_.getGroupOptionIndexesFrom)(t.value);return t.isGroup&&3===n.length&&+n[0]===c&&+n[1]===r});u<o.length;u++)i[(s=o[u]).caption]=v[s.value];h[t]=i}},n=0;n<f.length;n++)t(n)},b=0;b<r.length;b++)w(b)}return h}function C(t,n,r){return R(t._getValueByField(n.value,r),n)}function R(t,n){var n=n&&n.dataMap;return t=n?n[t]||t:t}function N(t,n,r){for(var i,e,i=0;i<n.length;i++)if((e=n[i]).value===r||e.caption===r)return t.columns[e.value]&&"="!==e.value[0]?e.value:(0,d.isViewColumn)(e)?{value:e.value,isGroup:e.isGroup,isCross:e.isCross}:{value:e.value};return r===t.uBt()||t.columns[r]?r:t.XOt[r]?{value:r}:h}function T(i,t,n){return!1!==n&&"="===t[0]?function(t,n,r){return(0,m.formatCalcError)(i(t,n,r))}:i}function E(n,t,r,i,e,u){var o,s,c,o=N(n,t,i);return e?(0,d.isViewColumn)(o)?(e.getValue=r.getFieldByName(o.value),T(function(t,n,r){return r.getValue.getValue(n)},o.value,u)):o.value?(e.getValue=n.XOt[o.value],(0,m.isNullOrUndefined)(e.getValue)&&(e.getValue={getValue:function(t){return n._getValueByField(o.value,t)}}),T(function(t,n,r){return r.getValue.getValue(n)},o.value,u)):(e.getValue=n._dataSource._data[o].data,function(t,n,r){return r.getValue[n]}):(s=String(o.value),c=String(o),o.value?T(function(t,n){return t._getValueByField(s,n)},s,u):function(t,n){return t._dataSource._data[c].data[n]})}function F(t,n,r,i){void 0===r&&(r=!0),void 0===i&&(i={}),this.rPt=10,this.lFt=[],this.CLt=[],this.oPt=[],this.ZOt={},this.dme=0,this.rb=!1,this.BLt={};var e=this;e.name=t,Object.defineProperty(e,"tableName",{get:function(){var t;return null==(t=e.gLt)?void 0:t.name}}),e.ILt=(0,m.clone)(n=n||[]),e.yLt=n.map(function(t){return"string"==typeof t?t={name:t,value:t}:t.name||"string"!=typeof t.value||(t.name=t.value),t.value&&"="===t.value[0]&&(t.readonly=!0),t}),e.aPt=r,e.autoSort=!0,e.autoFilter=!1,e.autoGroup=!0,e.UFt=!0,e.yde=!1,f(i),(e.LEt=i).styleRules||e.clearStyleRules()}j=this&&this.__assign||function(){return(j=Object.assign||function(t){for(var n,r,i,e,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},l=this&&this.__spreadArray||function(t,n,r){if(r||2===arguments.length)for(var i=0,e=n.length,u;i<e;i++)!u&&i in n||((u=u||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(n,"__esModule",{value:!0}),n.View=n.rFt=n.ZFt=n.nse=n.tse=n.ose=void 0,m=r("./dist/src/dataSource/utils.js"),o=r("./dist/src/interfaces/interface.js"),d=r("./dist/src/view/view-util.js"),i=r("./dist/src/viewField/fieldManager.js"),_=r("./dist/src/viewField/groupManager.js"),e=r("Common"),y=r("./dist/src/table/windowOverField.js"),h=null,g=void 0,u={pin:c(o.RowColumnStates.pin),primaryKey:c(o.RowColumnStates.primaryKey),readonly:c(o.RowColumnStates.readonly),required:c(o.RowColumnStates.required)},n.ose=w,n.tse=O,n.nse=S,n.ZFt=N,n.rFt=E,F.prototype.XLt=function(){var t,n=this.gLt;return(0,d.isTableDataReady)(n)},F.prototype.Ywt=function(t,n,r){var i=this.gLt;return i&&i.Ywt(t,n,r)},F.prototype.wde=function(t){var n,r=this.gLt.POt;return r.getCalcService().unparse(r,t,0,0)},F.prototype.nMt=function(t,n,r){var n=this.RJ(n),r=this.uPt(r);return this.sPt(t,n,r)},F.prototype.sPt=function(t,n,r){return this.jfe(t,n,(0,m.isNumber)(r)?(0,d.getColumnName)(this.yLt[r]):g)},F.prototype.jfe=function(t,n,r){var i,e,t,i=this.gLt;if(i)return!(e=!1,m.isNullOrEmpty)(r)&&(0,m.isNullOrUndefined)(i.XOt[r])&&(e=!0,i.XOt[r]=this.lLt.getFieldByName(r)),t=i._fe(t,n,r),e&&delete i.XOt[r],t},F.prototype.cPt=function(){var t=this,n=t.gLt;n&&(t.aPt&&t.yLt.length<=0&&(t.yLt=w(n)),t.fPt(),t.lPt())},F.prototype.PRt=function(t){var n=this;t?(n.gLt=t,n.JLt(),n.bLt()?n.XLt()&&(n.RFt(),n.cPt()):n.cPt(),t.$he=n.$he.bind(n),n.XLt()&&(n.hPt(),n.dPt=!0,n.yde||(n.yde=!0,n.Mde(),n.$he())),n.v7()):(n.wpt(),n.gLt=t)},F.prototype.fPt=function(){var t,t,n,t,r,i,e,u,o,s,c,f,a,h,n=null==(t=null==(t=this.gLt._dataSource.options)?void 0:t.schema)?void 0:t.columns;if(n)for(t=this.yLt,i=(r=this.isHierarchy())&&this.gLt._dataSource.options.schema.hierarchy.column,e=["caption","width","style","conditionalFormats","validator","isPrimaryKey","readonly","required","defaultValue","headerStyle","visible","headerFit","indexed","allowSort","allowFilterByValue","allowFilterByList","dataMap","lookup"],u=0,o=t;u<o.length;u++)if("string"==typeof(s=o[u]).value&&(c=n[s.value])){for(f=0,a=e;f<a.length;f++)(0,m.isNullOrUndefined)(s[h=a[f]])&&(s[h]=c[h]);s.dataType=c.dataType,"date"===c.dataType&&(0,d.applyDateTimePicker)(s),!r||s.value!==i&&"rowOrder"!==c.dataType||(s.readonly=!0),c.n7t&&"rowOrder"!==c.dataType&&(s.readonly=!1,delete c.n7t)}},F.prototype.lPt=function(){for(var t,n,r,i,e,t=this.LEt.defaultColumnWidth||60,n,r=0,i=this.yLt;r<i.length;r++)e=i[r],(0,m.isNullOrUndefined)(e.width)&&(e.width=t)},F.prototype.tme=function(){var t,n;return this.yLt.some(function(t){return(0,y.hasWindowOverFormulas)(t.value)})},F.prototype.vme=function(){var t=this;return!t.mme()&&t.tme()&&t.gLt.fme()},F.prototype.Cde=function(t){var n,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j,n=this,r=n.gLt,i=r.XOt,e=[];if(t){if(o=[],u=1===Object.keys(r.views).length)for(s=n.getColumnInfos(),c=0;c<s.length;c++)f=s[c],(0,y.hasWindowOverFormulas)(f.value)&&(o.push(f.value),o=o.concat((0,y.getWindowOverFormulas)(f.value)));for(a in i)if(i.hasOwnProperty(a)&&(h=i[a])instanceof y.WindowOverCalcField&&!1!==h.nde&&!h.options.nme&&(e.push(h.options),h.options.nme=!0,u))for(l=h.options.windowOverFormula.slice(1),d=0;d<o.length;d++)if(-1<(v=o[d]).indexOf(l)){h.options.Sde=!0;break}if(u){for(p=[],w=[],d=0;d<e.length;d++)delete(b=e[d]).nme,(b.Sde?(delete b.Sde,p):w).push(b);return[p,w]}}else for(s=n.getColumnInfos(),c=0;c<s.length;c++)if(f=s[c],(0,y.hasWindowOverFormulas)(f.value))for(j=(0,y.getWindowOverFormulas)(f.value),d=0;d<j.length;d++)!1!==(h=i[l=j[d]]).nde&&e.push(h.options);return[e,[]]},F.prototype.Tde=function(t){for(var n,r,i,t,e,r,u,o,s,c,f,a,n=this,r=t[0],i=t[1],t=n.Ade(r),e=t.windowOverInfoMap,r=t.windowOverInfos,u=[],o=0;o<i.length;o++)s=i[o],(0,m.isNullOrUndefined)(e[s.partitionKey])||(0,m.isNullOrUndefined)(e[s.partitionKey].orderMap[s.orderKey])?u.push(s):(c=e[s.partitionKey].orderMap[s.orderKey],f=s.frameKey+"__"+s.windowFormula,(0,m.isNullOrUndefined)(c.functionMap[f])&&(c.functionMap[f]=!0,c.orderFunctions.functions.push({orders:s.orders,windowOverFormula:s.windowOverFormula,windowFormula:s.windowFormula,windowFrame:s.windowFrame})));return[a=n.Ade(u).windowOverInfos,r]},F.prototype.Ade=function(t){for(var n,r,i,e,u,o,s,s,c,f,f,a,h,l,n={},r=[],u=0;u<t.length;u++)i=(o=t[u]).partitionKey,e=o.orderKey,(0,m.isNullOrUndefined)(n[o.partitionKey])&&(s={partitions:o.partitions,orderedFunctions:[]},n[o.partitionKey]={index:r.length,orderMap:{},windowOverInfo:s},r.push(s)),c=(s=n[o.partitionKey]).orderMap,(0,m.isNullOrUndefined)(c[o.orderKey])&&(f={orders:o.orders,functions:[]},c[o.orderKey]={index:s.windowOverInfo.orderedFunctions.length,functionMap:{},orderFunctions:f},s.windowOverInfo.orderedFunctions.push(f)),f=o.frameKey+"__"+o.windowFormula,(0,m.isNullOrUndefined)(c[o.orderKey].functionMap[f])&&(c[o.orderKey].functionMap[f]=!0,c[o.orderKey].orderFunctions.functions.push({orders:c[o.orderKey].orderFunctions.orders,windowOverFormula:o.windowOverFormula,windowFormula:o.windowFormula,windowFrame:o.windowFrame}));return a=function(t){var n,t,t,r,n=t.windowOverInfo.orderedFunctions,t=t.orderMap[e];1<n.length&&(r=n[t=t.index],n.splice(t,1),n.push(r))},1<r.length?(l=r[u=(h=n[i]).index],r.splice(u,1),r.push(l),a(h)):1===r.length&&a(n[i]),{windowOverInfoMap:n,windowOverInfos:r}},F.prototype.Mde=function(){for(var t,n,r,i,t=this,n=t.getColumnInfos(),r=0;r<n.length;r++)i=n[r],(0,y.hasWindowOverFormulas)(i.value)&&t.gLt.Xhe(i.value)},F.prototype.$he=function(t){var n,r,i,r,e,u,o,s,c,f,a,n=this;if(0===n.dme){for(i=(r=n.Tde(n.Cde(t)))[0],r=r[1],e=0,u=i;e<u.length;e++)s=(o=u[e]).partitions,c=o.orderedFunctions,n.windowOver(s,c,!0);for(f=0,a=r;f<a.length;f++)s=(o=a[f]).partitions,c=o.orderedFunctions,n.windowOver(s,c,t);return!0}},F.prototype.gme=function(){this.dme++},F.prototype.pme=function(){0<this.dme&&this.dme--,this.dme<=0&&(this.dme=0,this.$he(!0),this.fge(),this.gLt.age())},F.prototype.mme=function(){return 0!==this.dme},F.prototype.gFt=function(t){this.XFt()||(this.iRt=this.qFt(t))},F.prototype.qFt=function(t){var n,r,i,t,e,u,n=[],r=t||this.length(),i=this.lFt,t=i.length;for(0<t&&(n=i.slice(0)),e=t,u=0;u<r;u++)-1===i.indexOf(u)&&(n[e]=u,e++);return n},F.prototype.jRt=function(t){return g},F.prototype.RFt=function(){var t=this,n=t.gLt;return t.iRt||t.gFt(),t.lLt=new i.FieldManager(t.LEt,n),t.ELt(),t.yLt=t.lLt.prepareFields(t.yLt),t.YBt(),t.lLt},F.prototype.getLookup=function(t){return(0,i.getLookupBy)(this.gLt,t)},F.prototype.isLookupField=function(t){return(0,i.isLookupField)(this.gLt,t)},F.prototype.isLookupListField=function(t){return(0,i.isLookupListField)(this.gLt,t)},F.prototype.isLookupRelationField=function(t){return(0,i.isLookupRelationField)(this.gLt,t)},F.prototype.RJ=function(t){return this.iRt||this.gFt(),this.iRt[t]},F.prototype.FLt=function(t){return this.iRt||this.gFt(),this.iRt.indexOf(t)},F.prototype.length=function(){return this.gLt.length()},F.prototype.visibleLength=function(){return this.iRt||this.gFt(),this.iRt.length},F.prototype.getDirtyIndexes=function(){var n=this;return n.gLt.getDirtyIndexes().map(function(t){return n.FLt(t)})},F.prototype.isInserted=function(t){var n=this,t=n.RJ(t);return n.vPt(t)},F.prototype.vPt=function(t){return this.gLt.isInserted(t)},F.prototype.isUpdated=function(t){var n,t,t,n=this,t=n.RJ(t);return n.rb=!0,t=n.gLt.isUpdated(t),n.rb=!1,t},F.prototype.getErrorInfo=function(t){var n,t=this.RJ(t);return this.gLt.getErrorInfo(t)},F.prototype.insertItem=function(t,n,r,i){var e,u,e=this;return e.isHierarchy()?0===(u=e.visibleLength())?void this.addHierarchyFirstItem(n,r,i):void(t<u?e.addHierarchyItemBefore(t,n,r,i):e.addHierarchyItemAfter(u-1,n,r,i)):e.mPt(t,n,r,i)},F.prototype.insertItems=function(t,n,r){var s,c,n,i,e,f,a,r,s=this,c=this,n=c.GLt(n,r),i=n.success,e=n.fail,f=0,a=0,r=t.map(function(o){return function(t,n){var r,i,e,u,r=o.row,i=o.isAfter,e=o.data;f<r&&(f=r),a++,0===(u=c.visibleLength())?s.addHierarchyFirstItem(e,t,n):i?c.addHierarchyItemAfter(r,e,t,n):c.addHierarchyItemBefore(r,e,t,n)}});return(0,m.promiseSerialExecute)(r).then(function(t){t.row=f,t.addedCount=a,i&&i(t)}).catch(function(t){e&&e(t)})},F.prototype.mPt=function(n,t,r,i){var e,r,u,i,r,o,s,t,c,f,a,h,o,l,d,e=this,r=e.GLt(r,i),u=r.success,i=r.fail,r=e.visibleLength();return n=r<n?r:n,o=e.RJ(n),s=e.gPt(t),e.ULt(s),(0,m.isNullOrUndefined)(o)&&(e.Dit()?(o=e.length(),e.HLt(s,o)):o=n),t=e.gLt.uBt(),c=!(0,m.isNullOrUndefined)(t),f=e.isHierarchy(),a=o,h=n<r,c&&!f&&(l=o=void 0,d=!1,h?(o=e.RJ(n-1),l=a):(l=e.RJ(n-1),d=!0),s[t]=e.gLt.d7t(o,l,d)),(c||f)&&(a=e.Dit()?e.length():r),e.gLt.insertItem(a,s,function(t){e.zLt(a,s,h,n),u&&u(t)},i)},F.prototype.zLt=function(t,n,r,i){var e,u,o,s,c,o,c,e=this,u=!(e.vme()&&!e.Dit());r?(o=e.length()-1,e.cRt(o,n),s=e.autoFilter,(c=!(0,m.isNullOrUndefined)(e.NLt))&&(e.autoFilter=!0),u&&((0,m.isNumber)(i)&&!e.tPt()?e.iRt.splice(i,0,o):e.iRt.push(o)),e.tFt(g,!c),c&&(e.autoFilter=s)):(e.cRt(t,n),o=e.length(),c=!e.autoFilter&&!!e.iRt,(c=(0,m.isNullOrUndefined)(r)&&(0,m.isNullOrUndefined)(i)&&e.isHierarchy()?!1:c)&&u&&e.iRt.push(o-1),e.tFt(o,c))},F.prototype.gPt=function(t){var n,r,i,e,u,o,s,o,n={};if(this.isHierarchy())for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(e=0,u=i=this.yLt;e<u.length;e++)s=t[r=(o=u[e]).value instanceof Function?o.value.name:o.value],(0,m.isUndefined)(s)||("string"==typeof(o=o.value)?n[o]=s:o(n,s));return n},F.prototype.pPt=function(n,t,r){var i,i,e,u,e,o,t,s,c,f,e=this,u=e.lLt,e=e.gLt,o=u.getFieldByPosition(t),t=e.KRt(o.valueRelation,n);if(o.isOneToMany){if(!(t=t&&(0,m.isNumber)(o.getValueIndex(n)))&&(s=!1,e.JRt(o.valueRelation,n,((i={})[o.dimRelationKey]=o.getDimValue(),i),function(t){u.setCrossFieldInsertedIndex(o,n,t.index),s=!0},r),!s))return}else if(t){if(f=!1,e.QRt(o.dimRelationPath,n,o.getDimValue(),function(){f=!0},r),!f)return}else if(c=!1,e.JRt(o.valueRelation,n,((i={})[o.dimRelationKey]=o.getDimValue(),i),function(){c=!0},r),!c)return;return o.getRelationField(n)},F.prototype.updateItem=function(t,n,r,i,e){var u,o,u,s,c,o,u,f,o,a,u,o,o=e&&e.hasAddNewRowData,u=e&&e.currentModelIndex,s=this,c=o?u:s.RJ(t),o=s.eFt(c,n),u=o.colIndex,f;return o.isCross&&(o=s.lLt,(a=o.getFieldByPosition(u)).isOneToMany||0<(u=o.getFields(function(t){return t.initialOptionIndex===a.initialOptionIndex&&t.name!==a.name&&!(0,m.isNullOrUndefined)(t.getValueIndex(c))})).length&&(o=u[0].name,s.dRt(t,((u={})[o]=h,u),h,h,e))),s.dRt(t,n,r,i,e)},F.prototype.dRt=function(t,n,r,i,e){var u,e,o,r,s,i,c,r,f,a,h,u,e,t,n,r,u=e&&e.hasAddNewRowData,e=e&&e.currentModelIndex,o=this,r=o.GLt(r,i),s=r.success,i=r.fail,c=u?e:o.RJ(t),r=o.eFt(c,n),f=r.data,a=r.originValueOfField,h=r.field,u=r.colIndex,e=r.isCross,t=r.isValueFunction,n=f[h],r=h;if(e){if(o.vPt(c))return void i();if(r=o.pPt(c,u,i),(0,m.isNullOrUndefined)(r))return void i()}return t?(o.VLt(f,a,r,c),o.gLt.dRt(c,f,h,a,function(t){o.YLt(c,h,a,f[h]),s(t)},i)):(o.VLt(f,a,r,c),o.gLt.QRt(r,c,n,function(t){o.YLt(c,h,a,f[h]),s(t)},i))},F.prototype.VLt=function(t,n,r,i){var e=this;e.ULt(t),e.iFt(t,n,r,i)},F.prototype.YLt=function(t,n,r,i){var e=this;e.hRt(t,n,r,i),e.tFt(g,!0,n,g)},F.prototype.eFt=function(t,n){for(var t,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,t=this.getRowData(t,!0),r=j({},t),i,o=0,s=0,c=!1,f=!1,a=0,h=this.yLt;a<h.length;a++){if(v=n[d=(l=h[a]).value instanceof Function?l.value.name:l.value],!(0,m.isUndefined)(v))if("string"==typeof(p=l.value)){if(w=l.dataMap)for(b in w)v===w[b]&&(v=isNaN(b)?b:+b);e=r[p],r[p]=v,u=p,s=o,c=l.isCross}else f=!0,p(r,v);o++}return{data:r,originValueOfField:e,field:u,colIndex:s,isCross:c,isValueFunction:f}},F.prototype.efe=function(t,n,r){var i,e,i=this;for(e in t)t[e]!==n[e]&&i.VLt(t,n[e],e,r)},F.prototype.resetItem=function(t,n,r){var i=this,n=i.GLt(n,r),e=n.success,r=n.fail,u=i.RJ(t),o=this.getRowData(u,!0),s=i.bPt(u);if(!(0,m.isNullOrUndefined)(t)&&!(0,m.isNullOrUndefined)(u))return i.efe(s,o,u),i.gLt.resetItem(u,function(t){i.ZLt(u,o,s),e(t)},r);r()},F.prototype.ZLt=function(t,n,r){var i=this;i.vLt(t),i.pRt(t,n,r),i.tFt(g,!0,g,g)},F.prototype.saveItem=function(t,n,r){var i=this,n=i.GLt(n,r),e=n.success,r=n.fail,n=i.RJ(t);return i.gLt.saveItem(n,function(t){e(t)},r)},F.prototype.getRowData=function(t,n,r,i,e,u){var o,n,o=this,n=n?t:o.RJ(t);return o.nFt(n,r,i,e,u)},F.prototype._ve=function(t,n){var r=this;return b(r.gLt,r.RJ(t),n,r.lLt)},F.prototype.yPt=function(t){return this.isHierarchy()&&this.wPt(t)},F.prototype.wPt=function(t,n){var r=this,i=r.gLt.uBt(),e,i=r.isHierarchy()||!(0,m.isNullOrUndefined)(i),u=(0,m.isNullOrUndefined)(r.MFt),t=!(0<r.lFt.length)||r.lFt.length<t&&(!(0,m.isNumber)(n)||r.lFt.length<n);return i&&u&&t},F.prototype.MPt=function(){var t=this;return!!(0,m.isNullOrUndefined)(t.kLt)||!!t.kLt[0].ascending},F.prototype.CPt=function(t,n){var r,i,e,u,r=this,e=r.getHierarchyNode(t).parent;if(n){for(u=t+1;u<r.visibleLength();u++)if(r.getHierarchyNode(u).parent===e){i=u;break}}else for(u=t-1;0<=u;u--)if(r.getHierarchyNode(u).parent===e){i=u;break}return i},F.prototype.m7t=function(t,n){var r,i,e,u,u,o,s,c,f,a,h,i,r=this;if(t!==n&&r.wPt(t,n)){if(u=(e=t<n)?n+1:n-1,(i=r.isHierarchy())&&1===Math.abs(t-n)&&(n=r.CPt(t,e)),u=r.gLt.m7t(e,r.RJ(t),r.RJ(n),r.RJ(u))){if(o=r.iRt,c=1,f=[s=r.RJ(t)],i)for(f=[],h=(a=t)+(c=r.gLt.V7t(s));a<h;a++)f.push(r.RJ(a));e?(i=r.gLt.V7t(r.RJ(n)),o.splice.apply(o,l([n+i,0],f,!1)),o.splice(t,c)):(o.splice(t,c),o.splice.apply(o,l([n,0],f,!1))),r.wFt=g}return u}},F.prototype.moveUp=function(t){var n,r=1;0<t&&this.m7t(t,t-1)},F.prototype.moveDown=function(t){var n=this,r=1;t<n.visibleLength()-1&&n.m7t(t,t+1)},F.prototype.SPt=function(){for(var t,n,r,i,e,u,o,t=this,n=t.gLt._dataSource.options.schema.hierarchy.outlineColumn,r=t.yLt,i=-1,e=-1,u=0;u<r.length;u++){if(o=r[u],!(0,m.isNullOrEmpty)(o.outlineColumn)){i=u;break}-1!==e||o.value!==n&&((0,m.isNullOrUndefined)(n)||o.value!==n.value)||(e=u)}return-1!==i?{index:i,options:r[i].outlineColumn}:{index:e,options:n}},F.prototype.getHierarchyColumnOptions=function(){return this.SPt().options},F.prototype.getHierarchyColumnIndex=function(){return this.SPt().index},F.prototype.hasHierarchyColumn=function(t){var n=this,r=n.isHierarchy(),n=r&&n.getHierarchyColumnIndex();return(0,m.isNumber)(t)?r&&n===t:!(!r||-1===n)},F.prototype.isHierarchy=function(){return this.gLt.CEt()},F.prototype.getHierarchyNode=function(t,n){var r,n,r=this;if(r.isHierarchy())return n=n?t:r.RJ(t),r.gLt.SEt(n)},F.prototype.getHierarchyRootNode=function(){var t=this;if(t.isHierarchy())return t.gLt.f7t()},F.prototype.promoteHierarchyLevel=function(t){var n;this.isHierarchy()&&this.gLt.M7t(this.RJ(t))},F.prototype.demoteHierarchyLevel=function(t,n){var r=this;r.isHierarchy()&&r.gLt.S7t(r.RJ(t),n)},F.prototype.hasRowOrder=function(){var t;return!(0,m.isNullOrUndefined)(this.gLt.uBt())},F.prototype.hasHierarchyRowOrder=function(){return this.gLt.qX()},F.prototype.addHierarchyItemBefore=function(t,n,r,i){var e,u,e=this;e.yPt(t)&&(u=e.gLt.O7t(e.RJ(t),n),e.APt(n,u),e.mPt(t,n,r,i))},F.prototype.addHierarchyItemAfter=function(t,n,r,i){var e,u,o,e=this;if(e.yPt(t))return u=e.gLt.V7t(e.RJ(t)),o=e.gLt.L7t(e.RJ(t),n),e.APt(n,o),e.mPt(t+u,n,r,i),u},F.prototype.addHierarchyItemAbove=function(t,n,r,i){var e,u,e=this;e.yPt(t)&&(u=e.gLt.F7t(e.RJ(t),n),e.APt(n,u),e.mPt(t,n,r,i))},F.prototype.addHierarchyItemBelow=function(t,n,r,i){var e,u,o,e=this;if(e.yPt(t))return u=e.gLt.V7t(e.RJ(t)),o=e.gLt.G7t(e.RJ(t),n),e.APt(n,o),e.mPt(t+u,n,r,i),u},F.prototype.addHierarchyFirstItem=function(t,n,r){var i,e,i=this,e=i.gLt.Xme(t);i.APt(t,e),i.mPt(0,t,n,r)},F.prototype.APt=function(t,n){var r,i,e,r,i=this.gLt.H7t(n);if(!(0,m.isNullOrUndefined)(i))for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},F.prototype.h7t=function(t,n){if(this.isHierarchy())return this.gLt.h7t(t,n)},F.prototype.fetch=function(r){var i,n,t,t,i=this,n=i.gLt.QOt.tables,t=(0,m.keys)(n);if(0<t.length)return t=t.map(function(t){var t=n[t];return t&&t.fetch(r)}),Promise.all(t).then(function(t){i.yde||i.JLt(),i.pLt()&&(i.RFt(),i.cPt()),!r&&i.yde||(i.yde||i.Mde(),i.$he()),i.dPt||i.hPt();var n=i;return(n.dp||n.vp)&&(n.dp&&n.dp(),n.vp)&&n.vp(),i.yde=!0,t})},F.prototype.iM=function(t){var n=this;n.Wce(),n.cFt(),t&&n.gFt(),n.hLt(),n.tFt(g,!0)},F.prototype.hPt=function(){for(var t,n,r,i,e,u,t,n=0,r=this.yLt;n<r.length;n++)(i=r[n]).cross||(e=i.lookup,(0,m.isArray)(e)?"string"==typeof i.value&&-1===i.value.indexOf(".")&&0<(e=(0,m.getUniqueArray)(e)).length&&((u=(u=i.style)||(i.style={})).cellType||(u.cellType={type:"combobox",items:e})):(0,m.isString)(e)&&e?this.IPt(i,e):(0,m.isObject)(e)&&this.IPt(i,e.name,e.columns))},F.prototype.IPt=function(t,n,r){var i,t,e,i,u,i,u,n,i,i=t.style,t=(t=(i=i||(t.style={})).cellButtons)||(i.cellButtons=[]),e=(e=i.dropDowns)||(i.dropDowns=[]),i=(0,d.array_find)(t,function(t){return"openMultiColumn"===t.command}),u=(0,d.array_find)(e,function(t){return"multiColumn"===t.type});i||u||(u=(i=this.xPt(n)).table,n=i.field,u&&n&&u!==this.gLt&&(i=u.columns)&&(t.push({imageType:"ellipsis",command:"openMultiColumn",useButtonStyle:!0}),e.push({type:"multiColumn",option:{dataSource:u.views[o.DEFAULT_VIEW_NAME]||u.addView(o.DEFAULT_VIEW_NAME),bindingInfos:this.NPt(i,r),key:n}})))},F.prototype.xPt=function(t){for(var n,r,i,e,u,o,i,e=0,u=this.gLt.QOt.relationships;e<u.length;e++)if((o=u[e]).sourceRelationshipName===t){n=o.targetTable,r=o.targetFieldName;break}return{table:n,field:r}},F.prototype.NPt=function(n,t){return t?t.map(function(t){return(0,m.isString)(t)?{name:t,width:"*"}:{name:t.value,width:(0,m.isNullOrUndefined)(t.width)?"*":t.width,displayName:t.caption,visible:t.visible}}):(0,m.keys)(n).map(function(t){var t=n[t];return{name:t.value,width:(0,m.isNullOrUndefined)(t.width)?"*":t.width,displayName:t.caption,visible:t.visible}})},F.prototype.oV=function(){for(var t,n,r,i,t=this,n=t.gLt.length(),r=[],i=0;i<n;i++)r.push(t.nFt(i));return r},F.prototype.ULt=function(t){for(var n,r,i,e,u,o,s,e,n,r=0,i=this.yLt;r<i.length;r++)if(u=(e=i[r]).dataMap,"string"==typeof(o=e.value)){if(u)for(s in u)t[o]===u[s]&&(t[o]=isNaN(s)?s:+s);t.hasOwnProperty(o)&&(e=this.gLt.bEt(o))&&e.relatedTable&&e.setValue&&e.setValue(t)}},F.prototype.kPt=function(t,n){var r,i,e,r=this.lFt;if(r&&0<r.length){for(i=0;i<n;i++)-1<(e=r.indexOf(t+i))&&r.splice(e,1);for(i=0;i<r.length;i++)r[i]>t&&(r[i]-=n)}},F.prototype.removeRowData=function(n,r,t,i){var e,t,u,i,t,o,e=this,t=e.GLt(t,i),u=t.success,i=t.fail,t=e.gLt,o=e.RJ(n);(0,m.isNullOrUndefined)(n)||(0,m.isNullOrUndefined)(o)||(0,m.isNullOrUndefined)(r)?i():t.remove(o,r,function(t){e.WLt(o,t.removedCount||r,n),u(t)},i)},F.prototype.removeItems=function(t,n,r){var u,n,i,e,o,s,c,r,u=this,n=u.GLt(n,r),i=n.success,e=n.fail,o=u.gLt,s=[],c=0,r=t.map(function(e){return function(r,t){var i=u.RJ(e);o.remove(i,1,function(t){var n=t.removedCount||1;u.WLt(i,t.removedCount||1,e),s.push({index:i,count:n}),c+=n,r()},t)}});return(0,m.promiseSerialExecute)(r).then(function(t){t.removedItems=s,t.totalRemovedCount=c,i&&i(t)}).catch(function(t){e&&e(t)})},F.prototype.WLt=function(t,n,r){var e,u,i,o,s,e=this;if(e.kPt(t,n),(0,m.isNumber)(r)||(r=e.FLt(t)),!e.mFt()&&(!e.vme()||e.Dit())){for(u=e.iRt.slice(r,r+n),i=function(t,n){var r,i,r=e.iRt[t],i=u.reduce(function(t,n){return n<r?t+1:t},0);0<i&&(e.iRt[t]-=i)},o=0,s=e.iRt.length;o<s;o++)i(o,s);e.iRt.splice(r,n)}e.dLt(t,n),e.MRt(t,n),e.tFt(void 0,!0)},F.prototype.getChanges=function(){for(var t,n,r,i,e,t,n=this.gLt.getChanges(),r=0,i=n;r<i.length;r++)(e=i[r]).index=this.FLt(e.index);return n},F.prototype.isDataLengthChanged=function(){return this.gLt.isDataLengthChanged()},F.prototype.submitChanges=function(i){var e=this,t=e.GLt(),n=t.success,t=t.fail,r;return e.gLt.submitChanges(function(t,n,r){var t;i&&(t=e.FLt(t),i(t,n,r))}).then(function(){e.QLt(),n()}).catch(t)},F.prototype.QLt=function(){},F.prototype.cancelChanges=function(){var t,n,r,n,i,t=this,n=t.GLt(),r=n.success,n=n.fail,i=t.isDataLengthChanged();t.gLt.cancelChanges(function(){t.KLt(i),r()},n)},F.prototype.KLt=function(t){this.iM(t)},F.prototype.DPt=function(t,n){var r,i,e,t,u,r=this,i=r.TLt(t,n),e=r.ILt.map(function(t,n){return{index:n,option:t}}),t=r._Pt(t,n);if(e=t.map(function(t){return e[t]}),r.ILt=e.map(function(t){return t.option}),i)return i;u=[],e.forEach(function(t,n){(0,m.isNullOrUndefined)(t.option.cross)||t.index===n||u.push({oldIndex:t.index,newIndex:n})}),r.wLt(u)},F.prototype.EPt=function(){var r,t,i,r=this,t=r.CLt;return t&&0<t.length?(i=[],t.forEach(function(t,n){i.push(r.yLt[t].value)}),i):[]},F.prototype.jPt=function(t){var n,r=this.yLt;return(0,m.isNullOrUndefined)(t)?[]:t.map(function(n){return(0,m.findIndex)(r,function(t){return t.value===n})})},F.prototype.OPt=function(t,n,r){var i,e,t,n,u,o,s,c,f,a,a,h,l,i=this;if(i.yLt.forEach(function(t,n){t.RPt=n}),e=i.oPt,t=(0,d.ePt)(t,n,r,i.yLt,i.oPt,i.CLt,i.ILt),n=i.CLt.map(function(t){return i.yLt[t]}),i.yLt=t.map(function(t){return i.yLt[t]}),n&&n.length){for(u=[],o=i.yLt.length,s=-1,c=0,f=n;c<f.length;c++)a=f[c],a=i.yLt.indexOf(a),s=Math.max(a,s),u.push(a);for(h=0;h<o;h++)-1===u.indexOf(h)&&u.push(h);i.oPt=u,i.CLt=u.slice(0,n.length)}return l=i.yLt.reduce(function(t,n,r){return n.RPt!==r&&t.push({oldIndex:n.RPt,newIndex:r}),delete n.RPt,t},[]),i.yLt.forEach(function(t){for(var n,r,i,e,i,n=0,r=l;n<r.length;n++)if(e=(i=r[n]).oldIndex,i=i.newIndex,t._Ft===e){t._Ft=i;break}}),i.lLt&&i.lLt.moveFieldsByIndexes(l),l.map(function(t){return t.oldIndex=i.BPt(t.oldIndex,e),t.newIndex=i.BPt(t.newIndex),t})},F.prototype.SLt=function(t){var n,r,n,i,n=this,r=n.yLt,n=n.ILt,i=r[t];return i.isCross?i.RBt:(0,m.findIndex)(n,function(t){return t.value===i.value})},F.prototype.ALt=function(t){var n=this,r=n.CLt,i=n.ILt;return t=t||r.map(function(t){return n.SLt(t)}),(0,d.generatePinnedColumnIndexMap)(t,i.length)},F.prototype._Pt=function(t,n){var r,i,e,u,i,i,o;if(t!==n)return i=(r=this).CLt,e=r.ILt.map(function(t,n){return{index:n}}),u=i.map(function(t){return r.SLt(t)}),0<(i=(0,d.generatePinnedColumnIndexMap)(u,e.length)).length&&(t=i[t],n=i[n]),i=u.map(function(t){var t=e[t];return t.LPt=!0,t}),(0,m.swapArrayItems)(e,t,n,1),o=e.filter(function(t){return!t.LPt}),i.forEach(function(t,n){o.splice(u[n],0,t)}),o.map(function(t){return t.index})},F.prototype.getColumnInfos=function(r,i,e){for(var u,o,s,c,t,f,n,u=[],o=this.yLt,s=this.oPt,c=this.gLt,t=function(t){var t,n,t,t=!(0<s.length)||e||(0,m.isNullOrUndefined)(s[t])?t:s[t],n=o[t];if(c.jOt(n.value)&&(n.isPrimaryKey=!0),!r||!n.isGroup){if(i&&n.isCross&&(t=n.RBt,(n=f.ILt[t]).RBt=t,u.some(function(t){return t===n})))return"continue";u.push(n)}},f=this,n=0;n<o.length;n++)t(n);return u},F.prototype.ife=function(t){var n=this;return(0,d.getColumnName)((0,m.isNumber)(t)?n.getColumn(t):t)},F.prototype.FPt=function(t){var t=this.gLt.qRt(t);return!(0,m.isNullOrUndefined)(t)&&t!==this.gLt},F.prototype.setColumnInfos=function(t,n){var r,i,e,u,o;if(!n){for(r={},i=0;i<this.yLt.length;i++)"string"==typeof(e=this.yLt[i]).value&&(r[e.value]=!0);for(u=0;u<t.length;u++)"string"==typeof(o=t[u]).value&&!r[o.value]&&(0,y.hasWindowOverFormulas)(o.value)&&this.gLt.Xhe(o.value);this.yde&&(this.yLt=t,this.$he())}this.yLt=t,this.PPt(),this.Gfe(),n&&this.cPt()},F.prototype.Gfe=function(){for(var t,n,r,i,e,u,o,t=this.ILt,n=0;n<t.length;n++)for(r=t[n],i=this.yLt,e=0;e<i.length;e++)if(u=i[e],r.value===u.value){for(o in u)u.hasOwnProperty(o)&&"_"!==o.charAt(0)&&(r[o]=u[o]);break}},F.prototype.PPt=function(){for(var t,n,r,i,e,u,o,s,t=this.ILt,n=t.length-1;0<=n;n--)"string"==typeof(r=t[n].value)&&"="===r[0]&&t.splice(n,1);for(i=this.yLt,e=n=0;n<i.length;)u=i[n],o=t[e],u.isGroup||u.isCross?n++:o&&o.cross?e++:(s=u.value)===(r=o&&o.value)?(n++,e++):"string"==typeof s&&"="===s[0]?(t.splice(e,0,u),n++,e++):n++},F.prototype.GPt=function(t){var n;return!!this.gLt.ZRt(t)},F.prototype.Xfe=function(t,n){var r,i,e,u,o,s,c,f,a,h,l,d,r=this,i=r.NLt;if(r.mFt())r.Wce(),r.filter();else{for(o in e=r.iRt,u=r.Jce)if(u.hasOwnProperty(o)){for(c=(s=u[o]).options,f=s.count,delete s.options,delete s.count,a=0;a<t.length;a++)h=t[a],(0,m.isNullOrUndefined)(s[h])||(delete s[h],f--);if(0<n.length)for(r.iRt=n,r.filter(c),l=0;l<r.iRt.length;l++)s[d=r.iRt[l]]=!0,f++;s.options=c,s.count=f}r.Jce=u,r.iRt=e}r.NLt=i},F.prototype.togglePinnedRows=function(t){var n,r,i,e,u,o,s,c,f,a,h,l,d,v,p,w,b,j;if((0,m.isNullOrUndefined)(t)||this.hasHierarchyColumn())return this.lFt&&this.lFt.length;for(n=this.lFt,r=this.iRt,i=t.length,e=[],u=[],o=[],s=n.length,c=0;c<i;c++)-1<(f=r[t[c]])&&(-1<(a=n.indexOf(f))?(u.push(a),o):e).push(f);if(n.length-(l=u.length)+(h=e.length)>this.rPt)return-1;if(0<l)for(u.sort(),c=l-1;0<=c;c--)n.splice(u[c],1);for(c=0;c<h;c++)n.push(e[c]);if(0<l||0<h){for(d=[],v=r.length,0<(p=n.length)&&(d=n.slice(0)),f=p,c=0;c<v;c++)-1===n.indexOf(r[c])&&(d[f]=r[c],f++);if(!this.mFt()&&!this.tPt())for(c=0;c<l;c++)w=r[u[c]],b=d.indexOf(w),j=this.UPt(w,s,d),d.splice(b,1),d.splice(j=b<j?j-1:j,0,w),p<s&&s--;this.iRt=d,this.Xfe(e,o),this.vFt(),this.bde(g,0<l),this.NFt()}return n.length},F.prototype.togglePinnedColumns=function(t){var n,r,i,e,u,o,s,c,f,a,h,l,n=this;if((0,m.isNullOrUndefined)(t))return this.CLt&&this.CLt.length;for(r=this.oPt,i=0<r.length,t=t.filter(function(t){var t=i?r[t]:t;return!n.yLt[t].isCross}),e=this.CLt,u=t.length,o=[],s=[],c=0;c<u;c++)-1<(f=i?r[t[c]]:t[c])&&(-1<(a=e.indexOf(f))?s.push(a):o.push(f));if(e.length-(l=s.length)+(h=o.length)>this.rPt)return-1;if(0<l)for(s.sort(),c=l-1;0<=c;c--)e.splice(s[c],1);for(c=0;c<h;c++)e.push(o[c]);return(0<h||0<l)&&(this.oPt=(0,d.generatePinnedColumnIndexMap)(e,this.yLt.length)),e.length},F.prototype.uPt=function(t){var n,r=this.oPt;return r&&0<r.length?r[t]:t},F.prototype.BPt=function(t,n){var r;return(n=n||this.oPt)&&0<n.length?n.indexOf(+t):+t},F.prototype.getRowDataAsync=function(r){var i=this;return i.fetch().then(function(t){var n=i.RJ(r);return i.nFt(n)})},F.prototype.UPt=function(t,n,r){for(var i=n;i<r.length;i++)if(r[i]>t)return i;return r.length},F.prototype.nFt=function(t,n,r,i,e){var u=this;return S(u.gLt,u.yLt,u.BFt,u.lLt,u.MFt,t,n,r,i,e)},F.prototype.rebuildFieldGetter=function(){var r,t,r=this.gLt;r&&(t=this.yLt).forEach(function(t,n){var t=t.value;"string"==typeof t&&r.rRt(t)})},F.prototype.ufe=function(t,n){return C(this.gLt,t,n)},F.prototype.bPt=function(o){var s,t,c,f,a,h,n,r,i,s=this,t=s.yLt,c={},f=[],a=!!s.MFt,h=s.gLt;if(t.forEach(function(t,n){var r,n,i,e,u,r=t.value;t.isCross?c[t.value]=s.lLt.getFieldByPosition(n).getOriginalValue(o):r&&!t.isGroup&&("string"==typeof r?(n=0<=r.indexOf("."),i="="===r[0],e=h.XOt&&(0,m.isNullOrUndefined)(h.XOt[r]),(!a||n||i||e)&&(c[r]=R(i?h._getValueByField(r,o):h.XRt(r,o),t))):"function"==typeof r&&f.push({name:r.name,caption:t.caption,value:r}))}),0<f.length&&(n=h.iBt(o),f.forEach(function(t){c[t.name]=t.value(n)})),a)for(i in r=this.lLt.CBt(o))r.hasOwnProperty(i)&&(c[i]=r[i]);return c},F.prototype.addColumn=function(t){"string"==typeof t?t={name:t,value:t}:t.name||"string"!=typeof t.value||(t.name=t.value),t.value&&"="===t.value[0]&&(t.readonly=!0),this.yLt.push(t),(0,y.hasWindowOverFormulas)(t.value)&&(this.gLt.Xhe(t.value),this.yde)&&this.$he()},F.prototype.getColumn=function(t){var n=this;return(0,m.isNullOrUndefined)(t)?n.getColumnInfos():t<0||t>=n.yLt.length?void 0:n.Dve(n.uPt(t))},F.prototype.Dve=function(t){var t;if(t!==g)return t=this.yLt[t],this.gLt.jOt(t.value)&&(t.isPrimaryKey=!0),t},F.prototype.removeColumn=function(t){for(var n,r,i,n=this.yLt,r=0;r<n.length;r++)if((i=n[r]).value===t){n.splice(r,1);break}},F.prototype.tFt=function(t,n,r,i){n||this.gFt(t),this.mFt()&&this.dFt(),this.vFt(),this.nPt(r),this.wFt=g,this.Efe=g},F.prototype.excludeInsertedPinnedRows=function(){for(var t,n,r,i,t=this,n=t.lFt,r=[],i=0;i<n.length;i++)t.isInserted(i)||r.push(n[i]);return r},F.prototype.toJSON=function(){var r,t,i,n,e,r=this,t={};if(r._Lt&&(t={sortBefore:(0,d.removeExtraInfos)(r.DLt),sortAfter:(0,d.removeExtraInfos)(r._Lt)}),0===(i=r.ILt).length)0===r.yLt.length&&r.cPt(),i=r.ILt=r.yLt;else for(n=function(n){var t,t,t,t=i[n].cross;(0,m.isNullOrUndefined)(t)&&(t=r.yLt.filter(function(t){return t.value===i[n].value})[0])&&(i[n]=t),(t=i[n].validator)&&"date"===t.type&&(a(t.value1)&&(t.value1=v(t.value1)),a(t.value2))&&(t.value2=v(t.value2))},e=0;e<i.length;e++)n(e);return j(j({},t),{name:r.name,options:r.LEt,columns:r.ILt,indexMap:r.iRt,columnIndexMap:r.oPt,autoSort:r.autoSort,sortInfo:(0,d.removeExtraInfos)(r.kLt),autoFilter:r.autoFilter,filterInfo:(0,d.removeExtraInfos)(r.NLt),autoGroup:r.autoGroup,groupInfo:r.MFt,detailColumnsVisible:r.UFt,pinnedRows:r.excludeInsertedPinnedRows(),pinnedColumns:r.CLt})},F.prototype.fromJSON=function(t){var n,r,i,e,u,o,n=this;if(n.iRt=t.indexMap,r=t.columnIndexMap,i=n.yLt,r&&i&&0<r.length&&r.length<i.length)for(e=r.length;e<i.length;e++)r[e]=e;for(e=0;e<i.length;e++)(u=i[e].validator)&&"date"===u.type&&("string"==typeof u.value1&&(o=p(u.value1))&&(u.value1=o),"string"==typeof u.value2)&&(o=p(u.value2))&&(u.value2=o);n.oPt=r,n.autoSort=t.autoSort,n.kLt=t.sortInfo,n.DLt=t.sortInfo,t.sortAfter&&(n.DLt=t.sortBefore,n._Lt=t.sortAfter),n.autoFilter=t.autoFilter,n.NLt=t.filterInfo,n.autoGroup=t.autoGroup,n.MFt=t.groupInfo,n.UFt=t.detailColumnsVisible,n.lFt=t.pinnedRows,n.CLt=t.pinnedColumns},n.View=F},"./node_modules/fetch-jsonp/build/fetch-jsonp.js":function(t,n){var r,i,n,e,u,o;e=this,void 0!==(n="function"==typeof(r=u=function(t,n){"use strict";var r,i=5e3,e="callback",u=null;function h(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function l(n){try{delete window[n]}catch(t){window[n]=void 0}}function d(t){var t=document.getElementById(t);t&&document.getElementsByTagName("head")[0].removeChild(t)}function o(u){var o,s,c,f,a,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=u,c=o.timeout||i,f=o.jsonpCallback||e,a=void 0;return new Promise(function(t,n){var r,i,e,r=o.jsonpCallbackFunction||h(),i=f+"_"+r;window[r]=function(n){t({ok:!0,json:function t(){return Promise.resolve(n)}}),a&&clearTimeout(a),d(i),l(r)},s+=-1===s.indexOf("?")?"?":"&",(e=document.createElement("script")).setAttribute("src",""+s+f+"="+r),o.charset&&e.setAttribute("charset",o.charset),e.id=i,document.getElementsByTagName("head")[0].appendChild(e),a=setTimeout(function(){n(new Error("JSONP request to "+u+" timed out")),l(r),d(i),window[r]=function(){l(r)}},c),e.onerror=function(){n(new Error("JSONP request to "+u+" failed")),l(r),d(i),a&&clearTimeout(a)}})}n.exports=o})?r.apply(n,i=[n,t]):r)&&(t.exports=n)},"./node_modules/whatwg-fetch/fetch.js":function(t,n,r){"use strict";var s,i,e,u,o,c;function f(t){return t&&DataView.prototype.isPrototypeOf(t)}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return t="string"!=typeof t?String(t):t}function l(n){var t={next:function(){var t=n.shift();return{done:void 0===t,value:t}}};return s.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(n){this.map={},n instanceof d?n.forEach(function(t,n){this.append(n,t)},this):Array.isArray(n)?n.forEach(function(t){this.append(t[0],t[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(t){this.append(t,n[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(r){return new Promise(function(t,n){r.onload=function(){t(r.result)},r.onerror=function(){n(r.error)}})}function w(t){var n,r,n=new FileReader,r=p(n);return n.readAsArrayBuffer(t),r}function b(t){var n,r,n=new FileReader,r=p(n);return n.readAsText(t),r}function j(t){for(var n,r,i,n=new Uint8Array(t),r=new Array(n.length),i=0;i<n.length;i++)r[i]=String.fromCharCode(n[i]);return r.join("")}function m(t){var n;return t.slice?t.slice(0):((n=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),n.buffer)}function _(){return this.bodyUsed=!1,this.HPt=function(t){(this.zPt=t)?"string"==typeof t?this.VPt=t:s.blob&&Blob.prototype.isPrototypeOf(t)?this.YPt=t:s.formData&&FormData.prototype.isPrototypeOf(t)?this.ZPt=t:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this.VPt=t.toString():s.arrayBuffer&&s.blob&&f(t)?(this.WPt=m(t.buffer),this.zPt=new Blob([this.WPt])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||e(t))?this.WPt=m(t):this.VPt=t=Object.prototype.toString.call(t):this.VPt="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this.YPt&&this.YPt.type?this.headers.set("content-type",this.YPt.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=v(this);if(t)return t;if(this.YPt)return Promise.resolve(this.YPt);if(this.WPt)return Promise.resolve(new Blob([this.WPt]));if(this.ZPt)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.VPt]))},this.arrayBuffer=function(){return this.WPt?v(this)||Promise.resolve(this.WPt):this.blob().then(w)}),this.text=function(){var t=v(this);if(t)return t;if(this.YPt)return b(this.YPt);if(this.WPt)return Promise.resolve(j(this.WPt));if(this.ZPt)throw new Error("could not read FormData body as text");return Promise.resolve(this.VPt)},s.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t){var n=t.toUpperCase();return-1<u.indexOf(n)?n:t}function g(t,n){var r=(n=n||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,n.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t.zPt||(r=t.zPt,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new d(n.headers)),this.method=y(n.method||this.method||"GET"),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this.HPt(r)}function O(t){var r=new FormData;return t.trim().split("&").forEach(function(t){var t,n,t;t&&(n=(t=t.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(n),decodeURIComponent(t)))}),r}function S(t){var r,n,r=new d,n;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var t,n,t,t=t.split(":"),n=t.shift().trim();n&&(t=t.join(":").trim(),r.append(n,t))}),r}function C(t,n){n=n||{},this.type="default",this.status=void 0===n.status?200:n.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in n?n.statusText:"OK",this.headers=new d(n.headers),this.url=n.url||"",this.HPt(t)}r.r(n),r.d(n,{DOMException:function(){return c},Headers:function(){return d},Request:function(){return g},Response:function(){return C},fetch:function(){return R}}),(s={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self}).arrayBuffer&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],e=ArrayBuffer.isView||function(t){return t&&-1<i.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,n){t=a(t),n=h(n);var r=this.map[t];this.map[t]=r?r+", "+n:n},d.prototype.delete=function(t){delete this.map[a(t)]},d.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},d.prototype.set=function(t,n){this.map[a(t)]=h(n)},d.prototype.forEach=function(t,n){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(n,this.map[r],r,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(t,n){r.push(n)}),l(r)},d.prototype.values=function(){var n=[];return this.forEach(function(t){n.push(t)}),l(n)},d.prototype.entries=function(){var r=[];return this.forEach(function(t,n){r.push([n,t])}),l(r)},s.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],g.prototype.clone=function(){return new g(this,{body:this.zPt})},_.call(g.prototype),_.call(C.prototype),C.prototype.clone=function(){return new C(this.zPt,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},C.error=function(){var t=new C(null,{status:0,statusText:""});return t.type="error",t},o=[301,302,303,307,308],C.redirect=function(t,n){if(-1===o.indexOf(n))throw new RangeError("Invalid status code");return new C(null,{status:n,headers:{location:t}})},c=self.DOMException;try{new c}catch(t){(c=function(t,n){this.message=t,this.name=n;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),c.prototype.constructor=c}function R(u,o){return new Promise(function(r,t){var n,i,n=new g(u,o);if(n.signal&&n.signal.aborted)return t(new c("Aborted","AbortError"));function e(){i.abort()}(i=new XMLHttpRequest).onload=function(){var t,n,t={status:i.status,statusText:i.statusText,headers:S(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL"),n="response"in i?i.response:i.responseText,r(new C(n,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.onabort=function(){t(new c("Aborted","AbortError"))},i.open(n.method,n.url,!0),"include"===n.credentials?i.withCredentials=!0:"omit"===n.credentials&&(i.withCredentials=!1),"responseType"in i&&s.blob&&(i.responseType="blob"),n.headers.forEach(function(t,n){i.setRequestHeader(n,t)}),n.signal&&(n.signal.addEventListener("abort",e),i.onreadystatechange=function(){4===i.readyState&&n.signal.removeEventListener("abort",e)}),i.send(void 0===n.zPt?null:n.zPt)})}R.polyfill=!0,self.fetch||(self.fetch=R,self.Headers=d,self.Request=g,self.Response=C)},CalcEngine:function(t){"use strict";t.exports=r("@grapecity/js-calc")},Common:function(t){"use strict";t.exports=r("@grapecity/js-sheets-common")}},u={},s.d=function(t,n){for(var r in n)s.o(n,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},s.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o=s("./dist/src/dataManager.entry.js"),(i={}).Data=o,t.exports=i.Data},"./node_modules_local/@grapecity/js-data-manager/index.js":function(t,n,r){t.exports=r("./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js")},"@grapecity/js-sheets-common":function(t){"use strict";t.exports=GC.Spread},"@grapecity/js-calc":function(t){"use strict";t.exports=GC.Spread.CalcEngine}},i={},t=e("./node_modules_local/@grapecity/js-data-manager/index.js"),(GC=void 0===GC?{}:GC).Data=t}();